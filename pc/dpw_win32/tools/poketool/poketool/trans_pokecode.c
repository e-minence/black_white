/*---------------------------------------------------------------------------*
  Project:  Pokemon DP WiFi
  File:     trans_pokecode.c

  Copyright 2006 Nintendo.  All rights reserved.

  These coded instructions, statements, and computer programs contain
  proprietary information of Nintendo of America Inc. and/or Nintendo
  Company Ltd., and are protected by Federal copyright law.  They may
  not be disclosed to third parties or copied or duplicated in any form,
  in whole or in part, without the prior written consent of Nintendo.

  $NoKeywords: $
 *---------------------------------------------------------------------------*/

#include "trans_pokecode.h"
#include "hangeul_pokecode2unicode.h"

/*-----------------------------------------------------------------------*
					型・定数宣言
 *-----------------------------------------------------------------------*/


/*-----------------------------------------------------------------------*
					関数プロトタイプ宣言
 *-----------------------------------------------------------------------*/

//--- Auto Function Prototype --- Don't comment here.
static s32 search_pokecode(u16 unicode);
//--- End of Auto Function Prototype

/*-----------------------------------------------------------------------*
					グローバル変数定義
 *-----------------------------------------------------------------------*/

// ポケモンコードに-1した値と表のインデックスが対応しています。
static u16 pokecode_to_unicode_table[POKECODE_NUM] = {
	0x3000, // [0x1]	"　"
	0x3041, // [0x2]	"ぁ"
	0x3042, // [0x3]	"あ"
	0x3043, // [0x4]	"ぃ"
	0x3044, // [0x5]	"い"
	0x3045, // [0x6]	"ぅ"
	0x3046, // [0x7]	"う"
	0x3047, // [0x8]	"ぇ"
	0x3048, // [0x9]	"え"
	0x3049, // [0xa]	"ぉ"
	0x304a, // [0xb]	"お"
	0x304b, // [0xc]	"か"
	0x304c, // [0xd]	"が"
	0x304d, // [0xe]	"き"
	0x304e, // [0xf]	"ぎ"
	0x304f, // [0x10]	"く"
	0x3050, // [0x11]	"ぐ"
	0x3051, // [0x12]	"け"
	0x3052, // [0x13]	"げ"
	0x3053, // [0x14]	"こ"
	0x3054, // [0x15]	"ご"
	0x3055, // [0x16]	"さ"
	0x3056, // [0x17]	"ざ"
	0x3057, // [0x18]	"し"
	0x3058, // [0x19]	"じ"
	0x3059, // [0x1a]	"す"
	0x305a, // [0x1b]	"ず"
	0x305b, // [0x1c]	"せ"
	0x305c, // [0x1d]	"ぜ"
	0x305d, // [0x1e]	"そ"
	0x305e, // [0x1f]	"ぞ"
	0x305f, // [0x20]	"た"
	0x3060, // [0x21]	"だ"
	0x3061, // [0x22]	"ち"
	0x3062, // [0x23]	"ぢ"
	0x3063, // [0x24]	"っ"
	0x3064, // [0x25]	"つ"
	0x3065, // [0x26]	"づ"
	0x3066, // [0x27]	"て"
	0x3067, // [0x28]	"で"
	0x3068, // [0x29]	"と"
	0x3069, // [0x2a]	"ど"
	0x306a, // [0x2b]	"な"
	0x306b, // [0x2c]	"に"
	0x306c, // [0x2d]	"ぬ"
	0x306d, // [0x2e]	"ね"
	0x306e, // [0x2f]	"の"
	0x306f, // [0x30]	"は"
	0x3070, // [0x31]	"ば"
	0x3071, // [0x32]	"ぱ"
	0x3072, // [0x33]	"ひ"
	0x3073, // [0x34]	"び"
	0x3074, // [0x35]	"ぴ"
	0x3075, // [0x36]	"ふ"
	0x3076, // [0x37]	"ぶ"
	0x3077, // [0x38]	"ぷ"
	0x3078, // [0x39]	"へ"
	0x3079, // [0x3a]	"べ"
	0x307a, // [0x3b]	"ぺ"
	0x307b, // [0x3c]	"ほ"
	0x307c, // [0x3d]	"ぼ"
	0x307d, // [0x3e]	"ぽ"
	0x307e, // [0x3f]	"ま"
	0x307f, // [0x40]	"み"
	0x3080, // [0x41]	"む"
	0x3081, // [0x42]	"め"
	0x3082, // [0x43]	"も"
	0x3083, // [0x44]	"ゃ"
	0x3084, // [0x45]	"や"
	0x3085, // [0x46]	"ゅ"
	0x3086, // [0x47]	"ゆ"
	0x3087, // [0x48]	"ょ"
	0x3088, // [0x49]	"よ"
	0x3089, // [0x4a]	"ら"
	0x308a, // [0x4b]	"り"
	0x308b, // [0x4c]	"る"
	0x308c, // [0x4d]	"れ"
	0x308d, // [0x4e]	"ろ"
	0x308f, // [0x4f]	"わ"
	0x3092, // [0x50]	"を"
	0x3093, // [0x51]	"ん"
	0x30a1, // [0x52]	"ァ"
	0x30a2, // [0x53]	"ア"
	0x30a3, // [0x54]	"ィ"
	0x30a4, // [0x55]	"イ"
	0x30a5, // [0x56]	"ゥ"
	0x30a6, // [0x57]	"ウ"
	0x30a7, // [0x58]	"ェ"
	0x30a8, // [0x59]	"エ"
	0x30a9, // [0x5a]	"ォ"
	0x30aa, // [0x5b]	"オ"
	0x30ab, // [0x5c]	"カ"
	0x30ac, // [0x5d]	"ガ"
	0x30ad, // [0x5e]	"キ"
	0x30ae, // [0x5f]	"ギ"
	0x30af, // [0x60]	"ク"
	0x30b0, // [0x61]	"グ"
	0x30b1, // [0x62]	"ケ"
	0x30b2, // [0x63]	"ゲ"
	0x30b3, // [0x64]	"コ"
	0x30b4, // [0x65]	"ゴ"
	0x30b5, // [0x66]	"サ"
	0x30b6, // [0x67]	"ザ"
	0x30b7, // [0x68]	"シ"
	0x30b8, // [0x69]	"ジ"
	0x30b9, // [0x6a]	"ス"
	0x30ba, // [0x6b]	"ズ"
	0x30bb, // [0x6c]	"セ"
	0x30bc, // [0x6d]	"ゼ"
	0x30bd, // [0x6e]	"ソ"
	0x30be, // [0x6f]	"ゾ"
	0x30bf, // [0x70]	"タ"
	0x30c0, // [0x71]	"ダ"
	0x30c1, // [0x72]	"チ"
	0x30c2, // [0x73]	"ヂ"
	0x30c3, // [0x74]	"ッ"
	0x30c4, // [0x75]	"ツ"
	0x30c5, // [0x76]	"ヅ"
	0x30c6, // [0x77]	"テ"
	0x30c7, // [0x78]	"デ"
	0x30c8, // [0x79]	"ト"
	0x30c9, // [0x7a]	"ド"
	0x30ca, // [0x7b]	"ナ"
	0x30cb, // [0x7c]	"ニ"
	0x30cc, // [0x7d]	"ヌ"
	0x30cd, // [0x7e]	"ネ"
	0x30ce, // [0x7f]	"ノ"
	0x30cf, // [0x80]	"ハ"
	0x30d0, // [0x81]	"バ"
	0x30d1, // [0x82]	"パ"
	0x30d2, // [0x83]	"ヒ"
	0x30d3, // [0x84]	"ビ"
	0x30d4, // [0x85]	"ピ"
	0x30d5, // [0x86]	"フ"
	0x30d6, // [0x87]	"ブ"
	0x30d7, // [0x88]	"プ"
	0x30d8, // [0x89]	"ヘ"
	0x30d9, // [0x8a]	"ベ"
	0x30da, // [0x8b]	"ペ"
	0x30db, // [0x8c]	"ホ"
	0x30dc, // [0x8d]	"ボ"
	0x30dd, // [0x8e]	"ポ"
	0x30de, // [0x8f]	"マ"
	0x30df, // [0x90]	"ミ"
	0x30e0, // [0x91]	"ム"
	0x30e1, // [0x92]	"メ"
	0x30e2, // [0x93]	"モ"
	0x30e3, // [0x94]	"ャ"
	0x30e4, // [0x95]	"ヤ"
	0x30e5, // [0x96]	"ュ"
	0x30e6, // [0x97]	"ユ"
	0x30e7, // [0x98]	"ョ"
	0x30e8, // [0x99]	"ヨ"
	0x30e9, // [0x9a]	"ラ"
	0x30ea, // [0x9b]	"リ"
	0x30eb, // [0x9c]	"ル"
	0x30ec, // [0x9d]	"レ"
	0x30ed, // [0x9e]	"ロ"
	0x30ef, // [0x9f]	"ワ"
	0x30f2, // [0xa0]	"ヲ"
	0x30f3, // [0xa1]	"ン"
	0xff10, // [0xa2]	"０"
	0xff11, // [0xa3]	"１"
	0xff12, // [0xa4]	"２"
	0xff13, // [0xa5]	"３"
	0xff14, // [0xa6]	"４"
	0xff15, // [0xa7]	"５"
	0xff16, // [0xa8]	"６"
	0xff17, // [0xa9]	"７"
	0xff18, // [0xaa]	"８"
	0xff19, // [0xab]	"９"
	0xff21, // [0xac]	"Ａ"
	0xff22, // [0xad]	"Ｂ"
	0xff23, // [0xae]	"Ｃ"
	0xff24, // [0xaf]	"Ｄ"
	0xff25, // [0xb0]	"Ｅ"
	0xff26, // [0xb1]	"Ｆ"
	0xff27, // [0xb2]	"Ｇ"
	0xff28, // [0xb3]	"Ｈ"
	0xff29, // [0xb4]	"Ｉ"
	0xff2a, // [0xb5]	"Ｊ"
	0xff2b, // [0xb6]	"Ｋ"
	0xff2c, // [0xb7]	"Ｌ"
	0xff2d, // [0xb8]	"Ｍ"
	0xff2e, // [0xb9]	"Ｎ"
	0xff2f, // [0xba]	"Ｏ"
	0xff30, // [0xbb]	"Ｐ"
	0xff31, // [0xbc]	"Ｑ"
	0xff32, // [0xbd]	"Ｒ"
	0xff33, // [0xbe]	"Ｓ"
	0xff34, // [0xbf]	"Ｔ"
	0xff35, // [0xc0]	"Ｕ"
	0xff36, // [0xc1]	"Ｖ"
	0xff37, // [0xc2]	"Ｗ"
	0xff38, // [0xc3]	"Ｘ"
	0xff39, // [0xc4]	"Ｙ"
	0xff3a, // [0xc5]	"Ｚ"
	0xff41, // [0xc6]	"ａ"
	0xff42, // [0xc7]	"ｂ"
	0xff43, // [0xc8]	"ｃ"
	0xff44, // [0xc9]	"ｄ"
	0xff45, // [0xca]	"ｅ"
	0xff46, // [0xcb]	"ｆ"
	0xff47, // [0xcc]	"ｇ"
	0xff48, // [0xcd]	"ｈ"
	0xff49, // [0xce]	"ｉ"
	0xff4a, // [0xcf]	"ｊ"
	0xff4b, // [0xd0]	"ｋ"
	0xff4c, // [0xd1]	"ｌ"
	0xff4d, // [0xd2]	"ｍ"
	0xff4e, // [0xd3]	"ｎ"
	0xff4f, // [0xd4]	"ｏ"
	0xff50, // [0xd5]	"ｐ"
	0xff51, // [0xd6]	"ｑ"
	0xff52, // [0xd7]	"ｒ"
	0xff53, // [0xd8]	"ｓ"
	0xff54, // [0xd9]	"ｔ"
	0xff55, // [0xda]	"ｕ"
	0xff56, // [0xdb]	"ｖ"
	0xff57, // [0xdc]	"ｗ"
	0xff58, // [0xdd]	"ｘ"
	0xff59, // [0xde]	"ｙ"
	0xff5a, // [0xdf]	"ｚ"
	0x0000, // [0xe0]	""
	0xff01, // [0xe1]	"！"
	0xff1f, // [0xe2]	"？"
	0xff64, // [0xe3]	"、"
	0xff61, // [0xe4]	"。"
	0x2026, // [0xe5]	"…"
	0xff65, // [0xe6]	"・"
	0xff0f, // [0xe7]	"／"
	0x300c, // [0xe8]	"「"
	0x300d, // [0xe9]	"」"
	0x300e, // [0xea]	"『"
	0x300f, // [0xeb]	"』"
	0xff08, // [0xec]	"（"
	0xff09, // [0xed]	"）"
	0x2642, // [0xee]	"♂"
	0x2640, // [0xef]	"♀"
	0xff0b, // [0xf0]	"＋"
	0xff0d, // [0xf1]	"－"
	0x00d7, // [0xf2]	"×"
	0x00f7, // [0xf3]	"÷"
	0xff1d, // [0xf4]	"＝"
	0xff5e, // [0xf5]	"～"
	0xff1a, // [0xf6]	"："
	0xff1b, // [0xf7]	"；"
	0xff0e, // [0xf8]	"．"
	0xff0c, // [0xf9]	"，"
	0x2660, // [0xfa]	"・"
	0x2663, // [0xfb]	"・"
	0x2665, // [0xfc]	"・"
	0x2666, // [0xfd]	"・"
	0x2605, // [0xfe]	"★"
	0x25ce, // [0xff]	"◎"
	0x25cb, // [0x100]	"○"
	0x25a1, // [0x101]	"□"
	0x25b3, // [0x102]	"△"
	0x25c7, // [0x103]	"◇"
	0xff20, // [0x104]	"＠"
	0x266a, // [0x105]	"♪"
	0xff05, // [0x106]	"％"
	0x2600, // [0x107]	"\000"
	0x2601, // [0x108]	"\001"
	0x2602, // [0x109]	"\002"
	0x2603, // [0x10a]	"\003"
	0x3300, // [0x10b]	"・"
	0x3301, // [0x10c]	"\001"
	0x3302, // [0x10d]	"\002"
	0x3303, // [0x10e]	"㌃"
	0x3304, // [0x10f]	"\004"
	0x3305, // [0x110]	"・"
	0x3306, // [0x111]	"\006"
	0x5186, // [0x112]	"円"
	0x3307, // [0x113]	"\a"
	0x3308, // [0x114]	"\010"
	0x3309, // [0x115]	"\t"
	0x330a, // [0x116]	"\n"
	0x330b, // [0x117]	"\v"
	0x330c, // [0x118]	"\f"
	0x330d, // [0x119]	"㌍"
	0x330e, // [0x11a]	"\016"
	0x2190, // [0x11b]	"←"
	0x2191, // [0x11c]	"↑"
	0x2193, // [0x11d]	"↓"
	0x2192, // [0x11e]	"→"
	0x27a1, // [0x11f]	"\241"
	0xff06, // [0x120]	"＆"
	0x0030, // [0x121]	"0"
	0x0031, // [0x122]	"1"
	0x0032, // [0x123]	"2"
	0x0033, // [0x124]	"3"
	0x0034, // [0x125]	"4"
	0x0035, // [0x126]	"5"
	0x0036, // [0x127]	"6"
	0x0037, // [0x128]	"7"
	0x0038, // [0x129]	"8"
	0x0039, // [0x12a]	"9"
	0x0041, // [0x12b]	"A"
	0x0042, // [0x12c]	"B"
	0x0043, // [0x12d]	"C"
	0x0044, // [0x12e]	"D"
	0x0045, // [0x12f]	"E"
	0x0046, // [0x130]	"F"
	0x0047, // [0x131]	"G"
	0x0048, // [0x132]	"H"
	0x0049, // [0x133]	"I"
	0x004a, // [0x134]	"J"
	0x004b, // [0x135]	"K"
	0x004c, // [0x136]	"L"
	0x004d, // [0x137]	"M"
	0x004e, // [0x138]	"N"
	0x004f, // [0x139]	"O"
	0x0050, // [0x13a]	"P"
	0x0051, // [0x13b]	"Q"
	0x0052, // [0x13c]	"R"
	0x0053, // [0x13d]	"S"
	0x0054, // [0x13e]	"T"
	0x0055, // [0x13f]	"U"
	0x0056, // [0x140]	"V"
	0x0057, // [0x141]	"W"
	0x0058, // [0x142]	"X"
	0x0059, // [0x143]	"Y"
	0x005a, // [0x144]	"Z"
	0x0061, // [0x145]	"a"
	0x0062, // [0x146]	"b"
	0x0063, // [0x147]	"c"
	0x0064, // [0x148]	"d"
	0x0065, // [0x149]	"e"
	0x0066, // [0x14a]	"f"
	0x0067, // [0x14b]	"g"
	0x0068, // [0x14c]	"h"
	0x0069, // [0x14d]	"i"
	0x006a, // [0x14e]	"j"
	0x006b, // [0x14f]	"k"
	0x006c, // [0x150]	"l"
	0x006d, // [0x151]	"m"
	0x006e, // [0x152]	"n"
	0x006f, // [0x153]	"o"
	0x0070, // [0x154]	"p"
	0x0071, // [0x155]	"q"
	0x0072, // [0x156]	"r"
	0x0073, // [0x157]	"s"
	0x0074, // [0x158]	"t"
	0x0075, // [0x159]	"u"
	0x0076, // [0x15a]	"v"
	0x0077, // [0x15b]	"w"
	0x0078, // [0x15c]	"x"
	0x0079, // [0x15d]	"y"
	0x007a, // [0x15e]	"z"
	0x00c0, // [0x15f]	"\300"
	0x00c1, // [0x160]	"\301"
	0x00c2, // [0x161]	"\302"
	0x00c3, // [0x162]	"\303"
	0x00c4, // [0x163]	"\304"
	0x00c5, // [0x164]	"\305"
	0x00c6, // [0x165]	"\306"
	0x00c7, // [0x166]	"\307"
	0x00c8, // [0x167]	"\310"
	0x00c9, // [0x168]	"\311"
	0x00ca, // [0x169]	"\312"
	0x00cb, // [0x16a]	"\313"
	0x00cc, // [0x16b]	"\314"
	0x00cd, // [0x16c]	"\315"
	0x00ce, // [0x16d]	"\316"
	0x00cf, // [0x16e]	"\317"
	0x00d0, // [0x16f]	"\320"
	0x00d1, // [0x170]	"\321"
	0x00d2, // [0x171]	"\322"
	0x00d3, // [0x172]	"\323"
	0x00d4, // [0x173]	"\324"
	0x00d5, // [0x174]	"\325"
	0x00d6, // [0x175]	"\326"
	0x005b, // [0x176]	"["
	0x00d8, // [0x177]	"\330"
	0x00d9, // [0x178]	"\331"
	0x00da, // [0x179]	"\332"
	0x00db, // [0x17a]	"\333"
	0x00dc, // [0x17b]	"\334"
	0x00dd, // [0x17c]	"\335"
	0x00de, // [0x17d]	"\336"
	0x00df, // [0x17e]	"\337"
	0x00e0, // [0x17f]	"\340"
	0x00e1, // [0x180]	"\341"
	0x00e2, // [0x181]	"\342"
	0x00e3, // [0x182]	"\343"
	0x00e4, // [0x183]	"\344"
	0x00e5, // [0x184]	"\345"
	0x00e6, // [0x185]	"\346"
	0x00e7, // [0x186]	"\347"
	0x00e8, // [0x187]	"\350"
	0x00e9, // [0x188]	"\351"
	0x00ea, // [0x189]	"\352"
	0x00eb, // [0x18a]	"\353"
	0x00ec, // [0x18b]	"\354"
	0x00ed, // [0x18c]	"\355"
	0x00ee, // [0x18d]	"\356"
	0x00ef, // [0x18e]	"\357"
	0x00f0, // [0x18f]	"\360"
	0x00f1, // [0x190]	"\361"
	0x00f2, // [0x191]	"\362"
	0x00f3, // [0x192]	"\363"
	0x00f4, // [0x193]	"\364"
	0x00f5, // [0x194]	"\365"
	0x00f6, // [0x195]	"\366"
	0x005d, // [0x196]	"]"
	0x00f8, // [0x197]	"\370"
	0x00f9, // [0x198]	"\371"
	0x00fa, // [0x199]	"\372"
	0x00fb, // [0x19a]	"\373"
	0x00fc, // [0x19b]	"\374"
	0x00fd, // [0x19c]	"\375"
	0x00fe, // [0x19d]	"\376"
	0x00ff, // [0x19e]	"\377"
	0x0152, // [0x19f]	"R"
	0x0153, // [0x1a0]	"S"
	0x015e, // [0x1a1]	"^"
	0x015f, // [0x1a2]	"_"
	0x00aa, // [0x1a3]	"\252"
	0x00ba, // [0x1a4]	"\272"
	0x00bc, // [0x1a5]	"\274"
	0x00bd, // [0x1a6]	"\275"
	0x00be, // [0x1a7]	"\276"
	0x0024, // [0x1a8]	"$"
	0x00a1, // [0x1a9]	"\241"
	0x00bf, // [0x1aa]	"\277"
	0x0021, // [0x1ab]	"!"
	0x003f, // [0x1ac]	"?"
	0x002c, // [0x1ad]	","
	0x002e, // [0x1ae]	"."
	0x330f, // [0x1af]	"\017"
	0x00b7, // [0x1b0]	"\267"
	0x002f, // [0x1b1]	"/"
	0x2018, // [0x1b2]	"‘"
	0x2019, // [0x1b3]	"’"
	0x201c, // [0x1b4]	"“"
	0x201d, // [0x1b5]	"”"
	0x201e, // [0x1b6]	"\036"
	0x00ab, // [0x1b7]	"\253"
	0x00bb, // [0x1b8]	"\273"
	0x0028, // [0x1b9]	"("
	0x0029, // [0x1ba]	")"
	0x003c, // [0x1bb]	"<"
	0x003e, // [0x1bc]	">"
	0x002b, // [0x1bd]	"+"
	0x002d, // [0x1be]	"-"
	0x002a, // [0x1bf]	"*"
	0x0023, // [0x1c0]	"#"
	0x003d, // [0x1c1]	"="
	0x0026, // [0x1c2]	"&"
	0x007e, // [0x1c3]	"~"
	0x003a, // [0x1c4]	":"
	0x003b, // [0x1c5]	";"
	0x3310, // [0x1c6]	"\020"
	0x3311, // [0x1c7]	"\021"
	0x3312, // [0x1c8]	"\022"
	0x3313, // [0x1c9]	"\023"
	0x3314, // [0x1ca]	"㌔"
	0x3315, // [0x1cb]	"・"
	0x3316, // [0x1cc]	"・"
	0x3317, // [0x1cd]	"\027"
	0x3318, // [0x1ce]	"㌘"
	0x3319, // [0x1cf]	"\031"
	0x0040, // [0x1d0]	"@"
	0x331a, // [0x1d1]	"\032"
	0x0025, // [0x1d2]	"%"
	0x331b, // [0x1d3]	"\e"
	0x331c, // [0x1d4]	"\034"
	0x331d, // [0x1d5]	"\035"
	0x331e, // [0x1d6]	"・"
	0x331f, // [0x1d7]	"\037"
	0x3320, // [0x1d8]	" "
	0x3321, // [0x1d9]	"!"
	0x3322, // [0x1da]	"㌢"
	0x3323, // [0x1db]	"㌣"
	0x3324, // [0x1dc]	"$"
	0x3325, // [0x1dd]	"%"
	0x0020, // [0x1de]	" "
	0x00b2, // [0x1df]	"\262"
	0x0000, // [0x1e0]	""
	0x0000, // [0x1e1]	""
	0x0000, // [0x1e2]	""
	0x0000, // [0x1e3]	""
	0x0000, // [0x1e4]	""
	0x0000, // [0x1e5]	""
	0x0000, // [0x1e6]	""
	0x0000, // [0x1e7]	""
	0x0000, // [0x1e8]	""
	0x0000, // [0x1e9]	""
	0x0000, // [0x1ea]	""
	0x0000, // [0x1eb]	""
	0x0000, // [0x1ec]	""
	0x0000, // [0x1ed]	""
	0x0000, // [0x1ee]	""
	0x0000, // [0x1ef]	""
	0x0000, // [0x1f0]	""
	0x0000, // [0x1f1]	""
	0x0000, // [0x1f2]	""
	0x0000, // [0x1f3]	""
	0x0000, // [0x1f4]	""
	0x0000, // [0x1f5]	""
	0x0000, // [0x1f6]	""
	0x0000, // [0x1f7]	""
	0x0000, // [0x1f8]	""
	0x0000, // [0x1f9]	""
	0x0000, // [0x1fa]	""
	0x0000, // [0x1fb]	""
	0x0000, // [0x1fc]	""
	0x0000, // [0x1fd]	""
	0x25a0, // [0x1fe]	"■"
	0x25bc, // [0x1ff]	"▼"
	0x25bd, // [0x200]	"▽"
};

/*-----------------------------------------------------------------------*
					グローバル関数定義
 *-----------------------------------------------------------------------*/

/*!
	文字列をポケモンコードからUTF-16LEに変換します。
	
	@param pokecode	変換元の文字列
	@param unicode	変換後の文字列を格納するバッファ。エラーが起きなければ、終端は必ず0になります。
	@param unicode_buf_size	バッファのサイズ（バイト数）
	
	@retval 0以上	正常に変換されました。変換後の文字列の長さを返します。
	@retval -1		エラーです。変換不可能な文字が見つかりました。
*/
s32 pokecode_to_unicode(const u16* pokecode, wchar_t* unicode, s32 unicode_buf_size) {
	
	s32 i;
	s32 max_len = unicode_buf_size / 2 - 1;
	
	for (i = 0; i < max_len; i++) {
		u16 pokechar = pokecode[i];
		
		if (pokechar == POKECODE_EOM) {
			// 終端を見つけた場合には、出力にも終端を入れてリターン
			unicode[i] = L'\0';
			return i;
		} else if (pokechar == 0
				   || pokechar == POKECODE_UNUSED_01
				   || (pokechar >= POKECODE_RESERVED_BEGIN && pokechar <= POKECODE_RESERVED_END)
				   || (pokechar >= POKECODE_RESERVED2_BEGIN && pokechar <= POKECODE_RESERVED2_END)
				   || pokechar > POKECODE_NUM)
		{
			// 範囲外、または予約文字はエラーを返す
			return -1;
		} else {
            u16 tempUnicode = hangeulPokecode2Unicode(pokechar);
            if(tempUnicode == 0xffff){
    			unicode[i] = pokecode_to_unicode_table[pokechar - 1];   // ハングル以外
            }else{
                unicode[i] = tempUnicode;   // ハングル
            }
		}
	}
	
	// バッファを超過した場合
	unicode[max_len] = L'\0';
	
	return max_len;
}

/*!
	文字列をUTF-16LEからポケモンコードに変換します。
	
	@param unicode	変換元の文字列
	@param pokecode	変換後の文字列を格納するバッファ。エラーが起きなければ、終端は必ず0xffffになります。
	@param pokecode_buf_size	バッファのサイズ（バイト数）
	
	@retval 0以上	正常に変換されました。変換後の文字列の長さを返します。
	@retval -1		エラーです。変換不可能な文字が見つかりました。
*/
s32 unicode_to_pokecode(const wchar_t* unicode, u16* pokecode, s32 pokecode_buf_size) {
	
	s32 i = 0;
	s32 max_len = pokecode_buf_size / 2 - 1;
	
	for (i = 0; i < max_len; i++) {
		wchar_t unichar = unicode[i];
		
		if (unichar == L'\0') {
			// 終端を見つけた場合には、出力にも終端を入れてリターン
			pokecode[i] = POKECODE_EOM;
			return i;
		} else {
			s32 search_result = search_pokecode(unichar);
			
			if (search_result == -1) {
				// 文字が見つからなかったらエラーを返す
				return -1;
			} else {
				pokecode[i] = (u16)search_result;
			}
		}
	}
	
	// バッファを超過した場合
	pokecode[max_len] = POKECODE_EOM;
	
	return max_len;
}

/*!
	ポケモンコードにハングル文字が入っているかチェックする

	@param pokeCodeName	チェックするポケモンコード
	@param length ポケモンコードの長さ

	@retval TRUE				与えられたポケモンコードにハングル文字が含まれている
	@retval FALSE				与えられたポケモンコードにハングル文字は含まれていない
*/
BOOL IsHangeulName(const u16* pokecode, u32 length){
    u32 i;
    for(i=0; i<length; i++){
        if(pokecode[i] >= POKECODE_HANGEUL_BEGIN && pokecode[i] <= POKECODE_HANGEUL_END){
            return TRUE;
        }
    }
    return FALSE;
}

/*-----------------------------------------------------------------------*
					ローカル関数定義
 *-----------------------------------------------------------------------*/

static s32 search_pokecode(u16 unicode) {
	
	s32 i = 0;
	
	for (;; i++) {
		if (i == POKECODE_NUM) {
			// テーブルの最後に達したらエラーで終了
			break;
		} else if (i == POKECODE_RESERVED_BEGIN - 1) {
			// 予約の部分に入ったらジャンプ
			i = POKECODE_RESERVED_END - 1;
		} else if (i == POKECODE_RESERVED2_BEGIN - 1) {
			// 予約の部分に入ったらジャンプ
			i = POKECODE_RESERVED2_END - 1;
		} else if (i == POKECODE_RESERVED2_END) {
            u16 tempPokecode = hangeulUnicode2Pokecode(unicode);
            if(tempPokecode == 0xffff){
                i = POKECODE_HANGEUL_END;
            }else{
                return tempPokecode;
            }
			break;
		} else if (pokecode_to_unicode_table[i] == unicode) {
			// 文字を見つけたらポケモンコードを返す
			return i + 1;
		}
	}
	
	// どこにも見つからない場合は-1を返す
	return -1;
}
