<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" href="../../css/twl.css" type="text/css">
<title>NHTTP_SetVerifyOption</title>
</head>

<body>

<h1>NHTTP_SetVerifyOption<img src="../../image/NTR.gif"align="middle"><img src="../../image/TWL.gif" align="middle"></h1>

<h2>構文</h2>
<dl><dd><pre><code>
#include &lt;nitroWiFi/nhttp.h&gt;

int NHTTP_SetVerifyOption( NHTTPConnectionHandle handle, u32 verifyOption );
</code></pre></dd></dl>

<h2>引数</h2>
<p>
<table width="100%">
  <tr>
    <td><var>handle</var></td>
    <td><a href="NHTTP_CreateConnection.html">NHTTP_CreateConnection()</a>で生成した接続ハンドル</td>
  </tr>
  <tr>
    <td><var>verifyOption</var></td>
    <td width="560">指定すべき検証内容をあらわす以下のビットの論理和
      <table border="1" width="90%">
        <tr>
          <td bgcolor="#ffffe8">SSL_VERIFY_SUBJECT_ALT_NAME</td>
          <td>RFC2818 に準拠した subjectAltName 拡張領域の dNSName と iPAddress を
            使用したサーバ確認を行います。
            ただし、現在の実装では複数の dNSName には対応していません。
          </td>
        </tr>
        <tr>
          <td bgcolor="#ffffe8">SSL_VERIFY_DATE</td>
          <td>証明書の期限切れを検証します。</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
</p>

<h2>返り値</h2>
<pre>
成功すれば0を、接続ハンドルがNULLの場合に失敗し-1を返します。
</pre>

<h2>説明</h2>
<p>
SSL通信で送信すべきHTTPリクエストに対し、<em>verifyOption</em>を指定することにより、<br>
証明書の検証内容を追加設定します。<br>
デフォルトでは、<br>
　・サーバ証明書が正しくルートCA証明書で署名されているか<br>
　・サーバ証明書の Common Name が接続先サーバのホスト名と一致しているか<br>
を確認する設定になっています。<br>
接続先のサーバはSSLに対応している必要があります。<br>
また、別途SSL用の設定関数を呼び出しておく必要があります。
</p>

<p>
CPS SSL の場合、この関数は使用できません。呼び出しても無視されます。
</p>

<h2>参照</h2>
<p>
<code>
<a href="NHTTP_SetRootCA.html">NHTTP_SetRootCA</a>,
<a href="NHTTP_SetBuiltinRootCA.html">NHTTP_SetBuiltinRootCA</a>,
<a href="NHTTP_SetClientCert.html">NHTTP_SetClientCert</a>,
<a href="NHTTP_SetBuiltinClientCert.html">NHTTP_SetBuiltinClientCert</a>,
<a href="NHTTP_RemoveClientCert.html">NHTTP_RemoveClientCert</a>,
<a href="NHTTP_StartConnection.html">NHTTP_StartConnection</a>
<a href="NHTTP_DisableVerifyOptionForDebug.html">NHTTP_DisableVerifyOptionForDebug</a>,
</code>
</p>

<h2>履歴</h2>
<p>
2008/04/09 CPS SSL の場合使用できない旨を追記<br>
2007/06/21 引数、説明を追記。<br>
2007/05/21 返り値を追記。<br>
2006/10/19 説明を追記。<br>
2006/6/26 初版。<br>
</p>


</body>
</html>
