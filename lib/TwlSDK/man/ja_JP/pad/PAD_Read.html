<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<title>PAD_Read</title>
<LINK rel="stylesheet" href="../css/nitro.css" type="text/css">
</head>

<body>

<h1 align="left">PAD_Read <IMG src="../image/NTR.gif" align="middle"><IMG src="../image/TWL.gif" align="middle"></h1>
<h2>構文</h2>

<dl>
  <dd>
<CODE>#include &lt;nitro/pad.h&gt;</CODE><BR>
  <BR>
  u16<CODE> PAD_Read( void );</CODE></dd>
</dl>

<h2>引数</h2>
<P>なし。</P>

<h2>返り値</h2>
<p>現在のキー情報です。</p>
<p>十字キー上下、十字キー左右同時押下といった禁則入力に対しては、<BR>
前者は十字キー上、後者は十字キー左だけが押されている状態になるようにフィルタをかけています。</p>

<H2>説明</H2>
<P>キーやボタンの押下情報を取得します。<BR>
キーやボタンの情報は以下の値の論理和となります。<BR>

</P>
<TABLE>
  <TBODY>
    <TR>
      <TH>値(定義)</TH>
      <TH>状態</TH>
      <TH>値(数値)</TH>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_BUTTON_A</TD>
      <TD bgcolor="#eeeeee">Aボタンを押している</TD>
      <TD>0x0001</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_BUTTON_B</TD>
      <TD bgcolor="#eeeeee">Bボタンを押している</TD>
      <TD>0x0002</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_BUTTON_SELECT</TD>
      <TD bgcolor="#eeeeee">SELECTボタンを押している</TD>
      <TD>0x0004</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_BUTTON_START</TD>
      <TD bgcolor="#eeeeee">STARTボタンを押している</TD>
      <TD>0x0008</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_KEY_RIGHT</TD>
      <TD bgcolor="#eeeeee">十字キー右を押している</TD>
      <TD>0x0010</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_KEY_LEFT</TD>
      <TD bgcolor="#eeeeee">十字キー左を押している</TD>
      <TD>0x0020</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_KEY_UP</TD>
      <TD bgcolor="#eeeeee">十字キー上を押している</TD>
      <TD>0x0040</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_KEY_DOWN</TD>
      <TD bgcolor="#eeeeee">十字キー下を押している</TD>
      <TD>0x0080</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_BUTTON_R</TD>
      <TD bgcolor="#eeeeee">Rボタンを押している</TD>
      <TD>0x0100</TD>
    </TR>
    <TR>
      <TD bgcolor="#eeeeee">PAD_BUTTON_L</TD>
      <TD bgcolor="#eeeeee">Lボタンを押している</TD>
      <TD>0x0200</TD>
    </TR>
    <TR>
      <TD>PAD_BUTTON_X</TD>
      <TD>Xボタンを押している</TD>
      <TD>0x0400</TD>
    </TR>
    <TR>
      <TD>PAD_BUTTON_Y</TD>
      <TD>Yボタンを押している</TD>
      <TD>0x0800</TD>
    </TR>
    <TR>
      <TD>PAD_BUTTON_DEBUG</TD>
      <TD>DEBUGボタンを押している</TD>
      <TD>0x2000</TD>
    </TR>
  </TBODY>
</TABLE>
<P><BR>
X, Y ボタンは、ARM7 が汎用ポートを調べそれを共有領域に書くことで ARM9 から読むことが出来ます。従って、ARM7
の読み込みモジュールが動作していない場合は X, Y ボタンは読み込めません。<BR>
<BR>
ボタン ( PAD_BUTTON_〜 ) のすべての和として、PAD_BUTTON_MASK が、キー (
PAD_KEY_〜 ) のすべての和として、PAD_PLUS_KEY_MASK が定義されています。さらにボタン、キーすべての和として、
PAD_ALL_MASK が定義されています。<BR>
<BR>
ARM7 が読み込む X, Y ボタンと DEBUG ボタンの和は PAD_RCNTPORT_MASK として定義されています。それ以外のボタン・キーの和は PAD_KEYPORT_MASK として定義されています。<BR>
</P>
<TABLE border="1">
  <TBODY>
    <TR>
      <TH colspan="2">ビット</TH>
      <TH>13</TH>
      <TH>12</TH>
      <TH>11</TH>
      <TH>10</TH>
      <TH>9</TH>
      <TH>8</TH>
      <TH>7</TH>
      <TH>6</TH>
      <TH>5</TH>
      <TH>4</TH>
      <TH>3</TH>
      <TH>2</TH>
      <TH>1</TH>
      <TH>0</TH>
      <TH></TH>
    </TR>
    <TR>
      <TD colspan="2"></TD>
      <TD>D<BR>
      E<BR>
      B<BR>
      U<BR>
      G</TD>
      <TD>N<BR>
      /<BR>
      A<BR>
      </TD>
      <TD>Y<BR>
      </TD>
      <TD>X<BR>
      </TD>
      <TD>L<BR>
      </TD>
      <TD>R<BR>
      </TD>
      <TD>D<BR>
      O<BR>
      W<BR>
      N<BR>
      </TD>
      <TD>U<BR>
      P<BR>
      </TD>
      <TD>L<BR>
      E<BR>
      F<BR>
      T</TD>
      <TD>R<BR>
      I<BR>
      G<BR>
      H<BR>
      T</TD>
      <TD>S<BR>
      T<BR>
      A<BR>
      R<BR>
      T</TD>
      <TD>S<BR>
      E<BR>
      L<BR>
      E<BR>
      C<BR>
      T</TD>
      <TD>B<BR>
      </TD>
      <TD>A<BR>
      </TD>
      <TD style="background-color : #ddddaa;">VALUE</TD>
    </TR>
    <TR>
      <TD colspan="2">PAD_BUTTON_MASK</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD>0</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ddddaa;" align="center">0x2F0F</TD>
    </TR>
    <TR>
      <TD colspan="2">PAD_PLUS_KEY_MASK</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD style="background-color : #ddddaa;" align="center">0x00F0</TD>
    </TR>
    <TR>
      <TD colspan="2">PAD_ALL_MASK</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD>0</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ddddaa;" align="center">0x2FFF</TD>
    </TR>
    <TR>
      <TD colspan="2">PAD_RCNPORT_MASK</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD>0</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD style="background-color : #ddddaa;" align="center">0x2C00</TD>
    </TR>
    <TR>
      <TD colspan="2">PAD_KEYPORT_MASK</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD>0</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ffc0c0;">1</TD>
      <TD style="background-color : #ddddaa;" align="center">0x03FF</TD>
    </TR>
  </TBODY>
</TABLE>
<BR>
<H3><BR>
<BR>
例</H3>
<BLOCKQUOTE style="background-color:#ffffcc;"><CODE>u16 padData = <FONT color="#ff0000">PAD_Read()</FONT>;<BR>
<BR>
if ( padData &amp; PAD_BUTTON_A )<BR>
{<BR>
　　OS_Printf( &quot;you're pushing A-BUTTON\n&quot; );<BR>
}<BR>
<BR>
if ( padData &amp; PAD_PLUS_KEY_MASK )<BR>
{<BR>
　　OS_Printf( &quot;you're pushing any PLUS-KEY\n&quot; );<BR>
}</CODE></BLOCKQUOTE>
<P>本関数 <CODE>PAD_Read()</CODE> は、内部的には、IO レジスタの KEYINPUT を読み込み、ARM7が取り込んだ汎用ポートRCNT レジスタからの値を合わせ、キー・ボタンのマスク PAD_ALL_MASK をかけたものを返しています。</P>
<H3><BR>
<BR>
DEBUGボタンについて</H3>
<P>DEBUG ボタンは、開発用途でアプリケーションが自由に使用できるボタンとして用意されています。IS-NITRO-DEBUGGER
では、デバッガに接続されている DS の電源ボタンがDEBUGボタンになっています。(電源ボタンとしては利きません)</P>
<P>IS-TWL-DEBUGGER でもデバッガに接続されている TWL の本体の電源ボタンが DEBUG
ボタンになっていますが、こちらの電源ボタンは実際に電源ボタンとして機能するようになっていますので、IS-NITRO-DEBUGGER
とは用途が少々異なります。</P>
<h2>参照</h2>
<P><CODE><A href="PAD_DetectFold.html">PAD_DetectFold</A></CODE></P>
<H2>履歴</H2>
<P>2008/04/16 禁則入力フィルタについての記述を追加<BR>
2004/08/06 参照から PAD_SetIrq, PAD_ClearIrq を削除<BR>
2004/04/13 DEBUGボタン追加<BR>
2004/02/19 X,Y ボタン追加<BR>
2003/12/01 初版</P>
</body>
</html>
