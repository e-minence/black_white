#------------------------------------------------------------------------------
#  通信アイコンnarcを作るmakefile  
#  コピーしてtargetnameを書き換えれば汎用的に使えます
#  2008.08.19
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
#※コンバートを行う人のユーザーIDをここに書く
#------------------------------------------------------------------------------
include ../../event_script_users_def


#------------------------------------------------------------------------------
#※ここに作成するnarc名を書く
#------------------------------------------------------------------------------
targetname = dummy

#------------------------------------------------------------------------------
#※コピー先へのパスを書く（通常はPROJECT_ARCDIRでよい）
#------------------------------------------------------------------------------
TARGETDIR = .

#------------------------------------------------------------------------------
#※サブディレクトリでもMakeしたい場合、ここにディレクトリ名を書く
#------------------------------------------------------------------------------
SUBDIRS	=

#共通ルールファイルのインクルード
include	$(PROJECT_RSCDIR)\macro_define


XLSFILE = $(wildcard *.xls)
TABFILE = $(XLSFILE:.xls=.txt)


#------------------------------------------------------------------------------
#	#サフィックス
#	#コンバート対象者のみ、コンバートのルールを有効にする
#------------------------------------------------------------------------------
ifeq	($(CONVERTUSER),true)	


.SUFFIXES: .xls .txt

#コンバート環境
.xls.txt:
	ruby $(PROJECT_ROOT)tools/exceltool/xls2xml/tab_out_direct.rb $< > $@
	perl conv.pl $@ 1 ../data

endif


.PHONY:	do-build clean subdir

#------------------------------------------------------------------------------
#	make do-build ルール
#------------------------------------------------------------------------------
do-build:	subdir $(targetname).txt

subdir:
	@$(MAKE_SUBDIR)


ifeq	($(CONVERTUSER),true)	
# コピー先のnarcが古い場合実行する
$(targetname).txt: $(TABFILE)
	echo dummy > $(targetname).txt
else

$(targetname).txt:
	echo dummy > $(targetname).txt
	
endif

#------------------------------------------------------------------------------
#	make clean ルール
#※生成ファイルを削除するように記述を変更してください
#------------------------------------------------------------------------------
clean:
	@$(MAKE_SUBDIR)
	rm -f *.txt



