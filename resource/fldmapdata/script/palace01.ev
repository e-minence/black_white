
//======================================================================
//                palace01.ev
//
//    スクリプトファイル：palace01用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_palace01.h"
  //.include  "../eventdata/zone_palace01evc.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    ev_palace01
_EVENT_DATA    ev_init_palace01
_EVENT_DATA    ev_recover_palace01
_EVENT_DATA    ev_scene_change_palace01
_EVENT_DATA    ev_palace01_monolith
_EVENT_DATA_END


/**************************************************************/
/*            FLAG_CHANGE_LABEL                               */
/**************************************************************/
//ev_palace01_flag_change:
//  _END

/**************************************************************/
/*            FIELD_INIT_LABEL                              　 */
/**************************************************************/
INIT_EVENT_START	ev_init_palace01
  //連結マップセッティング
  _INTRUDE_CONNECT_MAP_SETTING()
  
  //パレスIN時の強制変装イベント
  _GET_DISGUISE_CODE( LOCALWORK0 )
INIT_EVENT_END

/**************************************************************/
/*            _FIELD_RECOVER_LABEL                            */
/**************************************************************/
INIT_EVENT_START	ev_recover_palace01
  //連結マップセッティング
//  _INTRUDE_CONNECT_MAP_SETTING()
INIT_EVENT_END

/**************************************************************/
/*            _SCENE_CHANGE_LABEL                            */
/**************************************************************/
EVENT_START	ev_scene_change_palace01
  //パレスIN時の強制変装イベント
  _EASY_MSG( msg_palace01_in_000 )
  _PALACE_IN_DISGUISE()
  $LOCALWORK0 = 1
EVENT_END

/**************************************************************/
/*                                                            */
/**************************************************************/
ev_palace01:
  //とりあえず最初のラベルだけ生成している
  _END

/**************************************************************/
/*  モノリス                                              */
/**************************************************************/
EVENT_START ev_palace01_monolith
  //ミッション選択候補リストを要求(fieldmapオーバーレイに配置の為、フェードアウト中は回避)
  _INTRUDE_MISSION_CHOICE_LIST_REQ()
  
  _MAP_FADE_BLACK_OUT()
  _MAP_FADE_END_CHECK()
  _FIELD_CLOSE()

  _CALL_MONOLITH_PROC()

  _FIELD_OPEN()
  _MAP_FADE_BLACK_IN()
  _MAP_FADE_END_CHECK()
  
  //モノリス画面を抜けた時にミッションエントリーしていたならば、待機イベント呼び出し
  _GET_MISSION_ENTRY( SCWK_ANSWER )
	IF $SCWK_ANSWER == TRUE THEN
	  _MISSION_START_WAIT_EVENT()
  ENDIF
EVENT_END
