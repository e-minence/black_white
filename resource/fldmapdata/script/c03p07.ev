
//======================================================================
//                c03p07.ev
//
//    スクリプトファイル：c03p07用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_c03p07.h"
  //.include  "c03p07.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA		ev_c03p07_veteranm_01
_EVENT_DATA		ev_c03p07_trainerw_01
_EVENT_DATA		ev_scene_c03p07_tvt_01
_EVENT_DATA		ev_pos_c03p07_rival_01
_EVENT_DATA		ev_bg_c03p07_gymsign_01

_EVENT_DATA		ev_init_c03p07
_EVENT_DATA		ev_recover_c03p07
_EVENT_DATA_END


/************************************************************/
/*				フィールドイニットスクリプト				*/
/************************************************************/
INIT_EVENT_START	ev_init_c03p07
	//群集の起動
	_CROWD_PEOPLE_START()
	
INIT_EVENT_END
INIT_EVENT_START	ev_recover_c03p07
	//群集の起動
  _CROWD_PEOPLE_START()

INIT_EVENT_END

/**************************************************************/
/*		VETERANM	C03P07									  */
/**************************************************************/
EVENT_START		ev_c03p07_veteranm_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_c03p07_veteranm_01 )
EVENT_END

/**************************************************************/
/*		TRAINERW	C03P07									  */
/**************************************************************/
EVENT_START		ev_c03p07_trainerw_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_c03p07_trainerw_01 )
EVENT_END

/**************************************************************/
/*		トランシーバー	C03P07								  */
/**************************************************************/
EVENT_START		ev_scene_c03p07_tvt_01

	//自機が見える位置まで移動
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_walk )
	_OBJ_ANIME_WAIT()

	//TVT着信音を再生
	_SE_PLAY( SEQ_SE_SYS_35 )
	_SE_WAIT()
	_SE_PLAY( SEQ_SE_SYS_35 )
	_SE_WAIT()

	_PLAYER_NAME(0)
	_PLAINWIN_MSG_DOWN( msg_c03p07_tvt_01 )
	_PLAINWIN_CLOSE()
	
	//TVトランシーバー起動
  _MAP_FADE_BLACK_OUT()
  _MAP_FADE_END_CHECK()
	_CALL_TVT_DEMO( 3 )
  _MAP_FADE_BLACK_IN()
  _MAP_FADE_END_CHECK()
	
	//トランシーバーイベント終了
	$WK_SCENE_C03P07 = 3
	
EVENT_END

//--------------------------------------------------------------------
//	プレイヤー：歩く
//--------------------------------------------------------------------
_ANIME_LABEL	anm_player_walk
	_ANIME_DATA	AC_WALK_L_8F,4
	_ANIME_DATA	ACMD_END,0

/**************************************************************/
/*		C03P07	ライバル	POSイベント						  */
/**************************************************************/
EVENT_START		ev_pos_c03p07_rival_01
//WK_SCENE_C03P07が０のときに起動
	//階段SE
	_SE_PLAY( SEQ_SE_KAIDAN )
	_SE_WAIT()

	//ライバル出現
	_OBJ_ADD_EX( 25,48,DIR_LEFT,MMDL_ID_EVENTOBJ_00,RIVEL,MV_DMY )

	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_gyoe )
	_OBJ_ANIME_WAIT()

	//自機を押してライバルが１歩進む
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_move )
	_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_rival_move )
	_OBJ_ANIME_WAIT()

	_CAMERA_START()		//カメラ操作開始
    _CAMERA_PURGE()		//対象物とカメラのバインドを解く
	
	_CAMERA_MOVE( 6917,0,933888,1343488,0,3178496,60 )

	//やあ　アーティさんに　いどんだけれど
	_PLAYER_NAME(0)
	_BALLOONWIN_OBJMSG( msg_c03p07_black_01 , MMDL_ID_EVENTOBJ_00 )
	_MSGWIN_CLOSE()
	
	//ライバル：ジムのほうを見る
	_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_stay_r )
	_OBJ_ANIME_WAIT()
	
	//さすが　ジムリーダーだね
	_BALLOONWIN_OBJMSG( msg_c03p07_black_02 , MMDL_ID_EVENTOBJ_00 )
	_MSGWIN_CLOSE()
	
	//ライバル：自機のほうをみる
	_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_stay_l )
	_OBJ_ANIME_WAIT()

	//ぼくはいちど　ポケモンセンターに　もどる
	_BALLOONWIN_OBJMSG( msg_c03p07_black_03 , MMDL_ID_EVENTOBJ_00 )
	_MSGWIN_CLOSE()

	//ライバル：下へ移動　自機：ライバルを見送る
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_leave )
	_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_rival_leave )
	_OBJ_ANIME_WAIT()

	//ライバルのOBJ削除
	_OBJ_DEL( MMDL_ID_EVENTOBJ_00 )
	
	//カメラ戻す
	_CAMERA_RECV_MOVE( 30 )//カメラ復帰移動
	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_CAMERA_BIND()		//カメラバインド
	_CAMERA_END()		//カメラ操作終了

	//========================================/
	
	//ライバルジムイベント終了
	$WK_SCENE_C03P07 = 1
	
	//========================================/

EVENT_END

//--------------------------------------------------------------------
//	ライバル・自機：アニメ
//--------------------------------------------------------------------

_ANIME_LABEL anm_player_gyoe
	_ANIME_DATA		AC_MARK_GYOE,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_rival_move
	_ANIME_DATA		AC_WALK_L_8F,3
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_player_move
	_ANIME_DATA		AC_WALK_L_8F,3
	_ANIME_DATA		AC_STAY_WALK_R_8F,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_rival_leave
	_ANIME_DATA		AC_WALK_D_8F,12
	_ANIME_DATA		AC_VANISH_ON,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_player_leave
	_ANIME_DATA		AC_DIR_D,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_stay_u
	_ANIME_DATA		AC_STAY_WALK_U_8F,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_stay_d
	_ANIME_DATA		AC_STAY_WALK_D_8F,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_stay_r
	_ANIME_DATA		AC_STAY_WALK_R_8F,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_stay_l
	_ANIME_DATA		AC_STAY_WALK_L_8F,1
	_ANIME_DATA		ACMD_END,0

/**************************************************************/
/*	C03P07	ジム看板										  */
/**************************************************************/
EVENT_START		ev_bg_c03p07_gymsign_01
	_EASY_BGWIN_MSG( msg_c03p07_gymsign_01, TYPE_POST )
EVENT_END
