
//======================================================================
//                n01r0502.ev
//
//    スクリプトファイル：n01r0502用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "msg_n01r0502.h"
  .include  "n01r0502.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA		ev_zone_n01r0502
_EVENT_DATA		ev_pos_n01r0502_lastbtl_01
_EVENT_DATA		ev_pos_n01r0502_lastbtl_02
_EVENT_DATA		ev_pos_n01r0502_lastbtl_03
_EVENT_DATA		ev_scene_n01r0502_lastbtl_04
_EVENT_DATA		ev_n01r0502_boss_01
_EVENT_DATA		ev_n01r0502_wkobjcode00_01
_EVENT_DATA		ev_n01r0502_wkobjcode01_01
_EVENT_DATA		ev_init_n01r0502
_EVENT_DATA		ev_recover_n01r0502
_EVENT_DATA		ev_n01r0502_sage1_01
_EVENT_DATA		ev_n01r0502_champion_01
_EVENT_DATA		ev_n01r0502_rival_01
_EVENT_DATA_END

/**************************************************************/
/*               フィールド初期化スクリプト                   */
/**************************************************************/
INIT_EVENT_START 	ev_zone_n01r0502
	//可変OBJの確定
	_GET_ROM_VERSION( SCWK_ANSWER )
	IF $SCWK_ANSWER == VERSION_WHITE THEN
		IF $WK_SCENE_N01R0502 >= 4 THEN 
			$OBJCHRWORK0 = SHIN_A	//シン
		ELSE
			$OBJCHRWORK0 = SHIN_B	//シン
		ENDIF
		
		$OBJCHRWORK1 = MU_B		//ム
	
	ELSE
		IF $WK_SCENE_N01R0502 >= 4 THEN 
			$OBJCHRWORK0 = MU_A		//ム
		ELSE
			$OBJCHRWORK0 = MU_B		//ム
		ENDIF
		
		$OBJCHRWORK1 = SHIN_B	//シン
	
	ENDIF
/*


*/
INIT_EVENT_END

/**************************************************************/
/*			フィールドイニットスクリプト					  */
/**************************************************************/
INIT_EVENT_START	ev_init_n01r0502

	//シーン毎のOBJPOSチェンジ
	//Ｎの戦闘前
	SWITCH $WK_SCENE_N01R0502
	CASE 1 THEN		//一番初めのＰＯＳ起動後の場合
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 16, 2, 18, DIR_DOWN )
	CASE 3 THEN		//Ｎ戦前
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE00_01, 16, 0, 35, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 16, 0, 37, DIR_DOWN )
	CASE 4 THEN		//シン（ム）・ゲーチス連戦前
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE00_01, 16, 0, 35, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE01_01, 16, 0, 38, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 17, 0, 39, DIR_LEFT )
	CASE 5 THEN		//ゲーチス戦で負けた場合
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE00_01, 16, 0, 35, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_CHAMPION_01, 15, 0, 40, DIR_UP )
		_OBJ_POS_CHANGE( N01R0502_RIVAL_01, 17, 0, 40, DIR_UP )
		_OBJ_POS_CHANGE( N01R0502_SAGE1_01, 16, 0, 38, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 16, 0, 36, DIR_DOWN )
	ENDSWITCH

INIT_EVENT_END

/**************************************************************/
/*			フィールドリカバースクリプト					  */
/**************************************************************/
INIT_EVENT_START	ev_recover_n01r0502

	//シーン毎のOBJPOSチェンジ
	//Ｎの戦闘前
	SWITCH $WK_SCENE_N01R0502
	CASE 1 THEN		//一番初めのＰＯＳ起動後の場合
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 16, 2, 18, DIR_DOWN )
	CASE 3 THEN		//Ｎ戦前
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE00_01, 16, 0, 35, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 16, 0, 37, DIR_DOWN )
	CASE 4 THEN		//シン（ム）・ゲーチス連戦前
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE00_01, 16, 0, 35, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE01_01, 16, 0, 38, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 17, 0, 39, DIR_LEFT )
	CASE 5 THEN		//ゲーチス戦で負けた場合
		_OBJ_POS_CHANGE( N01R0502_WKOBJCODE00_01, 16, 0, 35, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_CHAMPION_01, 15, 0, 40, DIR_UP )
		_OBJ_POS_CHANGE( N01R0502_RIVAL_01, 17, 0, 40, DIR_UP )
		_OBJ_POS_CHANGE( N01R0502_SAGE1_01, 16, 0, 38, DIR_DOWN )
		_OBJ_POS_CHANGE( N01R0502_BOSS_01, 16, 0, 36, DIR_DOWN )
	ENDSWITCH

INIT_EVENT_END

/************************************************************/
/*	最終イベント１	WK_SCENE_N01R0502=0起動					*/
/************************************************************/
EVENT_START	ev_pos_n01r0502_lastbtl_01

	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラのバインドを解く
	
	//カメラ操作　Ｎの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,196655,819200,70 )	//一番最後の引数は移動にかかるフレーム数
	//ダミーの主人公OBJ表示
{
	DEFINE_LOCAL LWK_POSX
	DEFINE_LOCAL LWK_POSZ
	DEFINE_LOCAL LWK_SEX
	
	_PLAYER_POS_GET( LWK_POSX,LWK_POSZ )
	_GET_MY_SEX( LWK_SEX )

	SWITCH $LWK_POSX
	CASE 14 THEN
		IF $LWK_SEX == PM_MALE THEN
			_OBJ_ADD_EX( 14,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HERO,MV_DMY )
		ELSE
			_OBJ_ADD_EX( 14,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HEROINE,MV_DMY )
		ENDIF
	CASE 15 THEN
		IF $LWK_SEX == PM_MALE THEN
			_OBJ_ADD_EX( 15,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HERO,MV_DMY )
		ELSE
			_OBJ_ADD_EX( 15,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HEROINE,MV_DMY )
		ENDIF
	CASE 16 THEN
		IF $LWK_SEX == PM_MALE THEN
			_OBJ_ADD_EX( 16,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HERO,MV_DMY )
		ELSE
			_OBJ_ADD_EX( 16,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HEROINE,MV_DMY )
		ENDIF
	CASE 17 THEN
		IF $LWK_SEX == PM_MALE THEN
			_OBJ_ADD_EX( 17,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HERO,MV_DMY )
		ELSE
			_OBJ_ADD_EX( 17,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HEROINE,MV_DMY )
		ENDIF
	CASE 18 THEN
		IF $LWK_SEX == PM_MALE THEN
			_OBJ_ADD_EX( 18,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HERO,MV_DMY )
		ELSE
			_OBJ_ADD_EX( 18,47,DIR_UP,MMDL_ID_EVENTOBJ_00,HEROINE,MV_DMY )
		ENDIF
	ENDSWITCH

	//透明の主人公が移動
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_camera_move1 )
	_OBJ_ANIME_WAIT()

	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_TIME_WAIT( 20 )
	//メッセージ
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_01w, msg_n01r0502_boss_01b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()	

	_CAMERA_MOVE( 9688,0,970752,1081344,131103,1212416,50 )	//一番最後の引数は移動にかかるフレーム数

	//Ｎ：数歩前に移動
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_last1_move )
	_OBJ_ANIME_WAIT()
	
	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	
	//ボクが　のぞむのは　ポケモンだけの　せかい
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_01_01w, msg_n01r0502_boss_01_01b, N01R0502_BOSS_01, POS_DEFAULT )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()

	//自機にカメラを戻す
	_CAMERA_RECV_MOVE( 70 )	//_CAMERA_START()を使った時の座標に戻します。引数は移動にかかるフレーム数です
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_camera_move2 )
	_OBJ_ANIME_WAIT()

	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_CAMERA_BIND()		//カメラバインド　主人公位置をカメラが追従するようになります
	_CAMERA_END()		//カメラ操作終了
	
	_OBJ_DEL( MMDL_ID_EVENTOBJ_00 )
}

	//========================================/
	
	//WKを１にする
	$WK_SCENE_N01R0502 = 1
	
	//========================================/

EVENT_END


//--------------------------------------------------------------------
//		カメラ移動
//--------------------------------------------------------------------
_ANIME_LABEL	anm_camera_move1
	_ANIME_DATA	AC_VANISH_ON,1
	_ANIME_DATA	AC_WALK_U_2F,35
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_camera_move2
	_ANIME_DATA	AC_WALK_D_2F,35
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	AC_VANISH_OFF,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_n_last1_move
	_ANIME_DATA	AC_WALK_D_8F,6
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

/************************************************************/
/*	最終イベント２	WK_SCENE_N01R0502=1起動					*/
/************************************************************/
EVENT_START		ev_pos_n01r0502_lastbtl_02


	DEFINE_LOCAL LWK_POSX1
	DEFINE_LOCAL LWK_POSZ1
	
	_PLAYER_POS_GET( LWK_POSX1,LWK_POSZ1 )

	//X軸が15の場合
	IF $LWK_POSX1 == 14 THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_last14 )
	//X軸が16の場合	
	ELSIF $LWK_POSX1 == 15 THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_last15 )
	//X軸が16の場合	
	ELSIF $LWK_POSX1== 16 THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_last16 )
	//X軸が16の場合	
	ELSIF $LWK_POSX1 == 17 THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_last17 )
	//X軸が18の場合
	ELSE
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_last18 )
	ENDIF

	//Ｎ：自機の前に移動
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_last2 )
	_OBJ_ANIME_WAIT()
	
	//ほら　キミが　てにいれた
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_02w, msg_n01r0502_boss_02b, N01R0502_BOSS_01, POS_DEFAULT )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()

	//========================================/
	
	//WKを２にする
	$WK_SCENE_N01R0502 = 2
	
	//ライトストーンの使用を許可する
	$WK_SYS_N01R0502_ITEMUSE = 1
	
	//========================================/

EVENT_END
//--------------------------------------------------------------------
//	lastbtl２用アニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_n_last2
	_ANIME_DATA	AC_WALK_D_2F,14
	_ANIME_DATA	AC_WALK_D_8F,5
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_last14
	_ANIME_DATA	AC_WALK_R_8F,2
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_last15
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0
_ANIME_LABEL	anm_player_last16
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0
_ANIME_LABEL	anm_player_last17
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_last18
	_ANIME_DATA	AC_WALK_L_8F,2
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0

/************************************************************/
/*	最終イベント３	WK_SCENE_N01R0502=2起動					*/
/************************************************************/
EVENT_START	ev_pos_n01r0502_lastbtl_03

	DEFINE_LOCAL	LWK_DIR

	//Ｎ：その場足踏み
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_last3 )
	_OBJ_ANIME_WAIT()

	//ほら　キミが　てにいれた
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_02w, msg_n01r0502_boss_02b, N01R0502_BOSS_01, POS_DEFAULT )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()
{	
	//自機：一歩前に戻る
	_PLAYER_DIR_GET( LWK_DIR )
	SWITCH $LWK_DIR
	CASE DIR_UP THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_last3_u )
	CASE DIR_DOWN THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_last3_d )
	CASE DIR_RIGHT THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_last3_r )
	CASE DIR_LEFT THEN
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_last3_l )
	ENDSWITCH
}
	
	_OBJ_ANIME_WAIT()

EVENT_END

//--------------------------------------------------------------------
//	lastbtl３用アニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_n_last3
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_last3_u
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_last3_d
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_last3_r
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_last3_l
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

/************************************************************/
/*	最終イベント４											*/
/************************************************************/
//WK_SYS_N01R0502_ITEMUSEが=2の時に起動
EVENT_START		ev_scene_n01r0502_lastbtl_04

	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラのバインドを解く
	
	//カメラ操作　Ｎの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,0,2457600,30 )	//一番最後の引数は移動にかかるフレーム数

	//Ｎ：横向き
	_OBJ_ANIME( N01R0502_BOSS_01, anm_slow_r )
	_OBJ_ANIME_WAIT()

	_TIME_WAIT(30)

	//ボクは　すこしだけ　キミのことを　きにいっていたのかも
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_03w, msg_n01r0502_boss_03b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()
	
	//Ｎ:自機のほうを見る
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_turn )
	_OBJ_ANIME_WAIT()

	//首振りアニメ
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_kubi )
	_OBJ_ANIME_WAIT()

	//だけど　ちがった　いま　すごく　ガッカリしているよ
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_04w, msg_n01r0502_boss_04b, N01R0502_BOSS_01, POS_DEFAULT )
	
	//キミに　できることは　２つ！
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_04_01w, msg_n01r0502_boss_04_01b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()

	//両手アニメ
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_hand )
	_OBJ_ANIME_WAIT()

	//おいで　シン！/ム！
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_05w, msg_n01r0502_boss_05b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()

	//シンとムの鳴き声
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_VOICE_PLAY( MONSNO_650, 0 )
		ELSE
			_VOICE_PLAY( MONSNO_651, 0 )
		ENDIF
			_VOICE_WAIT()
}

	//デモ再生：シン（ム）が謁見の間に突っ込んでくるデモ
  _DEMO_FADEOUT_BLACK_WITH_BGM_CALL()

	//謁見の間、水が干上がった状態のマップに変更
	_CHANGE_MAPREPLACE_FLAG( MAPREPLACE_ID_04, TRUE, TRUE )

{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_CALL_3D_DEMO( DEMO3D_ID_N_LEGEND_COME_W )
		ELSE
			_CALL_3D_DEMO( DEMO3D_ID_N_LEGEND_COME_B )
		ENDIF

}
	//フラグリセット
	_FLAG_RESET( FV_N01R0502_LEGEND_01 )

	_OBJ_ADD( N01R0502_WKOBJCODE00_01 )
	
	_DEMO_FADEIN_BLACK_WITH_BGM_CALL()
	
	//========================================/
	
	//最終イベント４終了・ライトストーンイベント終了
	$WK_SCENE_N01R0502 = 3
	$WK_SYS_N01R0502_ITEMUSE = 3
		
	//========================================/
	
EVENT_END

//--------------------------------------------------------------------
//	LASTBTL4用アニメ
//--------------------------------------------------------------------

_ANIME_LABEL	anm_stay_u
	_ANIME_DATA	AC_STAY_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_d
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_stay_l
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_r
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_slow_r
	_ANIME_DATA	AC_WALK_R_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_n_turn
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------------
//		芝居・共通アニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_n_kubi
	_ANIME_DATA	AC_N_ACT1,1
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_n_hand
	_ANIME_DATA	AC_N_ACT0,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_sage1_hand
	_ANIME_DATA	AC_SAGE1_ACT0,1
	_ANIME_DATA	ACMD_END,0

/************************************************************/
/*	最終イベント５	Ｎ話しかけ起動							*/
/************************************************************/
EVENT_START		ev_n01r0502_boss_01
_TALK_OBJ_START()
IF $WK_SCENE_N01R0502 == 3 THEN
	//Nと戦闘
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			
			//戦闘呼び出し　全滅処理が未定
			_TRAINER_BTL_SET( TRID_BOSS_1_06, 0 )
			//敗戦チェック
			_TRAINER_LOSE_CHECK( SCWK_ANSWER )
		
			IF $SCWK_ANSWER == SCR_BATTLE_RESULT_WIN THEN
				_OBJ_POS_CHANGE( MMDL_ID_PLAYER, 16, 0, 39, DIR_UP )
		
				//可変OBJの確定
				$OBJCHRWORK0 = SHIN_A	//シン
				_TRAINER_WIN()			//勝ち(1)ならトレーナー勝利処理へ
		
			ELSE
		
				_TRAINER_LOSE()			//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
		
			ENDIF
		
		ELSE
			//戦闘呼び出し　全滅処理が未定
			_TRAINER_BTL_SET( TRID_BOSS_1_07, 0 )
			//敗戦チェック
			_TRAINER_LOSE_CHECK( SCWK_ANSWER )
		
			IF $SCWK_ANSWER == SCR_BATTLE_RESULT_WIN THEN
				_OBJ_POS_CHANGE( MMDL_ID_PLAYER, 16, 0, 39, DIR_UP )
		
				//可変OBJの確定
				$OBJCHRWORK0 = MU_A		//ム
				_TRAINER_WIN()			//勝ち(1)ならトレーナー勝利処理へ
		
			ELSE
		
				_TRAINER_LOSE()			//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
		
			ENDIF
			
		ENDIF
			_VOICE_WAIT()
}

	//Ｎ後ずさり
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_back )
	_OBJ_ANIME_WAIT()

	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラのバインドを解く
	
	//カメラ操作　Ｎの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,0,2457600,60 )	//一番最後の引数は移動にかかるフレーム数	

	//どういうこと　だ？
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_06w, msg_n01r0502_boss_06b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()

	//バッグの　なか……
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_SYSWIN_MSG( msg_n01r0502_stone_02w , POS_DOWN )
		ELSE
			_SYSWIN_MSG( msg_n01r0502_stone_02b , POS_DOWN )
		ENDIF
			_SYSWIN_CLOSE()
}
	
	//キミの　もつ
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_07w, msg_n01r0502_boss_07b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()

	//ダーク（ライト）ストーンの演出

	//〜〜〜ストーンが　はげしく　かがやきだす……！
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_SYSWIN_MSG( msg_n01r0502_stone_03w , POS_DOWN )
			_SUB_ITEM( ITEM_DAAKUSUTOON,1,SCWK_ANSWER )
		ELSE
			_SYSWIN_MSG( msg_n01r0502_stone_03b , POS_DOWN )
			_SUB_ITEM( ITEM_RAITOSUTOON,1,SCWK_ANSWER )
		ENDIF
			_SYSWIN_CLOSE()
}
	//デモ再生：ム（シン）石から復活デモ
	
  _DEMO_FADEOUT_BLACK_WITH_BGM_CALL()

{

	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_CALL_3D_DEMO( DEMO3D_ID_N_LEGEND_BORN_W )
		ELSE
			_CALL_3D_DEMO( DEMO3D_ID_N_LEGEND_BORN_B )
		ENDIF
}
	//========================================/
	
	//フラグセット
	_FLAG_RESET( FV_N01R0502_LEGEND_02 )
	
	//========================================/
	
	_OBJ_ADD( N01R0502_WKOBJCODE01_01 )
	_OBJ_POS_CHANGE( N01R0502_BOSS_01, 17, 0, 36, DIR_DOWN )
	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラのバインドを解く

	//カメラ操作　Ｎの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,0,2457600,1 )	//一番最後の引数は移動にかかるフレーム数	

	_DEMO_FADEIN_BLACK_WITH_BGM_CALL()

	//シンと　ムは……　もとは　ひとつの　いのち
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_08w, msg_n01r0502_boss_08b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()
	
	//シン（ム）が自機の方を見る
	_OBJ_ANIME( N01R0502_WKOBJCODE01_01, anm_legend_turn )
	_OBJ_ANIME_WAIT()
	
	//シンと　ムは……　もとは　ひとつの　いのち
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_09w, msg_n01r0502_boss_09b, N01R0502_BOSS_01, POS_DEFAULT )
	_MSGWIN_CLOSE()

	//自機にカメラを戻す
	_CAMERA_RECV_MOVE( 70 )	//_CAMERA_START()を使った時の座標に戻します。引数は移動にかかるフレーム数です

	//Ｎ：自機の横に移動
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_move )
	_OBJ_ANIME_WAIT()

	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_CAMERA_BIND()		//カメラバインド　主人公位置をカメラが追従するようになります
	_CAMERA_END()		//カメラ操作終了
	
	//こころして　かかりたまえ
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_10w, msg_n01r0502_boss_10b, N01R0502_BOSS_01, POS_DEFAULT )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()
	
	//回復
	_TEMOTI_POKEMON_KAIFUKU()

	//========================================/
	
	//最終イベント５終了
	$WK_SCENE_N01R0502 = 4
	
	//========================================/

ELSIF $WK_SCENE_N01R0502 == 4 THEN
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_10w, msg_n01r0502_boss_10b, N01R0502_BOSS_01, POS_DEFAULT )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()

ELSE	

	_BALLOONWIN_TALKOBJ_MSG( msg_n01r0502_rematch_boss )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()

ENDIF

EVENT_END

//--------------------------------------------------------------------
//	Ｎはなしかけ用アニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_package_dir
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_n_move
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_WALK_D_8F,3
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_n_back
	_ANIME_DATA	AC_WAIT_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_U_16F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

/************************************************************/
/*	最終イベント６	奥	WHITE⇒シン	BLACK⇒ム				*/
/************************************************************/
EVENT_START		ev_n01r0502_wkobjcode00_01
_TALK_OBJ_START()

	_OBJ_ANIME( N01R0502_WKOBJCODE00_01, anm_legend_gutari )
	_OBJ_ANIME_WAIT()

IF $WK_SCENE_N01R0502 == 5 THEN

{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_BALLOONWIN_TALKOBJ_MSG( msg_n01r0502_rematch_pokemon_01w )
			_MSGWIN_CLOSE()
			_VOICE_PLAY( MONSNO_650, 0 )
			_VOICE_WAIT()
		ELSE
			_BALLOONWIN_TALKOBJ_MSG( msg_n01r0502_rematch_pokemon_01b )
			_MSGWIN_CLOSE()
			_VOICE_PLAY( MONSNO_651, 0 )
			_VOICE_WAIT()
		ENDIF
}

ELSE

	//WHITE版の場合
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_VOICE_PLAY( MONSNO_650, 0 )
			_VOICE_WAIT()
		ELSE
			_VOICE_PLAY( MONSNO_651, 0 )
			_VOICE_WAIT()
		ENDIF
}

ENDIF

	_OBJ_ANIME( N01R0502_WKOBJCODE00_01, anm_stay_d )
	_OBJ_ANIME_WAIT()

EVENT_END

/************************************************************/
/*	最終イベント６	手前	WHITE⇒ム	BLACK⇒シン			*/
/************************************************************/
EVENT_START		ev_n01r0502_wkobjcode01_01
_TALK_OBJ_START()

	_OBJ_ANIME( N01R0502_WKOBJCODE01_01, anm_legend_hoeru )
	_OBJ_ANIME_WAIT()

	//WHITE版の場合
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_BLACK THEN
			_VOICE_PLAY( MONSNO_650, 0 )
			_GIZAWIN_OBJMSG_POS( msg_n01r0502_pokemon_01b , N01R0502_WKOBJCODE01_01, POS_DEFAULT )
			_MSGWIN_CLOSE()
			_VOICE_WAIT()

			_WILD_BTL_SET_LEGEND( MONSNO_650, 50 )
			_BATTLE_RESULT_GET( SCWK_ANSWER )
			//倒した場合
			IF $SCWK_ANSWER == 0 THEN
				
				//========================================/
				
				//シンのOBJ削除
				_OBJ_DEL( N01R0502_WKOBJCODE01_01 )
				
				//フラグセット
				_FLAG_SET( FV_N01R0502_LEGEND_02 )
				
				//自機の位置調整
				_OBJ_POS_CHANGE( MMDL_ID_PLAYER, 16, 0, 39, DIR_UP )
				
				//========================================/
				
				_WILD_WIN()			//勝ち(1)ならトレーナー勝利処理へ
			
			//負けた場合
			ELSE
			
				_WILD_LOSE()		//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
			
			ENDIF
			
		ELSE
			_VOICE_PLAY( MONSNO_651, 0 )
			_GIZAWIN_OBJMSG_POS( msg_n01r0502_pokemon_01w , N01R0502_WKOBJCODE01_01, POS_DEFAULT )
			_MSGWIN_CLOSE()
			_VOICE_WAIT()

			_WILD_BTL_SET_LEGEND( MONSNO_651, 50 )
			_BATTLE_RESULT_GET( SCWK_ANSWER )
			//倒した場合
			IF $SCWK_ANSWER == 0 THEN
				
				//========================================/
				
				//ムのOBJ削除
				_OBJ_DEL( N01R0502_WKOBJCODE01_01 )

				//フラグセット
				_FLAG_SET( FV_N01R0502_LEGEND_02 )

				//自機の位置調整
				_OBJ_POS_CHANGE( MMDL_ID_PLAYER, 16, 0, 39, DIR_UP )

				//========================================/
				
				_WILD_WIN()			//勝ち(1)ならトレーナー勝利処理へ
			
			//負けた場合
			ELSE
			
				_WILD_LOSE()		//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
			
			ENDIF
			
		ENDIF
}
{
	_WILD_RETRY_CHECK( SCWK_ANSWER )

	SWITCH $SCWK_ANSWER
	CASE SCR_WILD_BTL_RET_ESCAPE, SCR_WILD_BTL_RET_WIN THEN
		//勝利した場合、あるいは逃げた場合
		DEFINE_LOCAL	LWK_ROM
		_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_SYSWIN_MSG( msg_n01r0502_pokemon_02w , POS_DOWN )
			_SYSWIN_CLOSE()
		ELSE
			_SYSWIN_MSG( msg_n01r0502_pokemon_02b , POS_DOWN )
			_SYSWIN_CLOSE()
		ENDIF
        
	CASE SCR_WILD_BTL_RET_CAPTURE THEN
	//捕まえた場合

		_FLAG_SET( FE_PACKAGE_POKE_GET )

	ENDSWITCH
}
_CALL ev_last

EVENT_END

//--------------------------------------------------------------------
//		シンとム専用のアニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_legend_hoeru
	_ANIME_DATA	AC_SHIN_MU_HOERU,1
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_legend_turn
	_ANIME_DATA	AC_SHIN_MU_TURN,1
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_legend_gutari
	_ANIME_DATA	AC_SHIN_MU_GUTARI,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_legend_last
	_ANIME_DATA	AC_SHIN_MU_HOERU,1
	_ANIME_DATA	AC_SHIN_MU_FLY_L,1
	_ANIME_DATA	ACMD_END,0


/************************************************************/
/*	ラストシーン											*/
/************************************************************/
ev_last:

	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラのバインドを解く
	
	//カメラ操作　Ｎの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,0,2392064,30 )

	//Ｎ：シン（ム）の前に移動
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_lastbtl5 )
	_OBJ_ANIME_WAIT()
	
	//捕獲の場合
	IF FLAG_ON( FE_PACKAGE_POKE_GET ) THEN
	
		_BALLOONWIN_OBJMSG_WB( msg_n01r0502_boss_11w, msg_n01r0502_boss_11b, N01R0502_BOSS_01, POS_DEFAULT )
		_MSGWIN_CLOSE()
	
	ENDIF

	_TIME_WAIT(30)

	//Ｎのアップ絵表示
	_START_FACEUP( 0, 0 )

{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		IF $LWK_ROM == VERSION_WHITE THEN
			_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_12w )
			_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_12_01w )
			_PLAINWIN_CLOSE()
		ELSE
			_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_12b )
			_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_12_01b )
			_PLAINWIN_CLOSE()
		ENDIF
}

	//Ｎのアップ絵終了
	_END_FACEUP()
	
	//Ｎ：自機に背を向ける
	_OBJ_ANIME( N01R0502_BOSS_01, anm_stay_u )
	_OBJ_ANIME_WAIT()

	_BGM_STOP()	//無音にする

	_TIME_WAIT( 20 )

	//ゲーチス：登場
	_FLAG_RESET( FV_N01R0502_EVENT_01 )
	_OBJ_ADD( N01R0502_SAGE1_01 )
	_OBJ_ADD( N01R0502_CHAMPION_01 )
	_OBJ_ADD( N01R0502_RIVAL_01 )

	//ゲーチス：近づく
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_come )
	_OBJ_ANIME_WAIT()

	//イベント曲再生
	_START_EVENT_BGM( SEQ_BGM_E_G_CIS )

	//カメラ操作　ゲーチスの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,0,2654208,30 )

	//それでも　ワタクシと　おなじ　ハルモニア
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_01 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()

	//カメラ操作　ゲーチスの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1212416,0,2588672,30 )

	_OBJ_ANIME( N01R0502_BOSS_01, anm_dir_d )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_wait_come2 )
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_come2 )
	_OBJ_ANIME_WAIT()
	
	//そなたには　この　ぎょくざは
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_sage1_02w, msg_n01r0502_sage1_02b, N01R0502_SAGE1_01, POS_DEFAULT )
	_MSGWIN_CLOSE()
	
	//カメラ操作　Ｎの位置にカメラを合わせる
	_CAMERA_MOVE( 9688,0,970752,1081344,0,2457600,60 )

	//自機・Ｎ：ゲーチスのほうを向く　ゲーチス：Ｎに近づく
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_come2a )
	_OBJ_ANIME_WAIT()
	
	_CAMERA_WAIT_MOVE()	//カメラ移動待ち

	_OBJ_ANIME( MMDL_ID_PLAYER, anm_dir_u )
	_OBJ_ANIME( N01R0502_BOSS_01, anm_dir_r )
	_OBJ_ANIME_WAIT()
	
	//だが　それでは　この　Ｎが
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_03 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()
	
	//ゲーチス：主人公の方を向いて
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_come3 )
	_OBJ_ANIME( N01R0502_BOSS_01, anm_dir_d )
	_OBJ_ANIME_WAIT()
	
	//そこで　えらばれたのが　！　キミですよ
	_PLAYER_NAME( 0 )
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_04 , N01R0502_SAGE1_01 )

	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_05 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()
	
	//ライバル：近づく
	_OBJ_ANIME( N01R0502_RIVAL_01, anm_rival_come )
	_OBJ_ANIME( N01R0502_CHAMPION_01, anm_chanpion_come )
	_OBJ_ANIME_WAIT()
	
	//しはいだって？　プラズマだんの　もくてきは
	_BALLOONWIN_OBJMSG( msg_n01r0502_black_01 , N01R0502_RIVAL_01 )
	_MSGWIN_CLOSE()

	//ゲーチス：Ｎの前へ横切る・ジェスチャー
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_come4 )
	_OBJ_ANIME_WAIT()

	//あれは　プラズマだんを　つくりあげるための　ウソ
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_06 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()
	
	//きさま　そんな　くだらぬ　かんがえで
	_BALLOONWIN_OBJMSG( msg_n01r0502_champion_01 , N01R0502_CHAMPION_01 )
	_MSGWIN_CLOSE()

	//ゲーチス：自機達のほうを見て
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_stay_d )
	_OBJ_ANIME_WAIT()

	//なんとでも　さて　かみと　よばれようと
	_PLAYER_NAME(0)
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_07 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()

	//ゲーチス：自機の前に移動
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_come5 )
	_OBJ_ANIME_WAIT()

	//ゲーチス：両手アニメ
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_sage1_hand )
	_OBJ_ANIME_WAIT()

	//========================================/
	
	//$WK_SCENE_N01R0502を５にして終了
	$WK_SCENE_N01R0502 = 5

	//ポケモンリーグのチャンピオンとライバル削除
	_FLAG_SET( FV_C09R0501_RIVAL_01 )
	_FLAG_SET( FV_C09R0501_CHAMPION_01 )
	_FLAG_SET( FV_N01R0501_SAGE1 )

	//========================================/

	//BGM終了
	_END_EVENT_BGM()

	//戦闘呼び出し
	_TRAINER_BTL_SET( TRID_SAGE1_01, 0 )
	//敗戦チェック
	_TRAINER_LOSE_CHECK( SCWK_ANSWER )
	IF $SCWK_ANSWER == SCR_BATTLE_RESULT_WIN THEN

		_CAMERA_START()		//カメラ操作開始
		_CAMERA_PURGE()		//カメラのバインドを解く
	
		//カメラ操作　Ｎの位置にカメラを合わせる
		_CAMERA_MOVE( 9688,0,970752,1081344,0,2457600,60 )
		_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	
		_TRAINER_WIN()			//勝ち(1)ならトレーナー勝利処理へ
	ELSE
		_TRAINER_LOSE()			//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
	ENDIF

	_TIME_WAIT( 30 )

	//ゲーチス・自機：気圧されるアニメ
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_keosu )
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_keosu )
	_OBJ_ANIME_WAIT()

	//……どういうことだ？
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_08 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()
	
	//ライバル：ゲーチスをどつく
	_OBJ_ANIME( N01R0502_RIVAL_01, anm_rival_dotsuku1 )
	_OBJ_ANIME_WAIT()

	//みぐるしいよ
	_BALLOONWIN_OBJMSG( msg_n01r0502_black_02 , N01R0502_RIVAL_01 )
	_MSGWIN_CLOSE()

	//ライバル・ゲーチス：画面外へ
	_OBJ_ANIME( N01R0502_RIVAL_01, anm_rival_dotsuku2 )
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_dotsuku )
	_OBJ_ANIME( N01R0502_CHAMPION_01, anm_champion_tsureteku2 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_tsureteku2 )
	_OBJ_ANIME_WAIT()
	
	_TIME_WAIT(20)
	
	//自機・チャンピオン・N：歩み寄る
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_ayumi )
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_ayumi )
	_OBJ_ANIME( N01R0502_CHAMPION_01, anm_champion_ayumi )
	_OBJ_ANIME_WAIT()

	//ボクが　きみのことを　ゲーチスに
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_13 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//ふむ　なるほどな
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_champion_02w, msg_n01r0502_champion_02b, N01R0502_SAGE1_01, POS_DL )
	_MSGWIN_CLOSE()
	
	//だが　ぼくに　えいゆうの　しかくはない！
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_14 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//そうかあ？
	_BALLOONWIN_OBJMSG( msg_n01r0502_champion_03 , N01R0502_CHAMPION_01 )
	_MSGWIN_CLOSE()

	//わかったような　ことを
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_15 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//Ｎよ　おたがい　りかい　しあえなくとも　ひていする
	_BALLOONWIN_OBJMSG( msg_n01r0502_champion_04 , N01R0502_CHAMPION_01 )
	_MSGWIN_CLOSE()

	//Ｎ首振りアニメ
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_kubi )
	_OBJ_ANIME_WAIT()

	//そうだね　いまなら　それも　わかる
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_16 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//Ｎのアップ絵表示
	_START_FACEUP( 0, 0 )

	//プレイヤー名！
	_PLAYER_NAME( 0 )
	_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_17 )
	_PLAINWIN_CLOSE()

	//はいと　答えた回数でメッセージ分岐
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		//ホワイトバージョンでかつ
		IF $LWK_ROM == VERSION_WHITE THEN
			
			//電気石の洞穴ではいを選択した場合
			IF FLAG_ON( FE_N_LASTMESSAGE ) THEN
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_01 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			//いいえを選択した場合
			ELSE
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_02 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			ENDIF

		ELSE
		
			//電気石の洞穴ではいを選択した場合
			IF FLAG_ON( FE_N_LASTMESSAGE ) THEN
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_03 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			//いいえを選択した場合
			ELSE
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_04 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			ENDIF
		
		ENDIF
}
	//Ｎのアップ絵終了
	_END_FACEUP()
/*
	//自機にカメラを戻す
	_CAMERA_RECV_MOVE( 10 )	//_CAMERA_START()を使った時の座標に戻します。引数は移動にかかるフレーム数です

	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_CAMERA_BIND()		//カメラバインド　主人公位置をカメラが追従するようになります
	_CAMERA_END()		//カメラ操作終了
*/
	//========================================/
	
	//$WK_SCENE_N01R0502を６にして終了
	$WK_SCENE_N01R0502 = 6

	//========================================/
	
	//ゲームクリア
	_GOTO_GAMECLEAR_DEMO( 0 )

_RET

//--------------------------------------------------------------------
//	Ｎ：lastbtl5用アニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_n_lastbtl5
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_dir_u
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_dir_d
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_dir_r
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_dir_l
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_wait_come2
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WAIT_8F,1
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_come
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	AC_WALK_U_16F,4
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_gcis_come2
	_ANIME_DATA	AC_WALK_R_16F,2
	_ANIME_DATA	AC_WALK_U_16F,2
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_come2a
	_ANIME_DATA	AC_WALK_U_16F,3
	_ANIME_DATA	AC_WALK_L_16F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_come3
	_ANIME_DATA	AC_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_come4
	_ANIME_DATA	AC_WALK_L_16F,2
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_come5
	_ANIME_DATA	AC_WALK_R_16F,1
	_ANIME_DATA	AC_WALK_D_16F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_rival_come
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	AC_WALK_U_16F,5
	_ANIME_DATA	AC_STAY_WALK_L_16F,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_STAY_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_chanpion_come
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	AC_WALK_U_16F,5
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_keosu
	_ANIME_DATA	AC_WALK_D_4F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_keosu
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_D_4F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_rival_dotsuku1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_rival_dotsuku2
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_R_16F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_D_8F,8
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_gcis_dotsuku
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WAIT_8F,1
	_ANIME_DATA AC_WALK_R_16F,1
	_ANIME_DATA	AC_WAIT_8F,2
	_ANIME_DATA	AC_WALK_D_8F,8
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_champion_tsureteku2
	_ANIME_DATA	AC_WAIT_16F,2
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_tsureteku2
	_ANIME_DATA	AC_WAIT_16F,2
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_champion_ayumi
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_ayumi
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_n_ayumi
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_n_last
	_ANIME_DATA	AC_WAIT_8F,1
	_ANIME_DATA	AC_WALK_U_8F,10
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_n_lastscene
	_ANIME_DATA	AC_WALK_U_8F,8
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_package_lastscene
	_ANIME_DATA	AC_WALK_D_2F,15
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_lastscene
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_champion_lastscene
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0
	
/**************************************************************/
/*		ゲーチス	話しかけ（負けた場合のもの）			  */
/**************************************************************/
EVENT_START		ev_n01r0502_sage1_01
_TALK_OBJ_START()
	//戦闘呼び出し
	_TRAINER_BTL_SET( TRID_SAGE1_01, 0 )
	//敗戦チェック
	_TRAINER_LOSE_CHECK( SCWK_ANSWER )
	IF $SCWK_ANSWER == SCR_BATTLE_RESULT_WIN THEN

		_CAMERA_START()		//カメラ操作開始
		_CAMERA_PURGE()		//カメラのバインドを解く
	
		//カメラ操作　Ｎの位置にカメラを合わせる
		_CAMERA_MOVE( 9688,0,970752,1081344,0,2457600,60 )
		_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	
		_OBJ_POS_CHANGE( MMDL_ID_PLAYER, 16, 0, 39, DIR_UP )
	
		_OBJ_ANIME( N01R0502_BOSS_01, anm_dir_d )
		_OBJ_ANIME( N01R0502_SAGE1_01, anm_dir_d )
		_OBJ_ANIME( N01R0502_RIVAL_01, anm_dir_u )
		_OBJ_ANIME( N01R0502_CHAMPION_01, anm_dir_u )
		_OBJ_ANIME( N01R0502_WKOBJCODE00_01, anm_dir_d )
		_OBJ_ANIME_WAIT()
	
		_TRAINER_WIN()			//勝ち(1)ならトレーナー勝利処理へ
	ELSE
		_TRAINER_LOSE()			//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
	ENDIF

	_TIME_WAIT( 30 )

	//ゲーチス・自機：気圧されるアニメ
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_keosu )
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_keosu )
	_OBJ_ANIME_WAIT()

	//……どういうことだ？
	_BALLOONWIN_OBJMSG( msg_n01r0502_sage1_08 , N01R0502_SAGE1_01 )
	_MSGWIN_CLOSE()
	
	//ライバル：ゲーチスをどつく
	_OBJ_ANIME( N01R0502_RIVAL_01, anm_rival_dotsuku1 )
	_OBJ_ANIME_WAIT()

	//みぐるしいよ
	_BALLOONWIN_OBJMSG( msg_n01r0502_black_02 , N01R0502_RIVAL_01 )
	_MSGWIN_CLOSE()

	//ライバル・ゲーチス：画面外へ
	_OBJ_ANIME( N01R0502_RIVAL_01, anm_rival_dotsuku2 )
	_OBJ_ANIME( N01R0502_SAGE1_01, anm_gcis_dotsuku )
	_OBJ_ANIME( N01R0502_CHAMPION_01, anm_champion_tsureteku2 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_tsureteku2 )
	_OBJ_ANIME_WAIT()
	
	_TIME_WAIT(20)
	
	//自機・チャンピオン・N：歩み寄る
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_ayumi )
	_OBJ_ANIME( N01R0502_BOSS_01, anm_n_ayumi )
	_OBJ_ANIME( N01R0502_CHAMPION_01, anm_champion_ayumi )
	_OBJ_ANIME_WAIT()

	//ボクが　きみのことを　ゲーチスに
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_13 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//ふむ　なるほどな
	_BALLOONWIN_OBJMSG_WB( msg_n01r0502_champion_02w, msg_n01r0502_champion_02b, N01R0502_SAGE1_01, POS_DEFAULT )
	_MSGWIN_CLOSE()
	
	//だが　ぼくに　えいゆうの　しかくはない！
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_14 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//そうかあ？
	_BALLOONWIN_OBJMSG( msg_n01r0502_champion_03 , N01R0502_CHAMPION_01 )
	_MSGWIN_CLOSE()

	//わかったような　ことを
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_15 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//Ｎよ　おたがい　りかい　しあえなくとも　ひていする
	_BALLOONWIN_OBJMSG( msg_n01r0502_champion_04 , N01R0502_CHAMPION_01 )
	_MSGWIN_CLOSE()
	
	//そうだね　いまなら　それも　わかる
	_BALLOONWIN_OBJMSG( msg_n01r0502_boss_16 , N01R0502_BOSS_01 )
	_MSGWIN_CLOSE()
	
	//Ｎのアップ絵表示
	_START_FACEUP( 0, 0 )

	//プレイヤー名！
	_PLAYER_NAME( 0 )
	_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_17 )
	_PLAINWIN_CLOSE()

	//はいと　答えた回数でメッセージ分岐
{
	DEFINE_LOCAL	LWK_ROM
	_GET_ROM_VERSION( LWK_ROM )
		//ホワイトバージョンでかつ
		IF $LWK_ROM == VERSION_WHITE THEN
			
			//電気石の洞穴ではいを選択した場合
			IF FLAG_ON( FE_N_LASTMESSAGE ) THEN
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_01 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			//いいえを選択した場合
			ELSE
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_02 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			ENDIF

		ELSE
		
			//電気石の洞穴ではいを選択した場合
			IF FLAG_ON( FE_N_LASTMESSAGE ) THEN
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_03 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			//いいえを選択した場合
			ELSE
			
				_PLAINWIN_MSG_DOWN( msg_n01r0502_boss_last_04 )
				_LAST_KEYWAIT()
				_PLAINWIN_CLOSE()
			
			ENDIF
		
		ENDIF
}
	//Ｎのアップ絵終了
	_END_FACEUP()
/*	
	//自機にカメラを戻す
	_CAMERA_RECV_MOVE( 10 )	//_CAMERA_START()を使った時の座標に戻します。引数は移動にかかるフレーム数です

	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_CAMERA_BIND()		//カメラバインド　主人公位置をカメラが追従するようになります
	_CAMERA_END()		//カメラ操作終了
*/
	//========================================/
	
	//$WK_SCENE_N01R0502を６にして終了
	$WK_SCENE_N01R0502 = 6

	//========================================/
	
	//ゲームクリア
	_GOTO_GAMECLEAR_DEMO( 0 )

EVENT_END

/**************************************************************/
/*		RIVAL		N01R0502								  */
/**************************************************************/
EVENT_START		ev_n01r0502_rival_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_n01r0502_rematch_black )
EVENT_END

/**************************************************************/
/*		CHAMP		N01R0502								  */
/**************************************************************/
EVENT_START		ev_n01r0502_champion_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_n01r0502_rematch_champion )
EVENT_END
