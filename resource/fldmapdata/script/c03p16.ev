
//======================================================================
//                c03p16.ev
//
//    スクリプトファイル：c03p16用
//
//======================================================================

  .text

  .include	"scr_seq_def.h"
  .include	"msg_c03p16.h"
  .include	"c03p16.h"
  .include	"c03r0801_def.h"//受付員のスクリプトのヘッダーをインクルード！

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA		ev_reserve_c03p16_cabinguide_01
_EVENT_DATA		ev_c03p16_cabinguide_01
_EVENT_DATA_END

/**************************************************************/
/*			予約スクリプトイベント							  */
/**************************************************************/
EVENT_START		ev_reserve_c03p16_cabinguide_01
		
	//ブラックイン
	_MAP_FADE_BLACK_IN()

	//下船アニメ
	_OBJ_ANIME( C03P16_CABINGUIDE_01, anm_cabin_out )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_out )
	_OBJ_ANIME_WAIT()

	//ごじょうせん　ありがとうございました
	_BALLOONWIN_OBJMSG( msg_c03p16_cabinguide_07 , C03P16_CABINGUIDE_01 )
	_BALLOONWIN_CLOSE()

EVENT_END

//--------------------------------------------------------------
//			下船アニメ
//--------------------------------------------------------------
_ANIME_LABEL	anm_cabin_out
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_out
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

/**************************************************************/
/*			遊覧船受付員	C03P16	イベントスクリプト		  */
/**************************************************************/
EVENT_START		ev_c03p16_cabinguide_01
_TALK_OBJ_START()

	//【仮】分岐：時間が乗船時間内であるか？

		//乗船時間内の場合

		//けしき　ウキウキ
		_BALLOONWIN_TALKOBJ_MSG( msg_c03p16_cabinguide_01 )
		_YES_NO_WIN( SCWK_ANSWER )
		_BALLOONWIN_CLOSE()
		
		//分岐：はい処理
		IF $SCWK_ANSWER == SCR_YES THEN
			
			//この　ゆうらんせんは
			_BALLOONWIN_TALKOBJ_MSG( msg_c03p16_cabinguide_02 )
			_BALLOONWIN_CLOSE()
			
			//ヒウンゆうらんせん　じまんの
			_BALLOONWIN_TALKOBJ_MSG( msg_c03p16_cabinguide_03 )
			_BALLOONWIN_CLOSE()
		
		ENDIF

		//ヒウンゆうらんせんへ　おのりに
		_BALLOONWIN_TALKOBJ_MSG( msg_c03p16_cabinguide_04 )
		_YES_NO_WIN( SCWK_ANSWER )
		_BALLOONWIN_CLOSE()
		
		//分岐：はい処理
		IF $SCWK_ANSWER == SCR_YES THEN
			
			//まもなく　しゅっこうに　なります
			_BALLOONWIN_TALKOBJ_MSG( msg_c03p16_cabinguide_05 )
			_BALLOONWIN_CLOSE()

			//乗船アニメ
			_OBJ_ANIME( C03P16_CABINGUIDE_01, anm_cabin_in )
			_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_in )
			_OBJ_ANIME_WAIT()
			
			//船員のOBJを消す
			_OBJ_DEL( C03P16_CABINGUIDE_01 )

			//望さんスクリプト
			_PL_BOAT_START()

			//予約スクリプト
			_RESERVE_SCRIPT( SCRID_RESERVE_C03R0801_CABINGUIDE_01 )
	
			//マップチェンジ
			_MAP_CHANGE( ZONE_ID_C03R0801, 29, 29, DIR_UP )

		//分岐：いいえ処理
		ELSE

			//かしこまりました
			_BALLOONWIN_TALKOBJ_MSG( msg_c03p16_cabinguide_06 )
			_BALLOONWIN_CLOSE()

		ENDIF

EVENT_END

//--------------------------------------------------------------
//			乗船アニメ
//--------------------------------------------------------------
_ANIME_LABEL	anm_cabin_in
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_player_in
	_ANIME_DATA AC_WAIT_16F,1
	_ANIME_DATA	AC_WALK_R_8F,2
	_ANIME_DATA	ACMD_END,0
	
