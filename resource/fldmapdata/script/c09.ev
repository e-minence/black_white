
//======================================================================
//                c09.ev
//
//    スクリプトファイル：c09用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_c09.h"
  .include  "c09.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    ev_c09_veteranm_01
_EVENT_DATA    ev_c09_veteranm_02
_EVENT_DATA    ev_pos_c09_firstvisit
_EVENT_DATA    ev_zone_c09
_EVENT_DATA    ev_pos_c09_forbidden
_EVENT_DATA    ev_reserve_c09_entry		//D09(チャンピオンロード)からきた際のカメラ演出
_EVENT_DATA_END


//------------------------！注意！------------------------------//
//																//
//	LOCALWORK10をPOSイベントの起動に使用しています				//
//	ゾーン内での使用を禁止します								//
//																//
//--------------------------------------------------------------//


/************************************************************/
/*				ゾーンチェンジスクリプト					*/
/************************************************************/
INIT_EVENT_START	ev_zone_c09
	
	//チャンピオンリーグ：四天王戦の準備（必ずＣ09を通るのでここで初期化しています）
	_FLAG_RESET( SYS_FLAG_BIGFOUR_GHOSTWIN )
	_FLAG_RESET( SYS_FLAG_BIGFOUR_EVILWIN )
	_FLAG_RESET( SYS_FLAG_BIGFOUR_FIGHTWIN )
	_FLAG_RESET( SYS_FLAG_BIGFOUR_ESPWIN )
	
	//Ｎの城出現後からチャンピオン復帰までリーグフロントに入れない
	IF FLAG_ON( FE_C09_FORBIDDEN ) THEN
		$LOCALWORK10 = 111	//POSイベントを有効にする
	ENDIF
	
INIT_EVENT_END


/************************************************************/
/*						予約スクリプト						*/
/************************************************************/
EVENT_START	ev_reserve_c09_entry
	
	//チャンピオンロードから移動してきたならカメラ演出
	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラパージ
	_CAMERA_MOVE(1055,0,2088960,2129920,0,3768320, 1 )
	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	
	_MAP_FADE_BLACK_IN()	//暗転復帰開始
	_DISP_FADE_END_CHECK()	//暗転復帰待ち
	
	_TIME_WAIT( 16 )
	_CAMERA_DEF_MOVE( 90 )		//カメラ主人公位置に復帰
	_TIME_WAIT( 80 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_move_01 )
	_OBJ_ANIME_WAIT()
	
	_CAMERA_WAIT_MOVE()	//カメラ移動待ち
	_CAMERA_BIND()		//カメラバインド
	_CAMERA_END()		//カメラ操作終了
	
EVENT_END

//--------------------------------------------------------------------
//主人公：奥へ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_player_move_01
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0


/************************************************************/
/*					ベテラン♂（中央）						*/
/************************************************************/
EVENT_START	ev_c09_veteranm_01
	_TALK_OBJ_START()
	
	_PLAINWIN_MSG_UP( msg_c09_veteranm1_03 )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()
	
EVENT_END


/************************************************************/
/*					ベテラン♂（左側）						*/
/************************************************************/
EVENT_START	ev_c09_veteranm_02
	_TALK_OBJ_START()
	
	_PLAINWIN_MSG_UP( msg_c09_veteranm2_03 )
	_LAST_KEYWAIT()
	_MSGWIN_CLOSE()
	
EVENT_END


/************************************************************/
/*					初回POSイベント							*/
/************************************************************/
EVENT_START	ev_pos_c09_firstvisit
	
	//ベテラン（中央）：！マーク
	_OBJ_ANIME( C09_VETERANM_01, anm_gyoe )
	_OBJ_ANIME_WAIT()
	
	//解説しよう!
	_PLAINWIN_MSG_UP( msg_c09_veteranm1_01 )
	_MSGWIN_CLOSE()
	
	//ポケモンリーグは…
	_PLAINWIN_MSG_UP( msg_c09_veteranm1_02 )
	_MSGWIN_CLOSE()
	
	//ベテラン（左側）：右を向く
	_OBJ_ANIME( C09_VETERANM_02, anm_staywalk_r )
	_OBJ_ANIME_WAIT()
	
	_CAMERA_START()				//カメラ操作開始---------------------------▽
	_CAMERA_PURGE()				//対象物とカメラのバインドを解く
	_CAMERA_MOVE( 4454,0,2109440,1277952,0,3244032,30 )	//カメラを動かす
	
	//全てのトレーナーにとって
	_PLAINWIN_MSG_UP( msg_c09_veteranm2_01 )
	_MSGWIN_CLOSE()
	
	_CAMERA_WAIT_MOVE()			//カメラ移動待ち
	
	//ベテラン（左側）：左を向く
	_OBJ_ANIME( C09_VETERANM_02, anm_staywalk_l )
	_OBJ_ANIME_WAIT()
	
	//こちらで準備をしておくがいい
	_PLAINWIN_MSG_UP( msg_c09_veteranm2_02 )
	_MSGWIN_CLOSE()
	
	_CAMERA_RECV_MOVE( 15 )		//カメラを主人公位置に戻す
	_CAMERA_WAIT_MOVE()			//カメラ移動待ち
	_CAMERA_BIND()				//カメラバインド
	_CAMERA_END()				//カメラ操作終了----------------------------△
	
	
	//========================================//
	
	//POS無効
	$WK_SCENE_C09 = 1
	
	//========================================//
	
	
EVENT_END

//--------------------------------------------------------------------
//！マーク
//--------------------------------------------------------------------
_ANIME_LABEL	anm_gyoe
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------------
//方向転換
//--------------------------------------------------------------------
_ANIME_LABEL	anm_staywalk_l
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_staywalk_r
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0


/************************************************************/
/*		ポケモンリーグ立ち入り禁止POSイベント				*/
/************************************************************/
EVENT_START	ev_pos_c09_forbidden
	//ベテラン（中央）：！マーク
	_OBJ_ANIME( C09_VETERANM_01, anm_gyoe )
	_OBJ_ANIME_WAIT()
	
	//ベテラン：主人公を見る
	_OBJ_ANIME( C09_VETERANM_01, anm_staywalk_r )
	_OBJ_ANIME_WAIT()
	
	_PLAINWIN_MSG_UP( msg_c09_veteranm1_stop )
	_MSGWIN_CLOSE()
	
	//主人公：一歩下がる
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_back_01 )
	_OBJ_ANIME_WAIT()
	
EVENT_END

//--------------------------------------------------------------------
//主人公：一歩下がる
//--------------------------------------------------------------------
_ANIME_LABEL	anm_player_back_01
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0


