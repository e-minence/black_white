//======================================================================
// fld_item.ev
// scr_flditem/fld_item.csv,../../../prog/include/item/itemsym.hを元にコンバートしています
// ●コンバート実行
//   fld_item(.bat)
// ●更新されるファイル
//   fld_item.ev
//   fld_item_def.h
//======================================================================

	.text
	.include "scr_seq_def.h"
 	.include "../../message/dst/script/msg_item_get_scr.h

//--------------------------------------------------------------
// スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA ev_fld_item_0
_EVENT_DATA ev_fld_item_1
_EVENT_DATA ev_fld_item_2
_EVENT_DATA ev_fld_item_3
_EVENT_DATA ev_fld_item_4
_EVENT_DATA ev_fld_item_5
_EVENT_DATA ev_fld_item_6
_EVENT_DATA ev_fld_item_7
_EVENT_DATA ev_fld_item_8
_EVENT_DATA ev_fld_item_9
_EVENT_DATA ev_fld_item_10
_EVENT_DATA ev_fld_item_11
_EVENT_DATA ev_fld_item_12
_EVENT_DATA ev_fld_item_13
_EVENT_DATA ev_fld_item_14
_EVENT_DATA ev_fld_item_15
_EVENT_DATA ev_fld_item_16
_EVENT_DATA ev_fld_item_17
_EVENT_DATA ev_fld_item_18
_EVENT_DATA ev_fld_item_19
_EVENT_DATA ev_fld_item_20
_EVENT_DATA ev_fld_item_21
_EVENT_DATA ev_fld_item_225
_EVENT_DATA ev_fld_item_226
_EVENT_DATA ev_fld_item_227
_EVENT_DATA ev_fld_item_228
_EVENT_DATA ev_fld_item_229
_EVENT_DATA ev_fld_item_230
_EVENT_DATA ev_fld_item_231
_EVENT_DATA ev_fld_item_232
_EVENT_DATA ev_fld_item_233
_EVENT_DATA ev_fld_item_234
_EVENT_DATA ev_fld_item_235
_EVENT_DATA ev_fld_item_236
_EVENT_DATA ev_fld_item_237
_EVENT_DATA ev_fld_item_238
_EVENT_DATA ev_fld_item_239
_EVENT_DATA ev_fld_item_240
_EVENT_DATA ev_fld_item_241
_EVENT_DATA ev_fld_item_242
_EVENT_DATA ev_fld_item_243
_EVENT_DATA ev_fld_item_244
_EVENT_DATA ev_fld_item_245
_EVENT_DATA ev_fld_item_246
_EVENT_DATA ev_fld_item_247
_EVENT_DATA ev_fld_item_248
_EVENT_DATA ev_fld_item_249
_EVENT_DATA ev_fld_item_250
_EVENT_DATA ev_fld_item_251
_EVENT_DATA ev_fld_item_252
_EVENT_DATA ev_fld_item_253
_EVENT_DATA ev_fld_item_254
_EVENT_DATA ev_fld_item2
_EVENT_DATA_END

//--------------------------------------------------------------
// MAP=r02 X=408 Y=120 ITEM=キズぐすり FLAG=0
//--------------------------------------------------------------
EVENT_START ev_fld_item_0
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r02 X=408 Y=120 ITEM=キズぐすり FLAG=1
//--------------------------------------------------------------
EVENT_START ev_fld_item_1
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r02 X=408 Y=120 ITEM=キズぐすり FLAG=2
//--------------------------------------------------------------
EVENT_START ev_fld_item_2
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r02 X=408 Y=120 ITEM=キズぐすり FLAG=3
//--------------------------------------------------------------
EVENT_START ev_fld_item_3
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r02 X=408 Y=120 ITEM=キズぐすり FLAG=4
//--------------------------------------------------------------
EVENT_START ev_fld_item_4
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=d01 X=408 Y=120 ITEM=キズぐすり FLAG=5
//--------------------------------------------------------------
EVENT_START ev_fld_item_5
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=d01 X=408 Y=120 ITEM=キズぐすり FLAG=6
//--------------------------------------------------------------
EVENT_START ev_fld_item_6
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=d01 X=408 Y=120 ITEM=キズぐすり FLAG=7
//--------------------------------------------------------------
EVENT_START ev_fld_item_7
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=d01 X=408 Y=120 ITEM=キズぐすり FLAG=8
//--------------------------------------------------------------
EVENT_START ev_fld_item_8
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r05 X=408 Y=120 ITEM=キズぐすり FLAG=9
//--------------------------------------------------------------
EVENT_START ev_fld_item_9
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r05 X=408 Y=120 ITEM=キズぐすり FLAG=10
//--------------------------------------------------------------
EVENT_START ev_fld_item_10
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r05 X=408 Y=120 ITEM=キズぐすり FLAG=11
//--------------------------------------------------------------
EVENT_START ev_fld_item_11
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r03 X=408 Y=120 ITEM=キズぐすり FLAG=12
//--------------------------------------------------------------
EVENT_START ev_fld_item_12
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r03 X=408 Y=120 ITEM=キズぐすり FLAG=13
//--------------------------------------------------------------
EVENT_START ev_fld_item_13
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r03 X=408 Y=120 ITEM=キズぐすり FLAG=14
//--------------------------------------------------------------
EVENT_START ev_fld_item_14
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r04 X=408 Y=120 ITEM=キズぐすり FLAG=15
//--------------------------------------------------------------
EVENT_START ev_fld_item_15
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=r04 X=408 Y=120 ITEM=キズぐすり FLAG=16
//--------------------------------------------------------------
EVENT_START ev_fld_item_16
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=d09 X=408 Y=120 ITEM=げんきのかけら FLAG=17
//--------------------------------------------------------------
EVENT_START ev_fld_item_17
  _FLD_ITEM_EVENT ITEM_GENKINOKAKERA,1
EVENT_END

//--------------------------------------------------------------
// MAP=d09 X=408 Y=120 ITEM=すごいキズぐすり FLAG=18
//--------------------------------------------------------------
EVENT_START ev_fld_item_18
  _FLD_ITEM_EVENT ITEM_SUGOIKIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=d09 X=408 Y=120 ITEM=ハイパーボール FLAG=19
//--------------------------------------------------------------
EVENT_START ev_fld_item_19
  _FLD_ITEM_EVENT ITEM_HAIPAABOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=d09 X=408 Y=120 ITEM=きんのたま FLAG=20
//--------------------------------------------------------------
EVENT_START ev_fld_item_20
  _FLD_ITEM_EVENT ITEM_KINNOTAMA,1
EVENT_END

//--------------------------------------------------------------
// MAP=d09 X=408 Y=120 ITEM=なんでもなおし FLAG=21
//--------------------------------------------------------------
EVENT_START ev_fld_item_21
  _FLD_ITEM_EVENT ITEM_NANDEMONAOSI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=キズぐすり FLAG=225
//--------------------------------------------------------------
EVENT_START ev_fld_item_225
  _FLD_ITEM_EVENT ITEM_KIZUGUSURI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=モンスターボール FLAG=226
//--------------------------------------------------------------
EVENT_START ev_fld_item_226
  _FLD_ITEM_EVENT ITEM_MONSUTAABOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ちいさなキノコ FLAG=227
//--------------------------------------------------------------
EVENT_START ev_fld_item_227
  _FLD_ITEM_EVENT ITEM_TIISANAKINOKO,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=きちょうなホネ FLAG=228
//--------------------------------------------------------------
EVENT_START ev_fld_item_228
  _FLD_ITEM_EVENT ITEM_KITYOUNAHONE,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=スーパーボール FLAG=229
//--------------------------------------------------------------
EVENT_START ev_fld_item_229
  _FLD_ITEM_EVENT ITEM_SUUPAABOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=げんきのかけら FLAG=230
//--------------------------------------------------------------
EVENT_START ev_fld_item_230
  _FLD_ITEM_EVENT ITEM_GENKINOKAKERA,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=クイックボール FLAG=231
//--------------------------------------------------------------
EVENT_START ev_fld_item_231
  _FLD_ITEM_EVENT ITEM_KUIKKUBOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=リーフのいし FLAG=232
//--------------------------------------------------------------
EVENT_START ev_fld_item_232
  _FLD_ITEM_EVENT ITEM_RIIHUNOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=あかいかけら FLAG=233
//--------------------------------------------------------------
EVENT_START ev_fld_item_233
  _FLD_ITEM_EVENT ITEM_AKAIKAKERA,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ほのおのいし FLAG=234
//--------------------------------------------------------------
EVENT_START ev_fld_item_234
  _FLD_ITEM_EVENT ITEM_HONOONOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=みどりのかけら FLAG=235
//--------------------------------------------------------------
EVENT_START ev_fld_item_235
  _FLD_ITEM_EVENT ITEM_MIDORINOKAKERA,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=たいようのいし FLAG=236
//--------------------------------------------------------------
EVENT_START ev_fld_item_236
  _FLD_ITEM_EVENT ITEM_TAIYOUNOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=リピートボール FLAG=237
//--------------------------------------------------------------
EVENT_START ev_fld_item_237
  _FLD_ITEM_EVENT ITEM_RIPIITOBOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ひかりのいし FLAG=238
//--------------------------------------------------------------
EVENT_START ev_fld_item_238
  _FLD_ITEM_EVENT ITEM_HIKARINOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=あまいミツ FLAG=239
//--------------------------------------------------------------
EVENT_START ev_fld_item_239
  _FLD_ITEM_EVENT ITEM_AMAIMITU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ハートのウロコ FLAG=240
//--------------------------------------------------------------
EVENT_START ev_fld_item_240
  _FLD_ITEM_EVENT ITEM_HAATONOUROKO,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=モンスターボール FLAG=241
//--------------------------------------------------------------
EVENT_START ev_fld_item_241
  _FLD_ITEM_EVENT ITEM_MONSUTAABOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=おおきなキノコ FLAG=242
//--------------------------------------------------------------
EVENT_START ev_fld_item_242
  _FLD_ITEM_EVENT ITEM_OOKINAKINOKO,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ネストボール FLAG=243
//--------------------------------------------------------------
EVENT_START ev_fld_item_243
  _FLD_ITEM_EVENT ITEM_NESUTOBOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ハイパーボール FLAG=244
//--------------------------------------------------------------
EVENT_START ev_fld_item_244
  _FLD_ITEM_EVENT ITEM_HAIPAABOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ネットボール FLAG=245
//--------------------------------------------------------------
EVENT_START ev_fld_item_245
  _FLD_ITEM_EVENT ITEM_NETTOBOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=みずのいし FLAG=246
//--------------------------------------------------------------
EVENT_START ev_fld_item_246
  _FLD_ITEM_EVENT ITEM_MIZUNOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=あおいかけら FLAG=247
//--------------------------------------------------------------
EVENT_START ev_fld_item_247
  _FLD_ITEM_EVENT ITEM_AOIKAKERA,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=きいろいかけら FLAG=248
//--------------------------------------------------------------
EVENT_START ev_fld_item_248
  _FLD_ITEM_EVENT ITEM_KIIROIKAKERA,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=かみなりのいし FLAG=249
//--------------------------------------------------------------
EVENT_START ev_fld_item_249
  _FLD_ITEM_EVENT ITEM_KAMINARINOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ダイブボール FLAG=250
//--------------------------------------------------------------
EVENT_START ev_fld_item_250
  _FLD_ITEM_EVENT ITEM_DAIBUBOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=つきのいし FLAG=251
//--------------------------------------------------------------
EVENT_START ev_fld_item_251
  _FLD_ITEM_EVENT ITEM_TUKINOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=やみのいし FLAG=252
//--------------------------------------------------------------
EVENT_START ev_fld_item_252
  _FLD_ITEM_EVENT ITEM_YAMINOISI,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=タイマーボール FLAG=253
//--------------------------------------------------------------
EVENT_START ev_fld_item_253
  _FLD_ITEM_EVENT ITEM_TAIMAABOORU,1
EVENT_END

//--------------------------------------------------------------
// MAP=WC10 X=0 Y=0 ITEM=ふしぎなアメ FLAG=254
//--------------------------------------------------------------
EVENT_START ev_fld_item_254
  _FLD_ITEM_EVENT ITEM_HUSIGINAAME,1
EVENT_END


//======================================================================
// scr_flditem/fld_item_base.ev
//======================================================================
//--------------------------------------------------------------------
//  フィールド上のモンスターボール
//  SCWK_TEMP0  アイテムナンバー
//  SCWK_TEMP1  個数
//  SCWK_TEMP2  成功か失敗か
//--------------------------------------------------------------------
ev_fld_item2:
{
  _TALK_OBJ_START()
  _SE_WAIT() //話しかけ開始音の終了待ち
  
  //パラメータ保存
  _LDWK( SCWK_TEMP0, SCWK_REG0 )              //アイテムナンバー
  _LDWK( SCWK_TEMP1, SCWK_REG1 )              //個数
  
  //アイテムを加えられるかチェック
  _ADD_ITEM_CHK( SCWK_TEMP0, SCWK_TEMP1, SCWK_ANSWER )
  
  //取得結果でメッセージを分岐させる
  IF $SCWK_ANSWER == 1 THEN
    _CALL ev_itemget_flditem_true    //成功
  ELSE
    _CALL ev_itemget_flditem_false //失敗
  ENDIF
}
_RET

//--------------------------------------------------------------------
//  成功終了
//--------------------------------------------------------------------
ev_itemget_flditem_true:
  _CHG_COMMON_SCR SCRID_POCKET_ME_SET //MEセット
  
  //話しかけ対象のモンスターボールを消す
  _OBJ_DEL( SCWK_TARGET_OBJID )
  
  _CHG_COMMON_SCR SCRID_ITEM_GET_PLAYER_FORM_SET

  //アイテム追加
  _ADD_ITEM( SCWK_TEMP0, SCWK_TEMP1, SCWK_ANSWER )
  
  //こんごうだま、しらたまのチェック
  //_UG_BALLITEM_CHECK  SCWK_TEMP0
  
  //入手したアイテムが技マシンかチェック
  _WAZA_ITEM_CHK( SCWK_TEMP0, SCWK_ANSWER )
  
  //メッセージ分岐
  IF $SCWK_ANSWER == 1 THEN
    _CALL ev_itemget_flditem_yes_wazam
  ELSE
    _CALL ev_itemget_flditem_no_wazam
  ENDIF
  
  _ME_WAIT()

  _PLAYER_NAME( 0 )
  _ITEM_NAME( 1, SCWK_TEMP0 )

  //ポケットナンバーをSCWK_ANSWERに代入
  _GET_POCKET_ID( SCWK_TEMP0, SCWK_ANSWER )
  _POCKET_NAME( 2, SCWK_ANSWER )

  _SYSWIN_MSG_DOWN( msg_item_get_pocket_nowait )
  _LAST_KEYWAIT()
  
  //最後に成功したことをSCWK_ANSWERに代入しておく！
  _LDVAL( SCWK_ANSWER,1 )

  _CHG_COMMON_SCR SCRID_ITEM_GET_PLAYER_FORM_RETURN
  
  //ウィンドウクローズ
  _SYSWIN_CLOSE()
  _RET

//--------------------------------------------------------------------
//  技マシンかによってメッセージ分岐
//--------------------------------------------------------------------
//「技マシン」
ev_itemget_flditem_yes_wazam:
{
  _PLAYER_NAME( 0 )
  _ITEM_NAME( 1,SCWK_TEMP0 )
  _ITEM_WAZA_NAME( 2,SCWK_TEMP0)
  _SYSWIN_MSG_DOWN( msg_item_get_field_03 )
}
_RET

//「技マシン」以外
ev_itemget_flditem_no_wazam:
{
  _PLAYER_NAME(  0 )
  _ITEM_NAME( 1,SCWK_TEMP0 )
  _SYSWIN_MSG_DOWN( msg_item_get_field_02 )
}
_RET

//--------------------------------------------------------------------
//  失敗終了
//--------------------------------------------------------------------
ev_itemget_flditem_false:
{
  _ITEM_NAME( 0,SCWK_TEMP0 )
  _SYSWIN_MSG_DOWN( msg_item_get_fail_field )
  _LAST_KEYWAIT()
  _SYSWIN_CLOSE()

  //最後に失敗したことをSCWK_ANSWERに代入しておく！
  _LDVAL( SCWK_ANSWER,0 )
}
_RET

