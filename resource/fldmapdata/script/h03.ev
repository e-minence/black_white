
//======================================================================
//                h03.ev
//
//    スクリプトファイル：h03用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_h03.h"
  .include  "h03.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    	ev_h03_fighterw_01
_EVENT_DATA		ev_h03_middlewoman1_01
_EVENT_DATA		ev_init_h03
_EVENT_DATA		ev_recover_h03
_EVENT_DATA		ev_zone_h03
_EVENT_DATA_END

/************************************************************/
/*					ZONE_CHANGE_SCRIPT						*/
/************************************************************/
INIT_EVENT_START	ev_zone_h03
	
	//LOCALWORK0→ 曜日
	//LOCALWORK1→ 時間帯
	
	//曜日の取得
	_GET_WEEK( LOCALWORK0 )
	
	//時間帯の取得
	_GET_TIMEZONE( LOCALWORK1 )
	
	IF $LOCALWORK1 >= TIMEZONE_NIGHT && $LOCALWORK0 == RTC_WEEK_FRIDAY THEN
		_FLAG_RESET(FH_01)
		_FLAG_SET(FH_02)
	ELSE
		_FLAG_RESET(FH_02)
		_FLAG_SET(FH_01)
	ENDIF
	
INIT_EVENT_END
/**************************************************************/
/*           FIELD_INIT_LABEL								  */
/**************************************************************/
INIT_EVENT_START	ev_init_h03
	
	//LOCALWORK0→ 曜日
	//LOCALWORK1→ 時間帯
	
	//曜日の取得
	_GET_WEEK( LOCALWORK0 )
	
	//時間帯の取得
	_GET_TIMEZONE( LOCALWORK1 )
	
	IF $LOCALWORK1 >= TIMEZONE_NIGHT 	THEN
	_DEBUG_PRINT_WK( LOCALWORK0)
	_DEBUG_PRINT_WK( RTC_WEEK_FRIDAY)
		IF $LOCALWORK0 == RTC_WEEK_FRIDAY THEN
			//群集の起動
			_CROWD_PEOPLE_START()
		ENDIF
	ENDIF

INIT_EVENT_END

INIT_EVENT_START	ev_recover_h03
	//LOCALWORK0→ 曜日
	//LOCALWORK1→ 時間帯
	
	//曜日の取得
	_GET_WEEK( LOCALWORK0 )
	
	//時間帯の取得
	_GET_TIMEZONE( LOCALWORK1 )
	
	IF $LOCALWORK1 >= TIMEZONE_NIGHT  THEN
		IF $LOCALWORK0 == RTC_WEEK_FRIDAY THEN
			//群集の起動
			_CROWD_PEOPLE_START()
		ENDIF
	ENDIF

INIT_EVENT_END
/**************************************************************/
/*    ニトロチャージをくれるイベント           */                                                           
/**************************************************************/
EVENT_START    ev_h03_fighterw_01
	
	//_EASY_TALK_ITEM_EVENT(ITEM_WAZAMASIN28,1,FH_01,msg_h03_00_01,msg_h03_00_02,msg_h03_00_02)
	_TALK_OBJ_START()	
	
	//アイテムを入手しているかによって分岐
	IF FLAG_OFF(FE_H03_ITEMGET_01) THEN
		_BALLOONWIN_OBJMSG_POS( msg_h03_fighterw_01, H03_FIGHTERW_01, POS_UR )
		_MSGWIN_CLOSE()

		_ITEM_EVENT_KEYWAIT(ITEM_WAZAMASIN43,1)
		_BALLOONWIN_OBJMSG_POS( msg_h03_fighterw_02, H03_FIGHTERW_01, POS_UR )
		
		//アイテム入手フラグON
		_FLAG_SET(FE_H03_ITEMGET_01)

	ELSE
		_BALLOONWIN_OBJMSG_POS( msg_h03_fighterw_02, H03_FIGHTERW_01, POS_UR )
	ENDIF
		_LAST_KEYWAIT()
		_MSGWIN_CLOSE()
		
EVENT_END

/**************************************************************/
/*    MIDDLEWOMAN1の話しかけイベント           */                                                           
/**************************************************************/
EVENT_START    ev_h03_middlewoman1_01
	
	_EASY_BALLOONWIN_TALKOBJ_MSG(msg_h03_middlewoman_01)
	
EVENT_END
