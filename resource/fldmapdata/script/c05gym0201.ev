
//======================================================================
//                c05gym0201.ev
//
//    スクリプトファイル：c05gym0201用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "msg_c05gym0201.h"
  //.include  "c05gym0201.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    ev_c05gym0201_startlift_01
_EVENT_DATA    ev_scene_c05gym0201_gymback_01
_EVENT_DATA_END


//------------------------------注意--------------------------------//
//																	//
//	ジムギミックに LOCALWORK10 を使用しています。					//
//	同マップ内の使用を禁止します。									//
//	0 = シーンチェンジ起動 ジムから戻ってくるリフト演出				//
//																	//
//------------------------------------------------------------------//


/************************************************************/
/*			ジムフロアから戻ってくる演出					*/
/************************************************************/
EVENT_START	ev_scene_c05gym0201_gymback_01

	//ブラックイン
	_BLACK_IN()

	//ジムからリフトが戻ってくる演出（引数0 = 上昇アニメ）
	_GYM_GROUND_ENT_EXIT_LIFT( 0 )

	_DISP_FADE_END_CHECK()

	//========================================//
	
	//シーンチェンジを無効にする
	$WK_C05GYM_EXIT = 0
	
	//========================================//

EVENT_END



/************************************************************/
/*			ジムフロアへ降りるリフトのスイッチ				*/
/************************************************************/
EVENT_START	ev_c05gym0201_startlift_01
	_PLAYER_DIR_GET( SCWK_ANSWER )	//主人公の向き情報を取得

	//スイッチの上側以外から話しかけた場合はリフト起動
	IF $SCWK_ANSWER != DIR_DOWN THEN
		//ブラックアウト
		_BLACK_OUT()

		//リフトを下降させる（1 = 下降アニメ）
		_GYM_GROUND_ENT_EXIT_LIFT( 1 )

		_DISP_FADE_END_CHECK()

		//マップチェンジ
		_MAP_CHANGE_NO_FADE( ZONE_ID_C05GYM0101, 17, 50, 25, DIR_UP )

	ENDIF

EVENT_END

