
//======================================================================
//                d01r0101.ev
//
//    スクリプトファイル：d01r0101用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_d01r0101.h"
  .include  "d01r0101.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    ev_d01r0101_girl_01
_EVENT_DATA    ev_pos_d01r0101_support_01
_EVENT_DATA    ev_d01r0101_support_02
_EVENT_DATA    ev_pos_d01r0101_support_03
_EVENT_DATA    ev_pos_d01r0101_support_04
_EVENT_DATA    ev_d01r0101_item_01
_EVENT_DATA    ev_init_d01r0101
_EVENT_DATA    ev_d01r0101_sage_01
_EVENT_DATA_END


/**************************************************************/
/*            FLAG_CHANGE_LABEL                               */
/**************************************************************/
//ev_d01r0101_flag_change:
//  _END

/************************************************************/
/*					FIELD_INIT_LABEL						*/
/************************************************************/
INIT_EVENT_START	ev_init_d01r0101
	

	//夢ポケモンイベントの値によってサポートの初期位置を変更する
	IF $WK_SCENE_D01R0101_POKE == 2 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 23, 0, 22, DIR_DOWN )
	
	ELSIF $WK_SCENE_D01R0101_POKE == 3 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 24, 0, 22, DIR_RIGHT )
	
	ELSIF $WK_SCENE_D01R0101_POKE == 4 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 27, 0, 12, DIR_DOWN )

	ELSE
	
	ENDIF

INIT_EVENT_END


/**************************************************************/
/*   D01R0101　ジムリーダー対策ポケモンくれるガール            */
/**************************************************************/
EVENT_START   ev_d01r0101_girl_01
_TALK_OBJ_START()

//状態により会話を分岐
	IF $WK_SCENE_D01R0101 == 0 THEN
		
		//最初に選択した三匹で台詞内にセットする名前を変える
		IF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_KUSA THEN
			//最初の３匹で草タイプを選択した時の処理
			
			//0に選択ポケモンの名前をセット
			_MONS_NAME(0,MONSNO_551)
			//1に有効ポケモンの名前をセット
			_MONS_NAME(1,MONSNO_597)
				
		ELSIF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_HONOO THEN	
			//最初の３匹で炎タイプを選択した時の処理
			
			//0に選択ポケモンの名前をセット
			_MONS_NAME(0,MONSNO_554)
			//1に有効ポケモンの名前をセット
			_MONS_NAME(1,MONSNO_593)
			
		ELSE
			//最初の３匹で水タイプを選択した時の処理
			
			//0に選択ポケモンの名前をセット
			_MONS_NAME(0,MONSNO_557)
			//1に有効ポケモンの名前をセット
			_MONS_NAME(1,MONSNO_595)
				
		ENDIF
		
		_BALLOONWIN_OBJMSG(msg_d01r0101_girl_01,D01R0101_GIRL_01)
		_BALLOONWIN_CLOSE()
		//ポケモン入手処理へジャンプ
		_CALL ev_d01r0101_pokecount
		
	//2回目会話時
	ELSIF $WK_SCENE_D01R0101 == 1 THEN
		//ポケモン入手処理へジャンプ
		_CALL ev_d01r0101_pokecount
	ELSE
	
	//ポケモン受け取り済
		_BALLOONWIN_OBJMSG(msg_d01r0101_girl_10,D01R0101_GIRL_01)
		_LAST_KEYWAIT()
		_BALLOONWIN_CLOSE()
	ENDIF

EVENT_END

/**************************************************************/
/*CALL：ポケモン入手処理                                */
/**************************************************************/
ev_d01r0101_pokecount:

	//最初に選択した三匹で台詞内にセットする名前・タイプを変える
	IF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_KUSA THEN
		//最初の３匹で草タイプを選択した時の処理
		
		//0に選択ポケモンの名前をセット
		_MONS_NAME(0,MONSNO_551)
		//1に有効ポケモンの名前をセット
		_MONS_NAME(1,MONSNO_597)
		//手持ち苦手タイプ名セット
		_POKETYPE_NAME(2,POKETYPE_HONOO)
			
	ELSIF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_HONOO THEN	
		//最初の３匹で炎タイプを選択した時の処理
		
		//0に選択ポケモンの名前をセット
		_MONS_NAME(0,MONSNO_554)
		//1に有効ポケモンの名前をセット
		_MONS_NAME(1,MONSNO_593)
		//手持ち苦手タイプ名セット
		_POKETYPE_NAME(2, POKETYPE_MIZU)
		
		
	ELSE
		//最初の３匹で水タイプを選択した時の処理
		
		//0に選択ポケモンの名前をセット
		_MONS_NAME(0,MONSNO_557)
		//1に有効ポケモンの名前をセット
		_MONS_NAME(1,MONSNO_595)
		//手持ち苦手タイプ名セット
		_POKETYPE_NAME(2,POKETYPE_KUSA)
				
	ENDIF

	_BALLOONWIN_OBJMSG(msg_d01r0101_girl_02,D01R0101_GIRL_01)
	//ポケモン必要か質問
	DEFINE_LOCAL SCWK_ANSWER01
	_YES_NO_WIN( SCWK_ANSWER01 )
	_BALLOONWIN_CLOSE()
	
	//回答により分岐
	IF $SCWK_ANSWER01 == 0 THEN


		//手持ちポケモンをカウントして回答を分岐する
		{
		DEFINE_LOCAL LWK_POKE_COUNT
		_GET_PARTY_POKE_COUNT (LWK_POKE_COUNT,POKECOUNT_MODE_TOTAL)
	
		//手持ちがいっぱいなら
		IF $LWK_POKE_COUNT == 6 THEN
			_BALLOONWIN_OBJMSG(msg_d01r0101_girl_03,D01R0101_GIRL_01)
			_BALLOONWIN_CLOSE()
			
			//======================================//
			
			//1回目の会話は繰り返さない用フラグ
			$WK_SCENE_D01R0101 = 1
			
			//======================================//
				
		ELSE
		//手持ちに空きがあれば持ちタイプに合わせてポケモンを渡す
			
			IF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_KUSA THEN
				//最初の３匹で草タイプを選択した時の処理
				_BALLOONWIN_OBJMSG(msg_d01r0101_girl_06,D01R0101_GIRL_01)
				_BALLOONWIN_CLOSE()
				_ADD_POKEMON_TO_PARTY( SCWK_ANSWER, MONSNO_597, 0, 10 )
				
			ELSIF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_HONOO THEN	
				//最初の３匹で炎タイプを選択した時の処理
				_BALLOONWIN_OBJMSG(msg_d01r0101_girl_07,D01R0101_GIRL_01)
				_BALLOONWIN_CLOSE()
				_ADD_POKEMON_TO_PARTY( SCWK_ANSWER, MONSNO_593, 0, 10 )
				
			ELSE
				//最初の３匹で水タイプを選択した時の処理
				_BALLOONWIN_OBJMSG(msg_d01r0101_girl_05,D01R0101_GIRL_01)
				_BALLOONWIN_CLOSE()
				_ADD_POKEMON_TO_PARTY( SCWK_ANSWER, MONSNO_595, 0, 10 )
				
			ENDIF
		
			//プレイヤーネームを格納
			_PLAYER_NAME(0)
		
			//手に入れた
			_ME_PLAY( SEQ_ME_POKEGET )
			_SYSWIN_MSG_ALLPUT(msg_d01r0101_girl_08, POS_DEFAULT)
			_ME_WAIT()
			_AB_KEYWAIT_MARK()
			_SYSWIN_CLOSE()
			
			//名前をつけますか？
			_SYSWIN_MSG(msg_d01r0101_girl_09, POS_DEFAULT )
			DEFINE_LOCAL NAME_YESNO01
			_YES_NO_WIN( NAME_YESNO01 )
			_SYSWIN_CLOSE()
			
			//名づけるか分岐
			IF $NAME_YESNO01 == 0 THEN
				//はい
				
				//$POKE_COUNTに1を足して手持ちの最後尾の数を指定
				//$POKE_COUNT += 1
				
				//名前入力結果が格納されるローカル変数を定義
				DEFINE_LOCAL SCWK_NAMEINPUT
				
				
				//名前入力画面呼び出し
				_PARTY_POKE_NAME_INPUT(SCWK_NAMEINPUT,LWK_POKE_COUNT,TRUE)
				
			ELSE
				//いいえの場合はスキップ
			ENDIF
		
			//会話終了
			_BALLOONWIN_OBJMSG(msg_d01r0101_girl_10,D01R0101_GIRL_01)
			_LAST_KEYWAIT()
			_BALLOONWIN_CLOSE()
			
			//======================================//
			
			//対策ポケモン受け取り済フラグ
			$WK_SCENE_D01R0101 = 2
			
			//======================================//
		ENDIF
		}

	//いらない場合
	ELSE
		_BALLOONWIN_OBJMSG(msg_d01r0101_girl_04,D01R0101_GIRL_01)
		_LAST_KEYWAIT()
		_BALLOONWIN_CLOSE()
		
		//======================================//
		
		//1回目の会話は繰り返さない用フラグ
		$WK_SCENE_D01R0101 = 1
		
		//======================================//
	
	ENDIF

_RET

/**************************************************************/
/*   D01R0101　サポート登場                                   */
/**************************************************************/
EVENT_START   ev_pos_d01r0101_support_01

	//サポートOBJ生成
	_FLAG_RESET(FV_D01R0101_SUPPORT_01)
	_OBJ_ADD(D01R0101_SUPPORT)
	
	//プレイヤーネームを格納
	_PLAYER_NAME(0)
	
	//サポート曲再生。
	_START_EVENT_BGM( SEQ_BGM_E_SUPPORT )
	
	//サポート登場
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_01)
	_OBJ_ANIME_WAIT()
	
	//主人公振り向く
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_retrun01)
	_OBJ_ANIME_WAIT()
	//ひとこと声をかける
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_01,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	//サポート廃墟内へ
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_02)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_retrun02)
	_OBJ_ANIME_WAIT()
	
	//専用曲止まる
	_END_EVENT_BGM()
	
	//======================================//
	
	//ポケモンの鳴き声に気づくPOS起動
	$WK_SCENE_D01R0101_POKE = 2
	
	//D01R0101夢ポケモンイベントOBJ表示
	_FLAG_RESET( FV_D01R0101_POKE_01 )
	_OBJ_ADD(D01R0101_POKE_01)
	_OBJ_ADD(D01R0101_HAKAIM_01)
	_OBJ_ADD(D01R0101_HAKAIW_01)
	
	
	//======================================//

EVENT_END

/**************************************************************/
/*   D01R0101　サポートに話しかけ時                          */
/**************************************************************/
EVENT_START   ev_d01r0101_support_02

	//状況ごとに話すことを変える

	//イベント進行前
	IF $WK_SCENE_D01R0101_POKE == 2 THEN
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_02)

	//物音に気づいた後
	ELSIF $WK_SCENE_D01R0101_POKE == 3 THEN
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_03)

	//イベント終了時
	ELSIF $WK_SCENE_D01R0101_POKE == 4 THEN
		//プレイヤーネームを格納
		_PLAYER_NAME(0)
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_12)

	//例外処理では夢の話をする
	ELSE
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_02)
	ENDIF

EVENT_END

/**************************************************************/
/*   D01R0101　POSを踏んでサポート反応する                    */
/**************************************************************/
EVENT_START   ev_pos_d01r0101_support_03

	//自機座標取得
	DEFINE_LOCAL  POSX
    DEFINE_LOCAL  POSZ
    _PLAYER_POS_GET( POSX,POSZ ) 
    
    //鳴き声再生
	_VOICE_PLAY(MONSNO_540,0)
    
	//サポート追って来る
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_03)
	_OBJ_ANIME_WAIT()
	
	
	//プレイヤーが通る3グリッド分をアニメを用意
    SWITCH $POSZ
	CASE 22 THEN
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z22 )
	_OBJ_ANIME_WAIT()
	
	CASE 23 THEN
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z23 )
	_OBJ_ANIME_WAIT()
	
	CASE 24 THEN
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z24 )
	_OBJ_ANIME_WAIT()
	
    DEFAULT
    _OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z22 )
	_OBJ_ANIME_WAIT()
	
    ENDSWITCH
	
	//サポート何かに気づく
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_03,D01R0101_SUPPORT)
	_LAST_KEYWAIT()
	_BALLOONWIN_CLOSE()
	
	//======================================//
	
	//ポケモンの姿を見るPOS起動
	$WK_SCENE_D01R0101_POKE = 3
	
	//======================================//

EVENT_END

/**************************************************************/
/*   D01R0101　POSを踏んで夢ポケモン鳴いて退場                */
/**************************************************************/
EVENT_START   ev_pos_d01r0101_support_04

	//プレイヤーネームを格納
	_PLAYER_NAME(0)
	
	//自機座標取得
	DEFINE_LOCAL  POSX02
    DEFINE_LOCAL  POSZ02
    _PLAYER_POS_GET( POSX02,POSZ02 ) 
    
    //サポートの位置を変更
    _OBJ_POS_CHANGE( D01R0101_SUPPORT, 27, 0, 18, DIR_UP )
	
	//プレイヤーが通る3グリッド分をアニメを用意
    SWITCH $POSX02
	CASE 26 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x26 )
	_OBJ_ANIME_WAIT()
	
	CASE 27 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x27 )
	_OBJ_ANIME_WAIT()
	
	CASE 28 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x28 )
	_OBJ_ANIME_WAIT()
	
	CASE 29 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x29 )
	_OBJ_ANIME_WAIT()
	
    DEFAULT
    _OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
    _OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x27 )
	_OBJ_ANIME_WAIT()
	
    ENDSWITCH

	//ムンナ鳴く
	_VOICE_PLAY(MONSNO_540,0)
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke_01,D01R0101_POKE_01, POS_UR )
	_BALLOONWIN_CLOSE()
	
	//ムンナ少し上に移動
	_OBJ_ANIME(D01R0101_POKE_01,anm_d01r0101_pokemon_01)
	_OBJ_ANIME_WAIT()
	
	//サポート：まってぇ！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_04,D01R0101_SUPPORT , POS_DL)
	_BALLOONWIN_CLOSE()
	
	//カメラ操作　ムンナ中心に
	_CAMERA_START()		//カメラ操作開始
	_CAMERA_PURGE()		//カメラのバインドを解く
	_CAMERA_MOVE( 9688,0,970752,1802240,0,557056,48 )
	
	//サポートと主人公も上に移動
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_player_upgo)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_upgo)
	_OBJ_ANIME_WAIT()
	
	//カメラ移動待ち
	 _CAMERA_WAIT_MOVE()
	
	//画面外からプラズマ団登場
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_coming01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_coming01)
	_OBJ_ANIME_WAIT()
	
	//プラズマ女：みっけ
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaiw_01,D01R0101_HAKAIW_01, POS_UL)
	_BALLOONWIN_CLOSE()
	
	//プラズマ団ムンナを囲む
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_coming02)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_coming02)
	_OBJ_ANIME_WAIT()
	
	//プラズマ男：夢のけむりを出せ！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_01,D01R0101_HAKAIM_01 , POS_UL)
	_BALLOONWIN_CLOSE()
	
	//プラズマ男その場歩き
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_kick_01)
	_OBJ_ANIME_WAIT()
	
	//ムンナ：むう！
	_VOICE_PLAY(MONSNO_540,0)
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke_02,D01R0101_POKE_01 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//ムンナ左右を見て困惑
	_OBJ_ANIME(D01R0101_POKE_01,anm_d01r0101_pokemon_02)
	_OBJ_ANIME_WAIT()
	
	//サポート：ちょっと！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_05,D01R0101_SUPPORT , POS_DL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ団下を向く
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//プラズマ男：わたしたちのことか？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_02,D01R0101_HAKAIM_01 , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ女：なにをしてるのか？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaiw_02,D01R0101_HAKAIW_01 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//プラズマ男ムンナを蹴る
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_kick_02)
	_OBJ_ANIME_WAIT()
	_SE_PLAY( SEQ_SE_FLD_04 ) 
	_SE_WAIT() 
	
	//ムンナ：む…にゅ！
	_VOICE_PLAY(MONSNO_540,0)
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke_03,D01R0101_POKE_01, POS_UR )
	_BALLOONWIN_CLOSE()
	
	//プラズマ男：おら！ゆめのけむりをだせ！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_03,D01R0101_HAKAIM_01 , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//サポート：ひどい！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_06,D01R0101_SUPPORT , POS_DL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ男サポートの方を向く
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//プラズマ女：そうよ
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaiw_03,D01R0101_HAKAIW_01 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//プラズマ男：というわけで
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_04,D01R0101_HAKAIM_01 , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ男隣接
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_battle01)
	_OBJ_ANIME_WAIT()
	
	//サポート：えええ！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_07,D01R0101_SUPPORT , POS_DL )
	_BALLOONWIN_CLOSE()
	
	//戦闘処理
	_TRAINER_BTL_SET( TRID_HAKAIM1_12, 0 )
	//結果チェック
	_TRAINER_LOSE_CHECK( SCWK_ANSWER )
	IF $SCWK_ANSWER == SCR_BATTLE_RESULT_WIN THEN
		_CAMERA_START()		//カメラ操作開始
		_CAMERA_PURGE()		//カメラのバインドを解く
		_CAMERA_MOVE( 9688,0,970752,1802240,0,557056,1 )
		
		_TRAINER_WIN()
	ELSE
		_TRAINER_LOSE()
	ENDIF
	
	//プラズマ女：みくびったか？まあいい
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaiw_04,D01R0101_HAKAIW_01 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//プラズマ女接近
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_battle01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_battle02)
	_OBJ_ANIME_WAIT()
	
	//戦闘処理
	_TRAINER_BTL_SET( TRID_HAKAIW1_05, 0 )
	//結果チェック
	_TRAINER_LOSE_CHECK( SCWK_ANSWER )
	IF $SCWK_ANSWER == SCR_BATTLE_RESULT_WIN THEN
		_CAMERA_START()		//カメラ操作開始
		_CAMERA_PURGE()		//カメラのバインドを解く
		_CAMERA_MOVE( 9688,0,970752,1802240,0,557056,1 )
		
		_TRAINER_WIN()
	ELSE
		_TRAINER_LOSE()
	ENDIF
	
	//プラズマ男下を向く
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//まさか二人してまけるとはな
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_05,D01R0101_HAKAIM_01 , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ団ムンナの横へ
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_to_poke1)
	_OBJ_ANIME_WAIT()
	
	//一瞬間をおく
	_TIME_WAIT( 12 )
	
	//プラズマ男ムンナを蹴る
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_kick_02)
	_OBJ_ANIME_WAIT()
	_SE_PLAY( SEQ_SE_FLD_04 ) 
	_SE_WAIT() 
	
	//おら！ゆめのけむりだせ！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_06,D01R0101_HAKAIM_01 , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//サポート：やめたげてよお！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_07a,D01R0101_SUPPORT , POS_DL )
	_BALLOONWIN_CLOSE()
	
	//辺りが白くなる
	_WHITE_OUT() 
	_DISP_FADE_END_CHECK()
	_WHITE_IN()
	_DISP_FADE_END_CHECK()


	//======================================//
	
	//ゲーヂス表示準備
	_FLAG_RESET( FV_D01R0101_GCIS_01 )
	
	//======================================//
	
	//ゲーヂス１作成
	_OBJ_ADD( D01R0101_SAGE1_01 )
	
	//一瞬間をおく
	_TIME_WAIT( 16 )
	
	//プラズマ団驚く
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakai_to_sage1_left_01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_sage1_left_02)
	_OBJ_ANIME_WAIT()
	
	//ゲーヂス1：なにをしているのだ？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_sage1_01,D01R0101_SAGE1_01 , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//ゲーヂス２作成
	_OBJ_ADD( D01R0101_SAGE1_02 )

	//一瞬間をおく
	_TIME_WAIT( 16 )
	
	//プラズマ団右を向く
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakai_to_sage1_right_01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_sage1_right_02)
	_OBJ_ANIME_WAIT()
	
	//ゲーヂス1：われわれ プラズマ団は
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_sage1_02,D01R0101_SAGE1_02 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//ゲーヂス１，２削除
	_OBJ_DEL( D01R0101_SAGE1_01 )
	_OBJ_DEL( D01R0101_SAGE1_02 )
	//ゲーヂス３作成
	_OBJ_ADD( D01R0101_SAGE1_03 )

	//一瞬間をおく
	_TIME_WAIT( 16 )
	
	//プラズマ団上を向く
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakai_to_sage1_up)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_sage1_up)
	_OBJ_ANIME_WAIT()
	
	//ゲーヂス３：その やくめ はたせないというのなら
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_sage1_03,D01R0101_SAGE1_03, POS_UL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ団お互いを見る
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaim_look_hakaiw_01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaiw_look_hakaim_01)
	_OBJ_ANIME_WAIT()
	
	//プラズマ団女：こ、これは…！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaiw_05,D01R0101_HAKAIW_01, POS_UR )
	_BALLOONWIN_CLOSE()
	
	//プラズマ団男：ああ…
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaim_07,D01R0101_HAKAIM_01, POS_UL )
	_BALLOONWIN_CLOSE()
	
	//プラズマ団女：とにかく いますぐ
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_hakaiw_06,D01R0101_HAKAIW_01, POS_UR )
	_BALLOONWIN_CLOSE()
	
	//プラズマ団画面外まで逃走
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_escape_01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_escape_01)
	_OBJ_ANIME_WAIT()
	
	//一瞬間をおく
	_TIME_WAIT( 16 )
	
	//ゲーヂスOBJ削除
	_OBJ_DEL( D01R0101_SAGE1_03 )
	_OBJ_DEL( D01R0101_HAKAIW_01 )
	_OBJ_DEL( D01R0101_HAKAIM_01 )
	//ムシャーナOBJ作成
	_OBJ_ADD( D01R0101_POKE_02 )
	
	//ムシャーナ登場
	_OBJ_ANIME(D01R0101_POKE_02,anm_d01r0101_poke2_come)
	_OBJ_ANIME_WAIT()
	
	//ムンナ：むにゃあ！
	_VOICE_PLAY(MONSNO_516,0)
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke1_01,D01R0101_POKE_02, POS_UL )
	_BALLOONWIN_CLOSE()
	
	//サポートと主人公向き合う
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_player01)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_to_support01)
	_OBJ_ANIME_WAIT()
	
	//ベル：…いまのって、なあに？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_08,D01R0101_SUPPORT, POS_DL )
	_BALLOONWIN_CLOSE()
	
	//サポートと主人公上を見る
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_poke2)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_support_to_poke2)
	_OBJ_ANIME_WAIT()
	
	//それにあのポケモン…
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_09,D01R0101_SUPPORT , POS_DL )
	_BALLOONWIN_CLOSE()
	
	//マコモ：わっ！
	_PLAINWIN_MSG_DOWN( msg_d01r0101_inventor_01 )
	_MSGWIN_CLOSE()
	
	//サポート下を向く
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//マコモOBJ一時生成
	_OBJ_ADD_EX( 27, 17, DIR_UP, MMDL_ID_EVENTOBJ_00, ASSISTANTW, MV_DMY )
	
	//マコモ隣接（ウィンドウも同時に消す）
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_coming)
	_OBJ_ANIME_WAIT()
	
	//マコモ：待ちきれなくて来ちゃった ってムシャーナ！？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_inventor_02,MMDL_ID_EVENTOBJ_00 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//サポート上を向く
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_poke2)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_support_to_poke2)
	_OBJ_ANIME_WAIT()
	
	//ムシャーナ：むしゃ？
	_VOICE_PLAY(MONSNO_516,0)
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke1_02,D01R0101_POKE_02, POS_UL )
	_BALLOONWIN_CLOSE()
	
	//ムンナ：むにい
	_VOICE_PLAY(MONSNO_540,0)
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke_04,D01R0101_POKE_01, POS_UR )
	_BALLOONWIN_CLOSE()
	
	//ムシャーナムンナ退場
	_OBJ_ANIME(D01R0101_POKE_01,anm_d01r0101_poke_goodbye01)
	_OBJ_ANIME(D01R0101_POKE_02,anm_d01r0101_poke_goodbye01)
	_OBJ_ANIME_WAIT()

	//======================================//
	
	//ゆめのけむりOBJ表示
	_FLAG_RESET( FV_D01R0101_ITEM_01 )
	_OBJ_ADD(D01R0101_ITEM_01)
	
	//======================================//
	
	//ムシャーナムンナ退場
	_OBJ_ANIME(D01R0101_POKE_01,anm_d01r0101_poke_goodbye02)
	_OBJ_ANIME(D01R0101_POKE_02,anm_d01r0101_poke_goodbye02)
	_OBJ_ANIME_WAIT()
	
	//ムンナ・ムシャーナ削除
	_OBJ_DEL( D01R0101_POKE_01 )
	_OBJ_DEL( D01R0101_POKE_02 )
	
	//マコモ：なにがあったの？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_inventor_03,MMDL_ID_EVENTOBJ_00 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//サポート下を向く
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//サポート：あっ マコモさん
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_10,D01R0101_SUPPORT , POS_DL )
	_BALLOONWIN_CLOSE()
	
	//マコモ：…なるほどね
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_inventor_04,MMDL_ID_EVENTOBJ_00 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//マコモ：アイテムに隣接
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_to_item_01)
	_OBJ_ANIME_WAIT()
	
	//サポート上を向く
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_poke2)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_support_to_poke2)
	_OBJ_ANIME_WAIT()
	
	//マコモ：アイテムのそばでジャンプ
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_to_item_02)
	_OBJ_ANIME_WAIT()
	
	//マコモ：これって ゆめのけむり！？
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_inventor_05,MMDL_ID_EVENTOBJ_00 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//アイテムOBJ削除
	_OBJ_DEL(D01R0101_ITEM_01)
	
	//マコモ：主人公に隣接
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_to_player)
	_OBJ_ANIME_WAIT()
	
	//マコモ：これで わたしの けんきゅうが！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_inventor_06,MMDL_ID_EVENTOBJ_00 , POS_UR )
	_BALLOONWIN_CLOSE()
	
	//マコモ退場
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_goodbye)
	_OBJ_ANIME_WAIT()
	
	//サポートと主人公向き合う
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_player01)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_to_support01)
	_OBJ_ANIME_WAIT()
	
	//サポート：ふええ
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_white_11,D01R0101_SUPPORT , POS_UL )
	_BALLOONWIN_CLOSE()
	
	//自機にカメラを戻す
	_CAMERA_DEF_MOVE (40) 
	//カメラ待ち
	_CAMERA_WAIT_MOVE()
	_CAMERA_BIND()		//カメラバインド　主人公位置をカメラが追従するようになります
	_CAMERA_END()		//カメラ操作終了
	
	//マコモを消す
	_OBJ_DEL( MMDL_ID_EVENTOBJ_00 )
	
	//======================================//
	
	//夢イベント終了フラグ
	$WK_SCENE_D01R0101_POKE = 4
	
	//夢ポケモン非表示
	_FLAG_SET(FV_D01R0101_POKE_01)
	//アイテムOBJ非表示
	_FLAG_SET( FV_D01R0101_ITEM_01 )
	//ゲーヂス非表示
	_FLAG_SET(FV_D01R0101_GCIS_01)
	
	//======================================//

EVENT_END

//--------------------------------------------------------------
//	R01　夢イベント用：夢ポケモン去っていく  
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_pokemon_01
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムンナを発見して　サポートが隣接 
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_04
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx26
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x26
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx27
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x27
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx28
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x28
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx29
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x29
	_ANIME_DATA	AC_WALK_L_8F,2
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポートとプレイヤー、ムンナを追う
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_upgo
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_coming01
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_coming01
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女ムンナを囲む
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_coming02
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男ムンナを囲む
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_coming02
	_ANIME_DATA	AC_WALK_R_8F,2
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムンナ囲まれて左右を見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_pokemon_02
	_ANIME_DATA	AC_DIR_R,24
	_ANIME_DATA	AC_DIR_L,24
	_ANIME_DATA	AC_DIR_R,24
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団下を向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_down
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男ムンナを蹴る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_kick_01
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男ムンナを蹴る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_kick_02
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_L_16F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_WALK_R_4F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男、主人公に隣接
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_battle01
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男、戦闘に負けておしのけられる
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_battle02
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女、プラズマ男をおしのける
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_battle01
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男ふたたびムンナをいじめる
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_to_poke1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団ゲーヂスを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_sage1_left_01
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団ゲーヂスを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_sage1_left_02
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団ゲーヂスを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_sage1_right_01
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	AC_MARK_HATENA,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団ゲーヂスを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_sage1_right_02
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団ゲーヂスを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_sage1_up
	_ANIME_DATA	AC_STAY_WALK_U_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団お互いを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_look_hakaim_01
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団お互いを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_look_hakaiw_01
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女逃走
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_escape_01
	_ANIME_DATA	AC_WALK_R_4F,1
	_ANIME_DATA	AC_WALK_D_4F,8
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男逃走
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_escape_01
	_ANIME_DATA	AC_WALK_R_4F,2
	_ANIME_DATA	AC_WALK_D_4F,8
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムシャーナ登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_poke2_come
	_ANIME_DATA	AC_WALK_R_16F,2
	_ANIME_DATA	AC_WALK_D_16F,2
	_ANIME_DATA	AC_WALK_R_16F,2
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、主人公の方を向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_to_player01
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、主人公の方を向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_to_support01
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、ポケモンの方を向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_to_poke2
	_ANIME_DATA	AC_STAY_WALK_U_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_coming
	_ANIME_DATA	AC_WALK_U_8F,5
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムンナ・ムシャーナ退場（１）
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_poke_goodbye01
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムンナ・ムシャーナ退場（２）
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_poke_goodbye02
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_WALK_L_8F,4
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ、アイテムに隣接01
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_to_item_01
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ、アイテムに隣接01
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_to_item_02
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA AC_STAY_JUMP_L_8F,2
	_ANIME_DATA	ACMD_END,0


//--------------------------------------------------------------
//	R01　夢イベント用：マコモ、主人公に隣接
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_to_player
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ、高速で帰る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_goodbye
	_ANIME_DATA	AC_WALK_R_4F,1
	_ANIME_DATA	AC_WALK_D_4F,9
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：主人公、マコモを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_to_invetor
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、主人公に隣接
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_to_player02
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0
	
/**************************************************************/
/*   D01R0101　だいじなもの入手                               */
/**************************************************************/
EVENT_START   ev_d01r0101_item_01

	//プレイヤーネームを格納
	_PLAYER_NAME(0)

	//サポート駆け寄って来る
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_05)
	_OBJ_ANIME_WAIT()
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_05,D01R0101_SUPPORT)
	_LAST_KEYWAIT()
	_BALLOONWIN_CLOSE()
	
	//======================================//

	//夢イベント終了フラグ起動
	$WK_SCENE_D01R0101_POKE = 4
	
	//======================================//
	
EVENT_END

//--------------------------------------------------------------
//	R01　夢イベント用：いあい切り後にサポート来る  
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_01
	_ANIME_DATA	AC_WALK_R_8F,7
	_ANIME_DATA	AC_STAY_WALK_U_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー振り向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_retrun01
	_ANIME_DATA	AC_WAIT_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー一歩後ずさる
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_retrun02
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー、サポートに隣接z22
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_z22
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー、サポートに隣接z23
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_z23
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー、サポートに隣接z24
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_z24
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：廃墟の中に入っていくサポート 
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_02
	_ANIME_DATA	AC_WALK_U_8F,5
	_ANIME_DATA	AC_STAY_WALK_R_16F,0
	_ANIME_DATA	AC_STAY_WALK_L_16F,0
	_ANIME_DATA	AC_STAY_WALK_R_16F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：POS踏むとサポートが気づいて駆け寄って来る  
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_03
	_ANIME_DATA	AC_DIR_U,8
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0


//--------------------------------------------------------------
//	R01　夢イベント用：アイテムを取得後サポートが隣接 
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_05
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0

/**************************************************************/
/*【仮】クリア後イベント：七賢人イベント                     */
/**************************************************************/
EVENT_START   ev_d01r0101_sage_01
	
	//プレイヤーネームを格納
	_PLAYER_NAME(0)

_TALK_OBJ_START()
DEFINE_LOCAL	LWK_DIR	

	//七賢人５・セリフ１
	_BALLOONWIN_TALKOBJ_MSG( msg_d01r0101_sage5_end_01 )
	_MSGWIN_CLOSE()
	
	//つるぎのまい入手
	_ITEM_EVENT_KEYWAIT( ITEM_WAZAMASIN75, 1 )
	
	//七賢人５・セリフ２
	_BALLOONWIN_TALKOBJ_MSG( msg_d01r0101_sage5_end_02 )
	_MSGWIN_CLOSE()
	
	//ハンサム曲再生
	_START_EVENT_BGM( SEQ_BGM_E_HANDSOME )

	//ハンサム出現
	_OBJ_ADD_EX( 27,17,DIR_UP,MMDL_ID_EVENTOBJ_00,ICPO,MV_DMY )
	
	//ハンサム寄ってくる
	_PLAYER_DIR_GET( LWK_DIR )
	SWITCH $LWK_DIR
	CASE DIR_LEFT THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_left_come )
		_OBJ_ANIME( D01R0101_SAGE5_01, anm_stay_d )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_d )
		_OBJ_ANIME_WAIT()
	CASE DIR_RIGHT THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_right_come )
		_OBJ_ANIME( D01R0101_SAGE5_01, anm_stay_d )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_d )
		_OBJ_ANIME_WAIT()
	CASE DIR_UP THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_up_come )
		_OBJ_ANIME( D01R0101_SAGE5_01, anm_stay_l )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_l )
		_OBJ_ANIME_WAIT()
	CASE DIR_DOWN THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_down_come )
		_OBJ_ANIME( D01R0101_SAGE5_01, anm_stay_d )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_d )
		_OBJ_ANIME_WAIT()
	ENDSWITCH

	//ハンサムセリフ
	_BALLOONWIN_OBJMSG( msg_d01r0101_icpo_end_01 , MMDL_ID_EVENTOBJ_00 )
	_MSGWIN_CLOSE()

	//七賢人５・セリフ３
	_BALLOONWIN_TALKOBJ_MSG( msg_d01r0101_sage5_end_03 )
	_MSGWIN_CLOSE()

	SWITCH $LWK_DIR
	CASE DIR_LEFT THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_left_come2 )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_d )
		_OBJ_ANIME_WAIT()
	CASE DIR_RIGHT THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_right_come2 )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_d )
		_OBJ_ANIME_WAIT()
	CASE DIR_UP THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_up_come2 )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_l )
		_OBJ_ANIME_WAIT()
	CASE DIR_DOWN THEN
		_OBJ_ANIME( MMDL_ID_EVENTOBJ_00, anm_down_come2 )
		_OBJ_ANIME( MMDL_ID_PLAYER, anm_stay_l )
		_OBJ_ANIME_WAIT()
	ENDSWITCH
	
	//========================================/
	
	//七賢人ワークに＋１
	$WK_SCENE_AFTER_SAGE += 1
	
	//========================================/

	//全部の七賢人を捕まえている場合
	IF $WK_SCENE_AFTER_SAGE == 6 THEN
		
		//ハンサムセリフ
		_BALLOONWIN_OBJMSG( msg_d01r0101_icpo_end_03 , MMDL_ID_EVENTOBJ_00 )
		_MSGWIN_CLOSE()
	
	//まだ捕まえていない場合
	ELSE
	
		//ハンサムセリフ
		_BALLOONWIN_OBJMSG( msg_d01r0101_icpo_end_02 , MMDL_ID_EVENTOBJ_00 )
		_MSGWIN_CLOSE()
	
	ENDIF
	
	//画面暗転
	_BLACK_OUT()
	_DISP_FADE_END_CHECK()

	_OBJ_DEL( MMDL_ID_EVENTOBJ_00 )
	_OBJ_DEL( D01R0101_SAGE5_01 )
	
	_BLACK_IN()
	_DISP_FADE_END_CHECK()
	
	//ライバル曲停止
	_END_EVENT_BGM()

	//========================================/
	
	//バニシュフラグセット
	_FLAG_SET( FV_D01R0101_SAGE )
	
	//========================================/

EVENT_END

//--------------------------------------------------------------------
//共通アニメ：ステイウォーク
//--------------------------------------------------------------------
_ANIME_LABEL	anm_stay_u
	_ANIME_DATA	AC_STAY_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_d
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_r
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_l
	_ANIME_DATA	AC_WAIT_16F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_u2
	_ANIME_DATA	AC_WAIT_16F,1
	_ANIME_DATA	AC_STAY_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_d2
	_ANIME_DATA	AC_WAIT_16F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_r2
	_ANIME_DATA	AC_WAIT_16F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_stay_l2
	_ANIME_DATA	AC_WAIT_16F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,1
	_ANIME_DATA	ACMD_END,0
	
//--------------------------------------------------------------------
//	ハンサムアニメ
//--------------------------------------------------------------------
_ANIME_LABEL	anm_left_come
	_ANIME_DATA	AC_WALK_U_4F,7
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_right_come
	_ANIME_DATA	AC_WALK_U_4F,7
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_up_come
	_ANIME_DATA	AC_WALK_U_4F,6
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_U_4F,2
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_down_come
	_ANIME_DATA	AC_WALK_U_4F,7
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_left_come2
	_ANIME_DATA	AC_WALK_R_4F,1
	_ANIME_DATA	AC_STAY_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_right_come2
	_ANIME_DATA	AC_WALK_L_4F,1
	_ANIME_DATA	AC_STAY_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_up_come2
	_ANIME_DATA	AC_WALK_D_4F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_down_come2
	_ANIME_DATA	AC_WALK_L_4F,1
	_ANIME_DATA	AC_WALK_U_4F,2
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0
