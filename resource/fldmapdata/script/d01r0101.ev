
//======================================================================
//                d01r0101.ev
//
//    スクリプトファイル：d01r0101用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_d01r0101.h"
  .include  "d01r0101.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    ev_d01r0101_girl_01
_EVENT_DATA    ev_pos_d01r0101_support_01
_EVENT_DATA    ev_d01r0101_support_02
_EVENT_DATA    ev_pos_d01r0101_support_03
_EVENT_DATA    ev_pos_d01r0101_support_04
_EVENT_DATA    ev_d01r0101_item_01
_EVENT_DATA    ev_init_d01r0101
_EVENT_DATA_END


/**************************************************************/
/*            FLAG_CHANGE_LABEL                               */
/**************************************************************/
//ev_d01r0101_flag_change:
//  _END

/************************************************************/
/*					FIELD_INIT_LABEL						*/
/************************************************************/
INIT_EVENT_START	ev_init_d01r0101
	

	//夢ポケモンイベントの値によってサポートの初期位置を変更する
	IF $WK_SCENE_D01R0101_POKE == 1 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 23, 0, 22, DIR_DOWN )
	
	ELSIF $WK_SCENE_D01R0101_POKE == 2 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 24, 0, 22, DIR_RIGHT )
	
	ELSIF $WK_SCENE_D01R0101_POKE == 3 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 27, 0, 15, DIR_UP )
	
	ELSIF $WK_SCENE_D01R0101_POKE == 4 THEN
		_OBJ_POS_CHANGE( D01R0101_SUPPORT, 27, 0, 12, DIR_DOWN )

	ELSE
	
	ENDIF

INIT_EVENT_END


/**************************************************************/
/*   D01R0101　ジムリーダー対策ポケモンくれるガール            */
/**************************************************************/
EVENT_START   ev_d01r0101_girl_01
_TALK_OBJ_START()

//状態により会話を分岐
	IF $WK_SCENE_D01R0101 == 0 THEN
		
		//初回会話時にC01R0501のライバルと話したかチェックを行う
		IF FLAG_ON( FE_C01R0501_RIVALTALK ) THEN
		
		//=========フラグワーク操作==========//
	
		//ジム前サングラスの消去
		_FLAG_SET( FV_C01_GUIDE_01 )

		//ジム前リーダーの開始
		_FLAG_RESET( FV_C01_LEADER1_01 )

		//===================================//
		
		ENDIF
		
		//最初に選択した三匹で台詞内にセットする名前を変える
		IF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_KUSA THEN
			//最初の３匹で草タイプを選択した時の処理
			
			//0に選択ポケモンの名前をセット
			_MONS_NAME(0,MONSNO_551)
			//1に有効ポケモンの名前をセット
			_MONS_NAME(1,MONSNO_597)
				
		ELSIF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_HONOO THEN	
			//最初の３匹で炎タイプを選択した時の処理
			
			//0に選択ポケモンの名前をセット
			_MONS_NAME(0,MONSNO_554)
			//1に有効ポケモンの名前をセット
			_MONS_NAME(1,MONSNO_593)
			
		ELSE
			//最初の３匹で水タイプを選択した時の処理
			
			//0に選択ポケモンの名前をセット
			_MONS_NAME(0,MONSNO_557)
			//1に有効ポケモンの名前をセット
			_MONS_NAME(1,MONSNO_595)
				
		ENDIF
		
		_BALLOONWIN_OBJMSG(msg_d01r0101_girl_01,D01R0101_GIRL_01)
		_BALLOONWIN_CLOSE()
		//ポケモン入手処理へジャンプ
		_CALL ev_d01r0101_pokecount
		
	//2回目会話時
	ELSIF $WK_SCENE_D01R0101 == 1 THEN
		//ポケモン入手処理へジャンプ
		_CALL ev_d01r0101_pokecount
	ELSE
	
	//ポケモン受け取り済
		_BALLOONWIN_OBJMSG(msg_d01r0101_girl_10,D01R0101_GIRL_01)
		_LAST_KEYWAIT()
		_BALLOONWIN_CLOSE()
	ENDIF

EVENT_END

/**************************************************************/
/*CALL：ポケモン入手処理                                */
/**************************************************************/
ev_d01r0101_pokecount:

	//最初に選択した三匹で台詞内にセットする名前・タイプを変える
	IF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_KUSA THEN
		//最初の３匹で草タイプを選択した時の処理
		
		//0に選択ポケモンの名前をセット
		_MONS_NAME(0,MONSNO_551)
		//1に有効ポケモンの名前をセット
		_MONS_NAME(1,MONSNO_597)
		//手持ち苦手タイプ名セット
		_POKETYPE_NAME(2,POKETYPE_HONOO)
			
	ELSIF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_HONOO THEN	
		//最初の３匹で炎タイプを選択した時の処理
		
		//0に選択ポケモンの名前をセット
		_MONS_NAME(0,MONSNO_554)
		//1に有効ポケモンの名前をセット
		_MONS_NAME(1,MONSNO_593)
		//手持ち苦手タイプ名セット
		_POKETYPE_NAME(2, POKETYPE_MIZU)
		
		
	ELSE
		//最初の３匹で水タイプを選択した時の処理
		
		//0に選択ポケモンの名前をセット
		_MONS_NAME(0,MONSNO_557)
		//1に有効ポケモンの名前をセット
		_MONS_NAME(1,MONSNO_595)
		//手持ち苦手タイプ名セット
		_POKETYPE_NAME(2,POKETYPE_KUSA)
				
	ENDIF

	_BALLOONWIN_OBJMSG(msg_d01r0101_girl_02,D01R0101_GIRL_01)
	//ポケモン必要か質問
	DEFINE_LOCAL SCWK_ANSWER01
	_YES_NO_WIN( SCWK_ANSWER01 )
	_BALLOONWIN_CLOSE()
	
	//回答により分岐
	IF $SCWK_ANSWER01 == 0 THEN


		//手持ちポケモンをカウントして回答を分岐する
		{
		DEFINE_LOCAL POKE_COUNT
		_GET_PARTY_POKE_COUNT (POKE_COUNT,POKECOUNT_MODE_TOTAL)
	
		//手持ちがいっぱいなら
		IF $POKE_COUNT == 6 THEN
			_BALLOONWIN_OBJMSG(msg_d01r0101_girl_03,D01R0101_GIRL_01)
			_BALLOONWIN_CLOSE()
			
			//======================================//
			
			//1回目の会話は繰り返さない用フラグ
			$WK_SCENE_D01R0101 = 1
			
			//======================================//
				
		ELSE
		//手持ちに空きがあれば持ちタイプに合わせてポケモンを渡す
			
			IF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_KUSA THEN
				//最初の３匹で草タイプを選択した時の処理
				_BALLOONWIN_OBJMSG(msg_d01r0101_girl_06,D01R0101_GIRL_01)
				_BALLOONWIN_CLOSE()
				_ADD_POKEMON_TO_PARTY( SCWK_ANSWER, MONSNO_597, 0, TOKUSYU_NULL, 10, 0 )
				
			ELSIF $WK_SYS_FIRST_POKETYPE == FIRST_POKETYPE_HONOO THEN	
				//最初の３匹で炎タイプを選択した時の処理
				_BALLOONWIN_OBJMSG(msg_d01r0101_girl_07,D01R0101_GIRL_01)
				_BALLOONWIN_CLOSE()
				_ADD_POKEMON_TO_PARTY( SCWK_ANSWER, MONSNO_593, 0, TOKUSYU_NULL, 10, 0 )
				
			ELSE
				//最初の３匹で水タイプを選択した時の処理
				_BALLOONWIN_OBJMSG(msg_d01r0101_girl_05,D01R0101_GIRL_01)
				_BALLOONWIN_CLOSE()
				_ADD_POKEMON_TO_PARTY( SCWK_ANSWER, MONSNO_595, 0, TOKUSYU_NULL, 10, 0 )
				
			ENDIF
		
			//プレイヤーネームを格納
			_PLAYER_NAME(0)
		
			//手に入れた
			_ME_PLAY( SEQ_ME_POKEGET )
			_SYSWIN_MSG_ALLPUT(msg_d01r0101_girl_08, WIN_DOWN)
			_ME_WAIT()
			_SYSWIN_CLOSE()
			
			//名前をつけますか？
			_SYSWIN_MSG(msg_d01r0101_girl_09, WIN_DOWN )
			DEFINE_LOCAL NAME_YESNO01
			_YES_NO_WIN( NAME_YESNO01 )
			_SYSWIN_CLOSE()
			
			//名づけるか分岐
			IF $NAME_YESNO01 == 0 THEN
				//はい
				
				//$POKE_COUNTに1を足して手持ちの最後尾の数を指定
				//$POKE_COUNT += 1
				
				//名前入力結果が格納されるローカル変数を定義
				DEFINE_LOCAL SCWK_NAMEINPUT
				
				
				//名前入力画面呼び出し
				_PARTY_POKE_NAME_INPUT(SCWK_NAMEINPUT,POKE_COUNT)
				
			ELSE
				//いいえの場合はスキップ
			ENDIF
		
			//会話終了
			_BALLOONWIN_OBJMSG(msg_d01r0101_girl_10,D01R0101_GIRL_01)
			_LAST_KEYWAIT()
			_BALLOONWIN_CLOSE()
			
			//======================================//
			
			//対策ポケモン受け取り済フラグ
			$WK_SCENE_D01R0101 = 2
			
			//======================================//
		ENDIF
		}

	//いらない場合
	ELSE
		_BALLOONWIN_OBJMSG(msg_d01r0101_girl_04,D01R0101_GIRL_01)
		_LAST_KEYWAIT()
		_BALLOONWIN_CLOSE()
		
		//======================================//
		
		//1回目の会話は繰り返さない用フラグ
		$WK_SCENE_D01R0101 = 1
		
		//======================================//
	
	ENDIF

_RET

/**************************************************************/
/*   D01R0101　サポート登場                                   */
/**************************************************************/
EVENT_START   ev_pos_d01r0101_support_01

	//サポートOBJ生成
	_FLAG_RESET(FV_D01R0101_SUPPORT_01)
	_OBJ_ADD(D01R0101_SUPPORT)
	
	//プレイヤーネームを格納
	_PLAYER_NAME(0)
	
	//サポート登場
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_01)
	_OBJ_ANIME_WAIT()
	
	//サポート曲再生。
	_START_EVENT_BGM( SEQ_BGM_E_SUPPORT )
	
	//主人公振り向く
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_retrun01)
	_OBJ_ANIME_WAIT()
	//ひとこと声をかける
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_01,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	//サポート廃墟内へ
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_02)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_retrun02)
	_OBJ_ANIME_WAIT()
	
	//専用曲止まる
	_END_EVENT_BGM()
	
	//======================================//
	
	//ポケモンの鳴き声に気づくPOS起動
	$WK_SCENE_D01R0101_POKE = 1
	
	//D01R0101夢ポケモンイベントOBJ表示
	_FLAG_RESET( FV_D01R0101_POKE_01 )
	_OBJ_ADD(D01R0101_POKE_01)
	_OBJ_ADD(D01R0101_HAKAIM_01)
	_OBJ_ADD(D01R0101_HAKAIW_01)
	
	
	//======================================//

EVENT_END

/**************************************************************/
/*   D01R0101　サポートに話しかけ時                          */
/**************************************************************/
EVENT_START   ev_d01r0101_support_02

	//状況ごとに話すことを変える

	//イベント進行前
	IF $WK_SCENE_D01R0101_POKE == 1 THEN
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_02)

	//物音に気づいた後
	ELSIF $WK_SCENE_D01R0101_POKE == 2 THEN
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_03)

	//イベント終了時
	ELSIF $WK_SCENE_D01R0101_POKE == 3 THEN
		//プレイヤーネームを格納
		_PLAYER_NAME(0)
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_12)

	//例外処理では夢の話をする
	ELSE
		_EASY_BALLOONWIN_TALKOBJ_MSG(msg_d01r0101_white_02)
	ENDIF

EVENT_END

/**************************************************************/
/*   D01R0101　POSを踏んでサポート反応する                    */
/**************************************************************/
EVENT_START   ev_pos_d01r0101_support_03

	//自機座標取得
	DEFINE_LOCAL  POSX
    DEFINE_LOCAL  POSZ
    _PLAYER_POS_GET( POSX,POSZ ) 

	//サポート追って来る
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_03)
	_OBJ_ANIME_WAIT()
	
	
	//プレイヤーが通る3グリッド分をアニメを用意
    SWITCH $POSZ
	CASE 22 THEN
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z22 )
	_OBJ_ANIME_WAIT()
	
	CASE 23 THEN
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z23 )
	_OBJ_ANIME_WAIT()
	
	CASE 24 THEN
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z24 )
	_OBJ_ANIME_WAIT()
	
    DEFAULT
    _OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_z22 )
	_OBJ_ANIME_WAIT()
	
    ENDSWITCH

	
	//サポート何かに気づく
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_03,D01R0101_SUPPORT)
	_LAST_KEYWAIT()
	_BALLOONWIN_CLOSE()
	
	//======================================//
	
	//ポケモンの姿を見るPOS起動
	$WK_SCENE_D01R0101_POKE = 2
	
	//======================================//

EVENT_END

/**************************************************************/
/*   D01R0101　POSを踏んで夢ポケモン鳴いて退場                */
/**************************************************************/
EVENT_START   ev_pos_d01r0101_support_04

	//プレイヤーネームを格納
	_PLAYER_NAME(0)
	
	//自機座標取得
	DEFINE_LOCAL  POSX02
    DEFINE_LOCAL  POSZ02
    _PLAYER_POS_GET( POSX02,POSZ02 ) 
    
    //サポートの位置を変更
    _OBJ_POS_CHANGE( D01R0101_SUPPORT, 27, 0, 18, DIR_UP )
	
	//プレイヤーが通る3グリッド分をアニメを用意
    SWITCH $POSX02
	CASE 26 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x26 )
	_OBJ_ANIME_WAIT()
	
	CASE 27 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x27 )
	_OBJ_ANIME_WAIT()
	
	CASE 28 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x28 )
	_OBJ_ANIME_WAIT()
	
	CASE 29 THEN
	_OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x29 )
	_OBJ_ANIME_WAIT()
	
    DEFAULT
    _OBJ_ANIME( D01R0101_SUPPORT, anm_d01r0101_support_04 )
    _OBJ_ANIME( MMDL_ID_PLAYER, anm_d01r0101_player_pos_x27 )
	_OBJ_ANIME_WAIT()
	
    ENDSWITCH

	//ムンナ鳴く
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke_01,D01R0101_POKE_01, WIN_DOWN )
	_BALLOONWIN_CLOSE()
	
	//ムンナ少し上に移動
	_OBJ_ANIME(D01R0101_POKE_01,anm_d01r0101_pokemon_01)
	_OBJ_ANIME_WAIT()
	
	//サポート：まってぇ！
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_04,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//サポートと主人公も上に移動
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_player_upgo)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_upgo)
	_OBJ_ANIME_WAIT()
	
	//画面外からプラズマ団登場
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_coming01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_coming01)
	_OBJ_ANIME_WAIT()
	
	//プラズマ女：みっけ
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaiw_01,D01R0101_HAKAIW_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ団ムンナを囲む
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_coming02)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_coming02)
	_OBJ_ANIME_WAIT()
	
	//ムンナ左右を見て困惑
	_OBJ_ANIME(D01R0101_POKE_01,anm_d01r0101_pokemon_02)
	_OBJ_ANIME_WAIT()
	
	//プラズマ男：夢のけむりを出せ！
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaim_01,D01R0101_HAKAIM_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ男その場歩き
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_kick)
	_OBJ_ANIME_WAIT()
	
	//ムンナ：むう！
	_BALLOONWIN_OBJMSG_POS(msg_d01r0101_poke_02,D01R0101_POKE_01, WIN_DOWN )
	_BALLOONWIN_CLOSE()
	
	//サポート：ちょっと！
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_05,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//プラズマ団下を向く
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//プラズマ男：わたしたちのことか？
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaim_02,D01R0101_HAKAIM_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ女：なにをしてるのか？
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaiw_02,D01R0101_HAKAIW_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ男ムンナを蹴る
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_kick)
	_OBJ_ANIME_WAIT()
	
	//プラズマ男：おっ！夢のけむり回収！
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaim_03,D01R0101_HAKAIM_01)
	_BALLOONWIN_CLOSE()
	
	//サポート：ひどい！
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_06,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//プラズマ男サポートの方を向く
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//プラズマ女：くだらないトレーナーと一緒にするな！
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaiw_03,D01R0101_HAKAIW_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ男：というわけで
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaim_04,D01R0101_HAKAIM_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ男隣接
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_battle01)
	_OBJ_ANIME_WAIT()
	
	//サポート：えええ！
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_07,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//戦闘処理
	
	//ムンナOBJ削除
	_OBJ_DEL(D01R0101_POKE_01)
	
	//プラズマ女：みくびったか？まあいい
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaiw_04,D01R0101_HAKAIW_01)
	_BALLOONWIN_CLOSE()
	
	//プラズマ女接近
	_OBJ_ANIME(D01R0101_HAKAIW_01,anm_d01r0101_hakaiw_battle01)
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakaim_battle02)
	_OBJ_ANIME_WAIT()
	
	//戦闘処理
	
	//プラズマ男下を向く
	_OBJ_ANIME(D01R0101_HAKAIM_01,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//まさか二人してまけるとはな
	_BALLOONWIN_OBJMSG(msg_d01r0101_hakaim_05,D01R0101_HAKAIM_01)
	_BALLOONWIN_CLOSE()
	
	//暗転処理
	_BLACK_OUT()
	_DISP_FADE_END_CHECK()

	//======================================//
	
	//ゆめのけむりOBJ表示
	_FLAG_RESET( FV_D01R0101_ITEM_01 )
	_OBJ_ADD(D01R0101_ITEM_01)
	
	//======================================//
	//プラズマ団OBJ削除
	_OBJ_DEL(D01R0101_HAKAIM_01)
	_OBJ_DEL(D01R0101_HAKAIW_01)
	
	//暗転復帰
	_BLACK_IN()
	_DISP_FADE_END_CHECK()
	
	//サポート主人公のほうを向く
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_player01)
	_OBJ_ANIME_WAIT()
	
	//サポート：ありがとう！
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_08,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//サポートアイテムに気づいて隣接
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_item)
	_OBJ_ANIME_WAIT()
	
	//アイテムOBJ削除
	_OBJ_DEL(D01R0101_ITEM_01)
	
	//サポート：これってゆめのけむり？
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_09,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//マコモ：わっ！
	_PLAINWIN_MSG_DOWN( msg_d01r0101_inventor_01 )
	_MSGWIN_CLOSE()
	
	//サポート下を向く
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_hakai_to_down)
	_OBJ_ANIME_WAIT()
	
	//マコモOBJ一時生成
	_OBJ_ADD_EX( 27, 17, DIR_UP, MMDL_ID_EVENTOBJ_00, ASSISTANTW, MV_DMY )
	
	//マコモ隣接（ウィンドウも同時に消す）
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_coming)
	_OBJ_ANIME_WAIT()
	
	//マコモ：待ちきれなくて来ちゃった
	_BALLOONWIN_OBJMSG(msg_d01r0101_inventor_02,MMDL_ID_EVENTOBJ_00)
	_BALLOONWIN_CLOSE()
	
	//サポート：これなんですけど…
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_10,D01R0101_SUPPORT)
	_BALLOONWIN_CLOSE()
	
	//なになに？
	_BALLOONWIN_OBJMSG(msg_d01r0101_inventor_03,MMDL_ID_EVENTOBJ_00)
	_BALLOONWIN_CLOSE()
	
	//マコモ：サポートに隣接（ダンス）・主人公隣接
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_to_support)
	_OBJ_ANIME(MMDL_ID_PLAYER,anm_d01r0101_player_to_invetor)
	_OBJ_ANIME_WAIT()
	
	//マコモ：これは！！！
	_BALLOONWIN_OBJMSG(msg_d01r0101_inventor_04,MMDL_ID_EVENTOBJ_00)
	_BALLOONWIN_CLOSE()
	
	//マコモ退場
	_OBJ_ANIME(MMDL_ID_EVENTOBJ_00,anm_d01r0101_inventor_goodbye)
	_OBJ_ANIME_WAIT()
	
	//サポート主人公に隣接
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_to_player02)
	_OBJ_ANIME_WAIT()
	
	//サポート：ふええ
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_11,D01R0101_SUPPORT)
	_LAST_KEYWAIT()
	_BALLOONWIN_CLOSE()
	
	//マコモを消す
	_OBJ_DEL( MMDL_ID_EVENTOBJ_00 )
	
	//======================================//
	
	//夢イベント終了フラグ
	$WK_SCENE_D01R0101_POKE = 3
	
	//夢ポケモン非表示
	_FLAG_SET(FV_D01R0101_POKE_01)
	//アイテムOBJ非表示
	_FLAG_SET( FV_D01R0101_ITEM_01 )
	
	//======================================//

EVENT_END

//--------------------------------------------------------------
//	R01　夢イベント用：夢ポケモン去っていく  
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_pokemon_01
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムンナを発見して　サポートが隣接 
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_04
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx26
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x26
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx27
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x27
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx28
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x28
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤームンナの前に立つx29
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_x29
	_ANIME_DATA	AC_WALK_L_8F,2
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポートとプレイヤー、ムンナを追う
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_upgo
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_coming01
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_coming01
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女ムンナを囲む
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_coming02
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男ムンナを囲む
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_coming02
	_ANIME_DATA	AC_WALK_R_8F,2
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：ムンナ囲まれて左右を見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_pokemon_02
	_ANIME_DATA	AC_DIR_R,24
	_ANIME_DATA	AC_DIR_L,24
	_ANIME_DATA	AC_DIR_R,24
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団下を向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakai_to_down
	_ANIME_DATA	AC_STAY_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男ムンナを蹴る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_kick
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男、主人公に隣接
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_battle01
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団男、戦闘に負けておしのけられる
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaim_battle02
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プラズマ団女、プラズマ男をおしのける
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_hakaiw_battle01
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、主人公の方を向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_to_player01
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、ゆめのけむりに気づく
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_to_item
	_ANIME_DATA	AC_STAY_WALK_U_8F,0
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ登場
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_coming
	_ANIME_DATA	AC_WALK_U_8F,6
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ、サポートに隣接
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_to_support
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA AC_STAY_JUMP_U_8F,2
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：マコモ、高速で帰る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_inventor_goodbye
	_ANIME_DATA	AC_WALK_D_4F,9
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：主人公、マコモを見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_to_invetor
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_STAY_WALK_L_8F,0
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：サポート、主人公に隣接
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_to_player02
	_ANIME_DATA	AC_STAY_WALK_R_8F,0
	_ANIME_DATA	ACMD_END,0
	
/**************************************************************/
/*   D01R0101　だいじなもの入手                               */
/**************************************************************/
EVENT_START   ev_d01r0101_item_01

	//プレイヤーネームを格納
	_PLAYER_NAME(0)

	//サポート駆け寄って来る
	_OBJ_ANIME(D01R0101_SUPPORT,anm_d01r0101_support_05)
	_OBJ_ANIME_WAIT()
	_BALLOONWIN_OBJMSG(msg_d01r0101_white_05,D01R0101_SUPPORT)
	_LAST_KEYWAIT()
	_BALLOONWIN_CLOSE()
	
	//======================================//

	//夢イベント終了フラグ起動
	$WK_SCENE_D01R0101_POKE = 4
	
	//======================================//
	
EVENT_END

//--------------------------------------------------------------
//	R01　夢イベント用：いあい切り後にサポート来る  
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_01
	_ANIME_DATA	AC_WALK_R_8F,6
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー振り向く
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_retrun01
	_ANIME_DATA	AC_WAIT_8F,1
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー一歩後ずさる
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_retrun02
	_ANIME_DATA AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー、サポートに隣接z22
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_z22
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー、サポートに隣接z23
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_z23
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：プレイヤー、サポートに隣接z24
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_player_pos_z24
	_ANIME_DATA	AC_WALK_U_8F,2
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：廃墟の中に入っていくサポート 
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_02
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_WALK_U_8F,4
	_ANIME_DATA	AC_DIR_R,24
	_ANIME_DATA	AC_DIR_L,24
	_ANIME_DATA	AC_DIR_R,24
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	R01　夢イベント用：POS踏むとサポートが気づいて駆け寄って来る  
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_03
	_ANIME_DATA	AC_DIR_U,8
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	ACMD_END,0


//--------------------------------------------------------------
//	R01　夢イベント用：アイテムを取得後サポートが隣接 
//--------------------------------------------------------------
_ANIME_LABEL	anm_d01r0101_support_05
	_ANIME_DATA	AC_WALK_U_8F,3
	_ANIME_DATA	ACMD_END,0
