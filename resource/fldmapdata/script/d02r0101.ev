
//======================================================================
//                d02r0101.ev
//
//    スクリプトファイル：d02r0101用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_d02r0101.h"
  .include  "d02r0101.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA		ev_d02r0101_sportsm_01
_EVENT_DATA		ev_d02r0101_mountman_01
_EVENT_DATA		ev_d02r0101_assistantw_01
_EVENT_DATA		ev_scene_d02r0101_stop_01
_EVENT_DATA		ev_d02r0101_leader3_01
_EVENT_DATA		ev_pos_d02r0101_stop
_EVENT_DATA		ev_d02r0101_hakaim_01
_EVENT_DATA		ev_init_d02r0101
_EVENT_DATA_END


/**************************************************************/
/*            FLAG_CHANGE_LABEL                               */
/**************************************************************/
//ev_d02r0101_flag_change:
//  _END

/**************************************************************/
/*  FIELD_INIT_LABEL						                  */
/**************************************************************/
INIT_EVENT_START	ev_init_d02r0101

	//シーンチェンジイベント後にジムリーダーアーティをストッパーの位置に移動
	IF $WK_SCENE_D02R0101 == 1 THEN
		_OBJ_POS_CHANGE( D02R0101_LEADER3_01, 74, 0, 27, DIR_DOWN )
	
	ENDIF

INIT_EVENT_END

/**************************************************************/
/*  D02R0101 SPORTSMの会話用イベントスクリプト                */
/**************************************************************/
EVENT_START		ev_d02r0101_sportsm_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_d02r0101_sportsm_01 )
EVENT_END
 
/**************************************************************/
/*  D02R0101 MOUNTMANの会話用イベントスクリプト               */
/**************************************************************/
EVENT_START		ev_d02r0101_mountman_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_d02r0101_mountain_01 )
EVENT_END

/**************************************************************/
/*  D02R0101 GIRL1の会話用イベントスクリプト                  */
/**************************************************************/
EVENT_START		ev_d02r0101_assistantw_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_d02r0101_assistantw_01 )
EVENT_END

/**************************************************************/
/*  D02R0101 SCENE_CHANGE									  */
/**************************************************************/
EVENT_START		ev_scene_d02r0101_stop_01
	
	//アーティ：自機を見る
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_staywalk )
	_OBJ_ANIME_WAIT()
	
	//ああ　もりの　におい……
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader3_01 , D02R0101_LEADER3_01 )
	_BALLOONWIN_CLOSE()
	
	//アーティ：H01側出入り口へ
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_saru )
	_OBJ_ANIME_WAIT()
	
	//アーティワープ
	_OBJ_POS_CHANGE( D02R0101_LEADER3_01, 74, 0, 27, DIR_DOWN )
	
	//==============ワーク操作==============//
	
	//シーンチェンジイベント終了
	$WK_SCENE_D02R0101 = 1
	
	//======================================//
	
EVENT_END

//--------------------------------------------------------------
//	アーティ　その場歩き、H01側出入り口へ
//--------------------------------------------------------------
_ANIME_LABEL anm_leader_staywalk
	_ANIME_DATA		AC_DIR_R,1
	_ANIME_DATA		AC_STAY_WALK_R_16F,1
	_ANIME_DATA		ACMD_END,0

_ANIME_LABEL anm_leader_saru
	_ANIME_DATA		AC_WALK_L_8F,6
	_ANIME_DATA		AC_WALK_L_8F,5
	_ANIME_DATA		ACMD_END,0

/**************************************************************/
/*  D02R0101 ジムリーダーアーティ会話						  */
/**************************************************************/
EVENT_START		ev_d02r0101_leader3_01
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_d02r0101_leader3_02 )
EVENT_END

/**************************************************************/
/*  D02R0101 ジムリーダーアーティストッパー　ＰＯＳ発動		  */
/**************************************************************/
EVENT_START		ev_pos_d02r0101_stop

	//ローカル変数定義
    DEFINE_LOCAL  LWK_POS_X
    DEFINE_LOCAL  LWK_POS_Z

	//自機座標取得
    _PLAYER_POS_GET( LWK_POS_X,LWK_POS_Z )

	//座標による分岐
    SWITCH $LWK_POS_X
    CASE 71 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_tikaduku1 )
        _OBJ_ANIME_WAIT()
    CASE 72 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_tikaduku2 )
        _OBJ_ANIME_WAIT()
    CASE 73 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_tikaduku3 )
        _OBJ_ANIME_WAIT()
    CASE 75 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_tikaduku4 )
        _OBJ_ANIME_WAIT()
    CASE 76 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_tikaduku5 )
        _OBJ_ANIME_WAIT()
    ENDSWITCH

	//……んうん？　こっちには……
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader3_03 , D02R0101_LEADER3_01 )
	_BALLOONWIN_CLOSE()

	//自機：押し戻される
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_back )
	_OBJ_ANIME_WAIT()

	//座標による分岐
    SWITCH $LWK_POS_X
    CASE 71 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_modoru1 )
        _OBJ_ANIME_WAIT()
    CASE 72 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_modoru2 )
        _OBJ_ANIME_WAIT()
    CASE 73 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_modoru3 )
        _OBJ_ANIME_WAIT()
    CASE 75 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_modoru4 )
        _OBJ_ANIME_WAIT()
    CASE 76 THEN
        _OBJ_ANIME( D02R0101_LEADER3_01, anm_leader_modoru5 )
        _OBJ_ANIME_WAIT()
    ENDSWITCH

EVENT_END

//--------------------------------------------------------------
//	自機　見る・一歩後ろへ
//--------------------------------------------------------------
_ANIME_LABEL	anm_player_back
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_D_16F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0
	
//--------------------------------------------------------------
//	アーティ　近づく
//--------------------------------------------------------------
_ANIME_LABEL	anm_leader_tikaduku1
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_WALK_L_8F,3
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_tikaduku2
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_WALK_L_8F,2
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_tikaduku3
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_tikaduku4
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_tikaduku5
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	AC_WALK_U_8F,1
	_ANIME_DATA	AC_WALK_R_8F,2
	_ANIME_DATA	AC_STAY_WALK_D_16F,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	アーティ　持ち場に戻る
//--------------------------------------------------------------
_ANIME_LABEL	anm_leader_modoru1
	_ANIME_DATA	AC_WALK_R_8F,3
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_modoru2
	_ANIME_DATA	AC_WALK_R_8F,2
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_modoru3
	_ANIME_DATA	AC_WALK_R_8F,1
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_modoru4
	_ANIME_DATA	AC_WALK_L_8F,1
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader_modoru5
	_ANIME_DATA	AC_WALK_L_8F,2
	_ANIME_DATA	AC_WALK_D_8F,1
	_ANIME_DATA	ACMD_END,0

/**************************************************************/
/*  D02R0101 プラズマ団員♂会話								  */
/**************************************************************/
EVENT_START		ev_d02r0101_hakaim_01
_TALK_OBJ_START()
	//団員：気付く
	_OBJ_ANIME( D02R0101_HAKAIM_01, anm_hakai_kiduku )
	_OBJ_ANIME_WAIT()
	
	//ちっ！　にげみちは　ないか！？
	_BALLOONWIN_OBJMSG( msg_d02r0101_hakaim1_01 , D02R0101_HAKAIM_01 )
	_LAST_KEYWAIT()
	_BALLOONWIN_CLOSE()
	
	//【仮】　下っ端を探す遊びを入れる予定　未作成
	
	//戦闘処理
	_TRAINER_BTL_SET( TRID_HAKAIM1_03, 0 )
	//敗戦チェック
	_TRAINER_LOSE_CHECK( SCWK_ANSWER )
	IF $SCWK_ANSWER == SCR_BATTLE_RESULT_LOSE THEN
		_TRAINER_LOSE()		//負け(0)ならトレーナー敗北処理へ(ここでスクリプト終了します）
	ENDIF
	
	//自機：団員の方を向く
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_all_uemiru )
	_OBJ_ANIME_WAIT()
	
	//団員：一歩下がる
	_OBJ_ANIME( D02R0101_HAKAIM_01, anm_hakai_back )
	_OBJ_ANIME_WAIT()
	
	//まけた　わかった！　これはかえす！
	_BALLOONWIN_OBJMSG( msg_d02r0101_hakaim1_02 , D02R0101_HAKAIM_01 )
	_BALLOONWIN_CLOSE()
	
	//【仮】アーティ：画面左から現れる　演出仮
	_OBJ_POS_CHANGE( D02R0101_LEADER3_01, 28, 0, 71, DIR_DOWN )
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_leader3_deru )
	_OBJ_ANIME_WAIT()
	
	//ああ　よかった！　なんだか　むしポケモンが　さわぐから
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader3_04 , D02R0101_LEADER3_01 )
	_BALLOONWIN_CLOSE()
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_all_uemiru )
	_OBJ_ANIME_WAIT()
	
	//自機名！アーティ！　おつかれさん！！
	_PLAYER_NAME( 0 )
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader2_01 , D02R0101_LEADER2_01 )
	_BALLOONWIN_CLOSE()

	//アロエ：画面下から現れる
	_OBJ_ANIME( D02R0101_LEADER2_01, anm_leader2_deru )
	_OBJ_ANIME_WAIT()

	//こいつが　さいごの　ひとり　ものを　とりかえせば　おわりだよ
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader2_02 , D02R0101_LEADER2_01 )
	_BALLOONWIN_CLOSE()	
	
	//団員：その場歩き
	_OBJ_ANIME( D02R0101_HAKAIM_01, anm_all_staywalk )
	_OBJ_ANIME_WAIT()	
	
	//おまえら　シッポウジムに　ヒウンジムの　リーダーだな！？
	_BALLOONWIN_OBJMSG( msg_d02r0101_hakaim1_03 , D02R0101_HAKAIM_01 )
	_BALLOONWIN_CLOSE()
	
	//アーティ：その場歩き
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_all_staywalk )
	_OBJ_ANIME_WAIT()
	
	//ジャマも　なにも……　ひとの　ものを
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader3_05 , D02R0101_LEADER3_01 )
	_BALLOONWIN_CLOSE()

	//……おまえらは　ポケモンを　くるしめているくせに！！
	_BALLOONWIN_OBJMSG( msg_d02r0101_hakaim1_04 , D02R0101_HAKAIM_01 )
	_BALLOONWIN_CLOSE()

	//【仮】団員：画面下に逃げさる　演出仮、適当に下に移動するだけです
	_OBJ_ANIME( D02R0101_HAKAIM_01, anm_hakai_nigeru )
	_OBJ_ANIME( MMDL_ID_PLAYER, anm_player_tobu )
	_OBJ_ANIME( D02R0101_LEADER2_01, anm_leader2_tobu )
	_OBJ_ANIME_WAIT()
	
	//あっ！！
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader2_03 , D02R0101_LEADER2_01 )
	_BALLOONWIN_CLOSE()
	
	//アーティ：その場歩き、アロエの方を見て
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_all_shitamiru )
	_OBJ_ANIME( D02R0101_LEADER2_01, anm_all_uemiru )
	_OBJ_ANIME_WAIT()

	_OBJ_ANIME( D02R0101_LEADER3_01, anm_all_staywalk )
	_OBJ_ANIME_WAIT()
	
	//おいかけなくても　いいでしょ　ぬすまれた　ものは　とりかえしたし
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader3_06 , D02R0101_LEADER3_01 )
	_BALLOONWIN_CLOSE()

	//アーティ：自機を見る
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_all_migimiru )
	_OBJ_ANIME_WAIT()

	//自機名だっけ　ポケモンジムで　キミの　ちょうせんを
	_PLAYER_NAME( 0 )
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader3_07 , D02R0101_LEADER3_01 )
	_BALLOONWIN_CLOSE()

	//【仮】アーティ：画面外へ　演出仮、適当に下に移動するだけです
	_OBJ_ANIME( D02R0101_LEADER3_01, anm_all_saru )
	_OBJ_ANIME_WAIT()
	
	//自機名　ありがとうよ　あんたのように　やさしい　トレーナーなら
	_PLAYER_NAME( 0 )
	_BALLOONWIN_OBJMSG( msg_d02r0101_leader2_04 , D02R0101_LEADER2_01 )
	_BALLOONWIN_CLOSE()

	//【仮】アロエ：画面外へ　演出仮、適当に下に移動するだけです
	_OBJ_ANIME( D02R0101_LEADER2_01, anm_all_saru )
	_OBJ_ANIME_WAIT()

	//アロエ・アーティのオブジェを消す
	_OBJ_DEL( D02R0101_LEADER3_01 )
	_OBJ_DEL( D02R0101_LEADER2_01 )
	_OBJ_DEL( D02R0101_HAKAIM_01 )

	//============フラグワーク操作=============//
	
	//トレーナーズスクールのライバル削除
	_FLAG_SET( FV_D02R0101_LEADER3 )
	_FLAG_SET( FV_D02R0101_LEADER2 )
	_FLAG_SET( FV_D02R0101_HAKAI )
	
	//盗難イベント終了
	$WK_SCENE_D02R0101 = 2

	_FLAG_RESET( FE_MUSEUM_TOUNAN )	//盗難イベントの終了
	_FLAG_RESET( FV_C02GYM0202_LEADER2 ) //ジム2室目にジムリーダー（アロエ）が戻る
	_FLAG_RESET( FV_MUSEUM_TOUNAN )  //博物館内の骨と石が元に戻る
	_FLAG_RESET( FV_MUSEUM_STONE )  //博物館内の石が元に戻る
	_FLAG_SET(FV_C02_LEADER2)	//C02ジムリーダーアロエがC02の町から消える

	_FLAG_SET(FV_C02GYM0101_FRIENDS)	//C02博物館内のサポートとライバルを消す

	//ジムリーダーのアロエがジムに戻る
	$WK_SCENE_C02  =  5 

	//盗難事件で破壊されたマップを元にもどす
	_CHANGE_MAPREPLACE_FLAG( MAPREPLACE_ID_01, FALSE, TRUE )

	//========================================//

EVENT_END

//--------------------------------------------------------------
//	団員　気付く、逃げる
//--------------------------------------------------------------
_ANIME_LABEL	anm_hakai_kiduku
	_ANIME_DATA	AC_MARK_GYOE,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_hakai_nigeru
	_ANIME_DATA	AC_WALK_D_4F,10
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_hakai_back
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_WALK_U_16F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	アーティ・アロエ　画面外からやってくる
//--------------------------------------------------------------
_ANIME_LABEL	anm_leader3_deru
	_ANIME_DATA	AC_WALK_R_8F,7
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_leader2_deru
	_ANIME_DATA	AC_WALK_U_8F,8
	_ANIME_DATA	ACMD_END,0
	
_ANIME_LABEL	anm_all_saru
	_ANIME_DATA	AC_WALK_D_8F,8
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_leader2_tobu
	_ANIME_DATA	AC_WAIT_4F,1
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_JUMP_L_1G_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	全員　その場歩き
//--------------------------------------------------------------
_ANIME_LABEL	anm_all_staywalk
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_STAY_WALK_R_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_all_uemiru
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_all_shitamiru
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_all_migimiru
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	ACMD_END,0

_ANIME_LABEL	anm_all_hidarimiru
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0

//--------------------------------------------------------------
//	自機　見る
//--------------------------------------------------------------
_ANIME_LABEL	anm_player_tobu
	_ANIME_DATA	AC_DIR_U,1
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	AC_DIR_D,1
	_ANIME_DATA	AC_DIR_R,1
	_ANIME_DATA	AC_DIR_PAUSE_ON,1
	_ANIME_DATA	AC_JUMP_R_1G_8F,1
	_ANIME_DATA	AC_DIR_PAUSE_OFF,1
	_ANIME_DATA	AC_DIR_L,1
	_ANIME_DATA	ACMD_END,0
