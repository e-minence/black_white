
//======================================================================
//                r09r0201.ev
//
//    スクリプトファイル：r09r0201用
//
//======================================================================

  .text

  .include  "scr_seq_def.h"
  .include  "../../message/dst/script/msg_r09r0201.h"
  .include  "r09r0201.h"

//--------------------------------------------------------------
//               スクリプト本体
//--------------------------------------------------------------

//--------------------------------------------------------------
//               スクリプトテーブル
//--------------------------------------------------------------
_EVENT_DATA    ev_r09r0201_boy3_01
_EVENT_DATA    ev_r09r0201_breederm_01
_EVENT_DATA    ev_r09r0201_middlewoman1_01
_EVENT_DATA    ev_r09r0201_woman3_01
_EVENT_DATA    ev_r09r0201_waitress_01
_EVENT_DATA_END


/**************************************************************/
/*            FLAG_CHANGE_LABEL                               */
/**************************************************************/
//ev_r09r0201_flag_change:
//  _END

/**************************************************************/
/*  R09 ブリーダーの会話用イベントスクリプト                      */
/**************************************************************/
EVENT_START   ev_r09r0201_breederm_01
  
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_r09r0201_breederm_01)
	
EVENT_END

/**************************************************************/
/*  R09 聡明の会話用イベントスクリプト                      */
/**************************************************************/
EVENT_START   ev_r09r0201_boy3_01
  
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_r09r0201_boy3_01 )
	
EVENT_END

/**************************************************************/
/*  R09 おばさんの会話用イベントスクリプト                      */
/**************************************************************/
EVENT_START   ev_r09r0201_middlewoman1_01
  
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_r09r0201_middlewoman1_01 )
	
EVENT_END

/**************************************************************/
/*  R09 エプロンの会話用イベントスクリプト                      */
/**************************************************************/
EVENT_START   ev_r09r0201_woman3_01
  
	_EASY_BALLOONWIN_TALKOBJ_MSG( msg_r09r0201_woman3_01 )
	
EVENT_END

/**************************************************************/
/*  R09 ウェートレスの会話用イベントスクリプト                      */
/**************************************************************/
EVENT_START   ev_r09r0201_waitress_01
  	
  	DEFINE_LOCAL	LWK_MILK_NUM
   	DEFINE_LOCAL	LWK_MILK_NUM_SELECT
  	DEFINE_LOCAL	LWK_MILK_GOLD    
  	DEFINE_LOCAL	LWK_GOLD_CHK
   	DEFINE_LOCAL	LWK_BAG_CHK
  	

   	
  	//ウェイトレス：いらっしゃいませ！　モーモーミルクは……
 	_BALLOONWIN_OBJMSG_POS( msg_r09r0201_waitress_01 , R09R0201_WAITRESS_01, POS_DL )
  	
  	//【仮】現在、所持金の表示とバールーンウィンドウが同時に表示されると、バルーンウィンドウが半透明になる
  	//対処については、12末ROM以降になります。
   	//所持金の表示
   	_GOLD_WIN_OPEN( 1, 1 )
   	
 	//購入本数の選択画面を作成
  	_BMPMENU_INIT_EX( 22, 1, 0, 1, LWK_MILK_NUM_SELECT  )
	
	_BMPMENU_MAKE_LIST( msg_r09r0201_waitress_07, 0 )	//1本
	_BMPMENU_MAKE_LIST( msg_r09r0201_waitress_08, 1 )	//1ダース
	_BMPMENU_MAKE_LIST( msg_r09r0201_waitress_09, 2 )	//いらない
	
	_BMPMENU_START()
	
	//1本を選択
	IF $LWK_MILK_NUM_SELECT  == 0 THEN
		
		$LWK_MILK_NUM = 1
		$LWK_MILK_GOLD  = 500
		
	//1ダースを選択
	ELSIF $LWK_MILK_NUM_SELECT  == 1 THEN
		
		//１ダース
		$LWK_MILK_NUM = 12
		$LWK_MILK_GOLD  = 6000
			
	//いらないを選択
	
	ELSE
		
	ENDIF
	
	_MSGWIN_CLOSE()
	
	//モーモーミルクを買う場合の処理
	IF $LWK_MILK_NUM_SELECT == 0 || $LWK_MILK_NUM_SELECT == 1	  THEN	
		_ADD_ITEM_CHK(ITEM_MOOMOOMIRUKU,LWK_MILK_NUM,LWK_BAG_CHK)
		_CHECK_GOLD( LWK_GOLD_CHK, LWK_MILK_GOLD  )

		
		IF $LWK_BAG_CHK == 0 THEN 
		 	_BALLOONWIN_OBJMSG_POS( msg_r09r0201_waitress_03 , R09R0201_WAITRESS_01, POS_DL )
			_LAST_KEYWAIT()
			_MSGWIN_CLOSE()
			
			_GOLD_WIN_CLOSE()
		
		ELSIF $LWK_GOLD_CHK == 0 THEN
		 	_BALLOONWIN_OBJMSG_POS( msg_r09r0201_waitress_04 , R09R0201_WAITRESS_01, POS_DL )
			_LAST_KEYWAIT()
			_MSGWIN_CLOSE()		
			
			_GOLD_WIN_CLOSE()
			
		ELSE
			
			IF $LWK_MILK_NUM == 1 THEN
		 		_BALLOONWIN_OBJMSG_POS( msg_r09r0201_waitress_02 , R09R0201_WAITRESS_01, POS_DL )
				_MSGWIN_CLOSE()	
			
			ELSE
		 		_BALLOONWIN_OBJMSG_POS( msg_r09r0201_waitress_06  , R09R0201_WAITRESS_01, POS_DL )
				_MSGWIN_CLOSE()		

			ENDIF
			
			_SUBTRACT_GOLD( LWK_MILK_GOLD )
			_GOLD_WIN_UPDATE( 1, 1 )
			_TIME_WAIT( 30 )
			_GOLD_WIN_CLOSE()
						
			//【仮】コマンドが変更になる予定
			_SE_PLAY( SEQ_SE_SYS_22 )
			_SE_WAIT()
			_ITEM_EVENT_SUCCESS_NOWAIT( ITEM_MOOMOOMIRUKU, LWK_MILK_NUM )

		ENDIF
	
	//モーモーミルクを買わない場合の処理
	ELSE
		_BALLOONWIN_OBJMSG_POS( msg_r09r0201_waitress_05  , R09R0201_WAITRESS_01, POS_DL )
		_LAST_KEYWAIT()
		_MSGWIN_CLOSE()
		_GOLD_WIN_CLOSE()	
		
	ENDIF
	
EVENT_END
