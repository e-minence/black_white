#----------------------------------------------------------------------------
# Project:  地形xlsファイルから地形データリスト作成
# File:     mkfile_landlist
# Copyright 2005 GameFreak.inc  All rights reserved.
#----------------------------------------------------------------------------
#---------------------------------------------------------------
#	共通ルールファイルのインクルード
#---------------------------------------------------------------
include users_def
include $(PROJECT_RSCDIR)/macro_define

#---------------------------------------------------------------
#	各要素
#---------------------------------------------------------------
LAND_ARCLIST	= land_arc_list
XLS_DATA		= map_list.xls
FLDCSV			= field_list.csv
DUNCSV      = dungeon_list.csv
ROOMCSV     = room_list.csv
CSVCVTR	= $(PROJECT_ROOT)/tools/exceltool/ExcelSeetConv.exe

#---------------------------------------------------------------
#	ターゲット
#---------------------------------------------------------------
.PHONY: do-build clean

#---------------------------------------------------------------
#	build
#---------------------------------------------------------------
ifeq	($(CONVERTUSER),true) #CONVERTUSER
do-build: $(LAND_ARCLIST)

#リスト作成
$(LAND_ARCLIST): $(XLS_DATA)
	@echo create $(LAND_ARCLIST)
	$(CSVCVTR) -o $(FLDCSV) -p 1 -s csv $(XLS_DATA)	#フィールド
	$(CSVCVTR) -o $(DUNCSV) -p 2 -s csv $(XLS_DATA) #ダンジョン
	$(CSVCVTR) -o $(ROOMCSV) -p 3 -s csv $(XLS_DATA) #ルーム
	ruby land_list.rb $(FLDCSV) $(DUNCSV) $(ROOMCSV)
else #非USERS
do-build:
endif

#---------------------------------------------------------------
#	clean
#---------------------------------------------------------------
ifeq	($(CONVERTUSER),true) #CONVERTUSER
clean:
	-rm -f $(LAND_ARCLIST)
else #非USERS
clean:
endif
