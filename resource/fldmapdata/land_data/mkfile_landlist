#----------------------------------------------------------------------------
# Project:  地形xlsファイルから地形データリスト作成
# File:     mkfile_landlist
# Copyright 2005 GameFreak.inc  All rights reserved.
#----------------------------------------------------------------------------
#---------------------------------------------------------------
#	共通ルールファイルのインクルード
#---------------------------------------------------------------
include users_def
include $(PROJECT_RSCDIR)/macro_define

#---------------------------------------------------------------
#	各要素
#---------------------------------------------------------------
LAND_LIST = land_output_list
XLS_DATA = map_list.xls
FLDCSV = field_list.csv
DUNCSV = dungeon_list.csv
ROOMCSV = room_list.csv
NONGRIDCSV = nongrid_list.csv

CSVCVTR	= $(PROJECT_ROOT)/tools/exceltool/ExcelSeetConv.exe

#clean対象
TARGET_CLEAN = $(LAND_LIST) $(FLDCSV) $(DUNCSV) $(ROOMCSV) $(NONGRIDCSV)

#---------------------------------------------------------------
#	ターゲット
#---------------------------------------------------------------
.PHONY: do-build clean

#---------------------------------------------------------------
#	build
#---------------------------------------------------------------
ifeq	($(CONVERTUSER),true) #CONVERTUSER
do-build: $(LAND_LIST)

#リスト作成
$(LAND_LIST): $(XLS_DATA)
	@echo create land list
	$(CSVCVTR) -o $(FLDCSV) -p 1 -s csv $(XLS_DATA)	#フィールド
	$(CSVCVTR) -o $(DUNCSV) -p 2 -s csv $(XLS_DATA) #ダンジョン
	$(CSVCVTR) -o $(ROOMCSV) -p 3 -s csv $(XLS_DATA) #ルーム
	$(CSVCVTR) -o $(NONGRIDCSV) -p 4 -s csv $(XLS_DATA) #ノングリッド
	ruby land_list.rb $(FLDCSV) $(DUNCSV) $(ROOMCSV) $(NONGRIDCSV)
else #非USERS
do-build:
endif

#---------------------------------------------------------------
#	clean
#---------------------------------------------------------------
ifeq	($(CONVERTUSER),true) #CONVERTUSER
clean:
	-rm -f $(TARGET_CLEAN)
else #非USERS
clean:
endif
