/////////////////////////////////////////////////////////////////////////////////
/**
 *
 * @brief  3Dサウンドユニット
 * @file   iss_3ds_unit.h
 * @author obata
 * @date   2009.09.08
 *
 */
/////////////////////////////////////////////////////////////////////////////////
#pragma once


//===============================================================================
// ■不完全型の宣言
//===============================================================================
typedef struct _ISS_3DS_UNIT ISS_3DS_UNIT;


//===============================================================================
// ■作成・破棄
//===============================================================================

//-------------------------------------------------------------------------------
/**
 * @brief ユニットを作成する
 *
 * @param heap_id 使用するヒープID
 *
 * @return 作成したユニット
 */
//-------------------------------------------------------------------------------
ISS_3DS_UNIT* ISS_3DS_UNIT_Create( HEAPID heap_id );

//-------------------------------------------------------------------------------
/**
 * @brief ユニットを破棄する
 *
 * @param unit 破棄するユニット
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_Delete( ISS_3DS_UNIT* unit );


//===============================================================================
// ■情報取得
//===============================================================================

//-------------------------------------------------------------------------------
/**
 * @brief 位置を取得する
 *
 * @param unit 取得対象ユニット
 * @param dest 位置ベクトルの格納先
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_GetPos( const ISS_3DS_UNIT* unit, VecFx32* dest );

//-------------------------------------------------------------------------------
/**
 * @brief 音の可聴距離を取得する
 *
 * @param unit 取得対象ユニット
 *
 * @return 音が届く距離
 */
//-------------------------------------------------------------------------------
fx32 ISS_3DS_UNIT_GetRange( const ISS_3DS_UNIT* unit );

//-------------------------------------------------------------------------------
/**
 * @brief 最大音量を取得する
 *
 * @param unit 取得対象ユニット
 *
 * @return 最大音量(0〜127)
 */
//-------------------------------------------------------------------------------
int ISS_3DS_UNIT_GetMaxVolume( const ISS_3DS_UNIT* unit ); 

//-------------------------------------------------------------------------------
/**
 * @brief 操作対象トラックのビットマスクを取得する
 *
 * @param unit 取得対象ユニット
 *
 * @return トラックマスク
 */
//-------------------------------------------------------------------------------
u16 ISS_3DS_UNIT_GetTrackBit( const ISS_3DS_UNIT* unit );

//===============================================================================
// ■情報設定
//===============================================================================

//-------------------------------------------------------------------------------
/**
 * @brief 設定データを読み込む
 * 
 * @param unit    設定対象のユニット
 * @param arc_id  読み込むデータのアーカイブＩＤ
 * @param dat_id  アーカイブ内データＩＤ
 * @param heap_id 使用するヒープＩＤ
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_Load(  
    ISS_3DS_UNIT* unit, ARCID arc_id, ARCDATID dat_id, HEAPID heap_id );

//-------------------------------------------------------------------------------
/**
 * @brief 位置を設定する
 *
 * @param unit 設定対象ユニット
 * @param pos  設定値
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_SetPos( ISS_3DS_UNIT* unit, const VecFx32* pos );

//-------------------------------------------------------------------------------
/**
 * @brief 音の可聴距離を設定する
 *
 * @param unit  設定対象ユニット
 * @param range 設定値
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_SetRange( ISS_3DS_UNIT* unit, fx32 range );

//-------------------------------------------------------------------------------
/**
 * @brief 最大音量を設定する
 *
 * @param unit   設定対象ユニット
 * @param volume 設定値(0〜127)
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_SetMaxVolume( ISS_3DS_UNIT* unit, int volume );

//-------------------------------------------------------------------------------
/**
 * @brief 捜査対象トラックを設定する
 *
 * @param unit  設定対象ユニット
 * @param track 操作対象トラックのマスク
 */
//-------------------------------------------------------------------------------
void ISS_3DS_UNIT_SetTrackBit( ISS_3DS_UNIT* unit, u16 track );
